.class public Lnet/pubnative/lite/sdk/mraid/internal/MRAIDHtmlProcessor;
.super Ljava/lang/Object;
.source "SourceFile"


# direct methods
.method public constructor <init>()V
    .locals 0

    .line 1
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 2
    .line 3
    .line 4
    return-void
    .line 5
    .line 6
    .line 7
    .line 8
    .line 9
    .line 10
    .line 11
    .line 12
    .line 13
    .line 14
    .line 15
    .line 16
    .line 17
    .line 18
    .line 19
    .line 20
    .line 21
    .line 22
    .line 23
.end method

.method public static processRawHtml(Ljava/lang/String;)Ljava/lang/String;
    .locals 9

    .line 1
    new-instance v0, Ljava/lang/StringBuffer;

    .line 2
    .line 3
    invoke-direct {v0, p0}, Ljava/lang/StringBuffer;-><init>(Ljava/lang/String;)V

    .line 4
    .line 5
    .line 6
    const-string v1, "<script\\s+[^>]*\\bsrc\\s*=\\s*([\"\'])mraid\\.js\\1[^>]*>\\s*</script>\\n*"

    .line 7
    .line 8
    const/4 v2, 0x2

    .line 9
    invoke-static {v1, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    .line 10
    .line 11
    .line 12
    move-result-object v1

    .line 13
    invoke-virtual {v1, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    .line 14
    .line 15
    .line 16
    invoke-static {p0}, Lnet/pubnative/lite/sdk/mraid/internal/MRAIDHtmlProcessor;->removeAllScripts(Ljava/lang/String;)Ljava/lang/String;

    .line 17
    .line 18
    .line 19
    move-result-object v1

    .line 20
    const-string v3, "<html"

    .line 21
    .line 22
    invoke-virtual {v1, v3}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    .line 23
    .line 24
    .line 25
    move-result v1

    .line 26
    invoke-static {p0}, Lnet/pubnative/lite/sdk/mraid/internal/MRAIDHtmlProcessor;->removeAllScripts(Ljava/lang/String;)Ljava/lang/String;

    .line 27
    .line 28
    .line 29
    move-result-object v3

    .line 30
    const-string v4, "<head"

    .line 31
    .line 32
    invoke-virtual {v3, v4}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    .line 33
    .line 34
    .line 35
    move-result v3

    .line 36
    invoke-static {p0}, Lnet/pubnative/lite/sdk/mraid/internal/MRAIDHtmlProcessor;->removeAllScripts(Ljava/lang/String;)Ljava/lang/String;

    .line 37
    .line 38
    .line 39
    move-result-object p0

    .line 40
    const-string v4, "<body"

    .line 41
    .line 42
    invoke-virtual {p0, v4}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    .line 43
    .line 44
    .line 45
    move-result p0

    .line 46
    const-string v4, "line.separator"

    .line 47
    .line 48
    invoke-static {v4}, Ljava/lang/System;->getProperty(Ljava/lang/String;)Ljava/lang/String;

    .line 49
    .line 50
    .line 51
    move-result-object v4

    .line 52
    const-string v5, "</head>"

    .line 53
    .line 54
    const-string v6, "<head>"

    .line 55
    .line 56
    const/4 v7, 0x0

    .line 57
    if-nez v1, :cond_2

    .line 58
    .line 59
    if-nez p0, :cond_0

    .line 60
    .line 61
    new-instance p0, Ljava/lang/StringBuilder;

    .line 62
    .line 63
    const-string v1, "<body><div id=\'hybid-ad\' align=\'center\'>"

    .line 64
    .line 65
    invoke-direct {p0, v1}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    .line 66
    .line 67
    .line 68
    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 69
    .line 70
    .line 71
    invoke-virtual {p0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    .line 72
    .line 73
    .line 74
    move-result-object p0

    .line 75
    invoke-virtual {v0, v7, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 76
    .line 77
    .line 78
    const-string p0, "</div></body>"

    .line 79
    .line 80
    invoke-virtual {v0, p0}, Ljava/lang/StringBuffer;->append(Ljava/lang/String;)Ljava/lang/StringBuffer;

    .line 81
    .line 82
    .line 83
    :cond_0
    if-nez v3, :cond_1

    .line 84
    .line 85
    invoke-static {v6, v4, v5, v4}, Lq3/bar;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    .line 86
    .line 87
    .line 88
    move-result-object p0

    .line 89
    invoke-virtual {v0, v7, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 90
    .line 91
    .line 92
    :cond_1
    new-instance p0, Ljava/lang/StringBuilder;

    .line 93
    .line 94
    const-string v1, "<html>"

    .line 95
    .line 96
    invoke-direct {p0, v1}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    .line 97
    .line 98
    .line 99
    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 100
    .line 101
    .line 102
    invoke-virtual {p0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    .line 103
    .line 104
    .line 105
    move-result-object p0

    .line 106
    invoke-virtual {v0, v7, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 107
    .line 108
    .line 109
    invoke-virtual {v0, v4}, Ljava/lang/StringBuffer;->append(Ljava/lang/String;)Ljava/lang/StringBuffer;

    .line 110
    .line 111
    .line 112
    const-string p0, "</html>"

    .line 113
    .line 114
    invoke-virtual {v0, p0}, Ljava/lang/StringBuffer;->append(Ljava/lang/String;)Ljava/lang/StringBuffer;

    .line 115
    .line 116
    .line 117
    goto :goto_1

    .line 118
    :cond_2
    if-nez v3, :cond_3

    .line 119
    .line 120
    const-string p0, "<html[^>]*>"

    .line 121
    .line 122
    invoke-static {p0, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    .line 123
    .line 124
    .line 125
    move-result-object p0

    .line 126
    invoke-virtual {p0, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    .line 127
    .line 128
    .line 129
    move-result-object p0

    .line 130
    move v1, v7

    .line 131
    :goto_0
    invoke-virtual {p0, v1}, Ljava/util/regex/Matcher;->find(I)Z

    .line 132
    .line 133
    .line 134
    move-result v1

    .line 135
    if-eqz v1, :cond_3

    .line 136
    .line 137
    invoke-virtual {p0}, Ljava/util/regex/Matcher;->end()I

    .line 138
    .line 139
    .line 140
    move-result v1

    .line 141
    invoke-static {v4, v6, v4, v5}, LV4/baz;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    .line 142
    .line 143
    .line 144
    move-result-object v3

    .line 145
    invoke-virtual {v0, v1, v3}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 146
    .line 147
    .line 148
    invoke-virtual {p0}, Ljava/util/regex/Matcher;->end()I

    .line 149
    .line 150
    .line 151
    move-result v1

    .line 152
    goto :goto_0

    .line 153
    :cond_3
    :goto_1
    const-string p0, "Ly8KLy8gIG1yYWlkLmpzCi8vCgooZnVuY3Rpb24gKCkgewoKICAgIGNvbnNvbGUubG9nKCJNUkFJRCBvYmplY3QgbG9hZGluZy4uLiIpOwoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqIGNvbnNvbGUgbG9nZ2luZyBoZWxwZXIKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICB2YXIgTG9nTGV2ZWxFbnVtID0gewogICAgICAgICJERUJVRyI6IDAsCiAgICAgICAgIklORk8iOiAxLAogICAgICAgICJXQVJOSU5HIjogMiwKICAgICAgICAiRVJST1IiOiAzLAogICAgICAgICJOT05FIjogNAogICAgfTsKCiAgICB2YXIgbG9nTGV2ZWwgPSBMb2dMZXZlbEVudW0uREVCVUc7CiAgICB2YXIgbG9nID0ge307CgogICAgbG9nLmQgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgaWYgKGxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5ERUJVRykgewogICAgICAgICAgICBjb25zb2xlLmxvZygiKEQtbXJhaWQuanMpICIgKyBtc2cpOwogICAgICAgIH0KICAgIH07CgogICAgbG9nLmkgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgaWYgKGxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5JTkZPKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoSS1tcmFpZC5qcykgIiArIG1zZyk7CiAgICAgICAgfQogICAgfTsKCiAgICBsb2cudyA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBpZiAobG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLldBUk5JTkcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIihXLW1yYWlkLmpzKSAiICsgbXNnKTsKICAgICAgICB9CiAgICB9OwoKICAgIGxvZy5lID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgIGlmIChsb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uRVJST1IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIihFLW1yYWlkLmpzKSAiICsgbXNnKTsKICAgICAgICB9CiAgICB9OwoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqIE1SQUlEIGRlY2xhcmF0aW9uCiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgdmFyIG1yYWlkID0gd2luZG93Lm1yYWlkID0ge307CgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICogVlBBSUQgZGVjbGFyYXRpb24gKG9wdGlvbmFsKQogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgIHZhciB2cGFpZCA9IG51bGw7CgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICogY29uc3RhbnRzCiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgdmFyIFZFUlNJT04gPSAiMy4wIjsKCiAgICB2YXIgU0RLID0gIkh5QmlkIjsKCiAgICB2YXIgU1RBVEVTID0gbXJhaWQuU1RBVEVTID0gewogICAgICAgICJMT0FESU5HIjogImxvYWRpbmciLAogICAgICAgICJERUZBVUxUIjogImRlZmF1bHQiLAogICAgICAgICJFWFBBTkRFRCI6ICJleHBhbmRlZCIsCiAgICAgICAgIlJFU0laRUQiOiAicmVzaXplZCIsCiAgICAgICAgIkhJRERFTiI6ICJoaWRkZW4iCiAgICB9OwoKICAgIHZhciBQTEFDRU1FTlRfVFlQRVMgPSBtcmFpZC5QTEFDRU1FTlRfVFlQRVMgPSB7CiAgICAgICAgIklOTElORSI6ICJpbmxpbmUiLAogICAgICAgICJJTlRFUlNUSVRJQUwiOiAiaW50ZXJzdGl0aWFsIgogICAgfTsKCiAgICB2YXIgUkVTSVpFX1BST1BFUlRJRVNfQ1VTVE9NX0NMT1NFX1BPU0lUSU9OID0gbXJhaWQuUkVTSVpFX1BST1BFUlRJRVNfQ1VTVE9NX0NMT1NFX1BPU0lUSU9OID0gewogICAgICAgICJUT1BfTEVGVCI6ICJ0b3AtbGVmdCIsCiAgICAgICAgIlRPUF9DRU5URVIiOiAidG9wLWNlbnRlciIsCiAgICAgICAgIlRPUF9SSUdIVCI6ICJ0b3AtcmlnaHQiLAogICAgICAgICJDRU5URVIiOiAiY2VudGVyIiwKICAgICAgICAiQk9UVE9NX0xFRlQiOiAiYm90dG9tLWxlZnQiLAogICAgICAgICJCT1RUT01fQ0VOVEVSIjogImJvdHRvbS1jZW50ZXIiLAogICAgICAgICJCT1RUT01fUklHSFQiOiAiYm90dG9tLXJpZ2h0IgogICAgfTsKCiAgICB2YXIgT1JJRU5UQVRJT05fUFJPUEVSVElFU19GT1JDRV9PUklFTlRBVElPTiA9IG1yYWlkLk9SSUVOVEFUSU9OX1BST1BFUlRJRVNfRk9SQ0VfT1JJRU5UQVRJT04gPSB7CiAgICAgICAgIlBPUlRSQUlUIjogInBvcnRyYWl0IiwKICAgICAgICAiTEFORFNDQVBFIjogImxhbmRzY2FwZSIsCiAgICAgICAgIk5PTkUiOiAibm9uZSIKICAgIH07CgogICAgdmFyIEVWRU5UUyA9IG1yYWlkLkVWRU5UUyA9IHsKICAgICAgICAiRVJST1IiOiAiZXJyb3IiLAogICAgICAgICJSRUFEWSI6ICJyZWFkeSIsCiAgICAgICAgIlNJWkVDSEFOR0UiOiAic2l6ZUNoYW5nZSIsCiAgICAgICAgIlNUQVRFQ0hBTkdFIjogInN0YXRlQ2hhbmdlIiwKICAgICAgICAiRVhQT1NVUkVDSEFOR0UiOiAiZXhwb3N1cmVDaGFuZ2UiLAogICAgICAgICJBVURJT1ZPTFVNRUNIQU5HRSI6ICJhdWRpb1ZvbHVtZUNoYW5nZSIsCiAgICAgICAgIlZJRVdBQkxFQ0hBTkdFIjogInZpZXdhYmxlQ2hhbmdlIgogICAgfTsKCiAgICB2YXIgU1VQUE9SVEVEX0ZFQVRVUkVTID0gbXJhaWQuU1VQUE9SVEVEX0ZFQVRVUkVTID0gewogICAgICAgICJTTVMiOiAic21zIiwKICAgICAgICAiVEVMIjogInRlbCIsCiAgICAgICAgIkNBTEVOREFSIjogImNhbGVuZGFyIiwKICAgICAgICAiU1RPUkVQSUNUVVJFIjogInN0b3JlUGljdHVyZSIsCiAgICAgICAgIklOTElORVZJREVPIjogImlubGluZVZpZGVvIiwKICAgICAgICAiVlBBSUQiOiAidnBhaWQiLAogICAgICAgICJMT0NBVElPTiI6ICJsb2NhdGlvbiIKICAgIH07CgogICAgdmFyIExPQ0FUSU9OX1NPVVJDRVMgPSBtcmFpZC5MT0NBVElPTl9TT1VSQ0VTID0gewogICAgICAgICJHUFMiOiAxLAogICAgICAgICJJUCI6IDIsCiAgICAgICAgIlVTRVJfUFJPVklERUQiOiAzCiAgICB9CgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICogc3RhdGUKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICB2YXIgc3RhdGUgPSBTVEFURVMuTE9BRElORzsKICAgIHZhciBwbGFjZW1lbnRUeXBlID0gUExBQ0VNRU5UX1RZUEVTLklOTElORTsKICAgIHZhciBzdXBwb3J0ZWRGZWF0dXJlcyA9IHt9OwogICAgdmFyIGlzVmlld2FibGUgPSBmYWxzZTsKICAgIHZhciBpc0V4cGFuZFByb3BlcnRpZXNTZXQgPSBmYWxzZTsKICAgIHZhciBpc1Jlc2l6ZVJlYWR5ID0gZmFsc2U7CgogICAgdmFyIGV4cG9zdXJlID0gewogICAgICAgICJleHBvc2VkUGVyY2VudGFnZSI6IDAuMCwKICAgICAgICAidmlzaWJsZVJlY3RhbmdsZSI6IHsKICAgICAgICAgICAgIngiOiAwLAogICAgICAgICAgICAieSI6IDAsCiAgICAgICAgICAgICJ3aWR0aCI6IDAsCiAgICAgICAgICAgICJoZWlnaHQiOiAwCiAgICAgICAgfSwKICAgICAgICAib2NjbHVzaW9uUmVjdGFuZ2xlcyI6IG51bGwKICAgIH0KCiAgICB2YXIgdm9sdW1lUGVyY2VudGFnZSA9IDAuMDsKCgogICAgdmFyIGV4cGFuZFByb3BlcnRpZXMgPSB7CiAgICAgICAgIndpZHRoIjogMCwKICAgICAgICAiaGVpZ2h0IjogMCwKICAgICAgICAidXNlQ3VzdG9tQ2xvc2UiOiBmYWxzZSwKICAgICAgICAiaXNNb2RhbCI6IHRydWUKICAgIH07CgogICAgdmFyIG9yaWVudGF0aW9uUHJvcGVydGllcyA9IHsKICAgICAgICAiYWxsb3dPcmllbnRhdGlvbkNoYW5nZSI6IHRydWUsCiAgICAgICAgImZvcmNlT3JpZW50YXRpb24iOiBPUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OLk5PTkUKICAgIH07CgogICAgdmFyIGN1cnJlbnRBcHBPcmllbnRhdGlvbiA9IHsKICAgICAgICAib3JpZW50YXRpb24iOiBPUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OLlBPUlRSQUlULAogICAgICAgICJsb2NrZWQiOiBmYWxzZQogICAgfTsKCiAgICB2YXIgcmVzaXplUHJvcGVydGllcyA9IHsKICAgICAgICAid2lkdGgiOiAwLAogICAgICAgICJoZWlnaHQiOiAwLAogICAgICAgICJjdXN0b21DbG9zZVBvc2l0aW9uIjogUkVTSVpFX1BST1BFUlRJRVNfQ1VTVE9NX0NMT1NFX1BPU0lUSU9OLlRPUF9SSUdIVCwKICAgICAgICAib2Zmc2V0WCI6IDAsCiAgICAgICAgIm9mZnNldFkiOiAwLAogICAgICAgICJhbGxvd09mZnNjcmVlbiI6IHRydWUKICAgIH07CgogICAgdmFyIGN1cnJlbnRQb3NpdGlvbiA9IHsKICAgICAgICAieCI6IDAsCiAgICAgICAgInkiOiAwLAogICAgICAgICJ3aWR0aCI6IDAsCiAgICAgICAgImhlaWdodCI6IDAKICAgIH07CgogICAgdmFyIGRlZmF1bHRQb3NpdGlvbiA9IHsKICAgICAgICAieCI6IDAsCiAgICAgICAgInkiOiAwLAogICAgICAgICJ3aWR0aCI6IDAsCiAgICAgICAgImhlaWdodCI6IDAKICAgIH07CgogICAgdmFyIG1heFNpemUgPSB7CiAgICAgICAgIndpZHRoIjogMCwKICAgICAgICAiaGVpZ2h0IjogMAogICAgfTsKCiAgICB2YXIgc2NyZWVuU2l6ZSA9IHsKICAgICAgICAid2lkdGgiOiAwLAogICAgICAgICJoZWlnaHQiOiAwCiAgICB9OwoKICAgIHZhciBsb2NhdGlvbiA9IHsKICAgICAgICAibGF0IjogLTEsCiAgICAgICAgImxvbiI6IC0xLAogICAgICAgICJ0eXBlIjogTE9DQVRJT05fU09VUkNFUy5HUFMsCiAgICAgICAgImFjY3VyYWN5IjogLTEsCiAgICAgICAgImxhc3RmaXgiOiAtMSwKICAgICAgICAiaXBzZXJ2aWNlIjogIm5vbmUiCiAgICB9CgogICAgdmFyIGxpc3RlbmVycyA9IHt9OwogICAgd2luZG93Lmxpc3RlbmVycyA9IGxpc3RlbmVyczsKCiAgICB2YXIgbXJhaWRFbnYgPSB7CiAgICAgICAgInZlcnNpb24iOiBWRVJTSU9OLAogICAgICAgICJzZGsiOiBTREssCiAgICAgICAgInNka1ZlcnNpb24iOiBudWxsLAogICAgICAgICJhcHBJZCI6IG51bGwsCiAgICAgICAgImlmYSI6IG51bGwsCiAgICAgICAgImxpbWl0QWRUcmFja2luZyI6IGZhbHNlLAogICAgICAgICJjb3BwYSI6IGZhbHNlCiAgICB9OwoKICAgIHdpbmRvdy5NUkFJRF9FTlYgPSBtcmFpZEVudjsKCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAgKiAib2ZmaWNpYWwiIEFQSTogbWV0aG9kcyBjYWxsZWQgYnkgY3JlYXRpdmUKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICBtcmFpZC5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50LCBsaXN0ZW5lcikgewogICAgICAgIGxvZy5pKCJtcmFpZC5hZGRFdmVudExpc3RlbmVyICIgKyBldmVudCArICI6ICIgKyBTdHJpbmcobGlzdGVuZXIpKTsKICAgICAgICBpZiAoIWV2ZW50IHx8ICFsaXN0ZW5lcikgewogICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiQm90aCBldmVudCBhbmQgbGlzdGVuZXIgYXJlIHJlcXVpcmVkLiIsICJhZGRFdmVudExpc3RlbmVyIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFjb250YWlucyhldmVudCwgRVZFTlRTKSkgewogICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiVW5rbm93biBNUkFJRCBldmVudDogIiArIGV2ZW50LCAiYWRkRXZlbnRMaXN0ZW5lciIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBsaXN0ZW5lcnNGb3JFdmVudCA9IGxpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnNbZXZlbnRdIHx8IFtdOwogICAgICAgIC8vIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBsaXN0ZW5lciBpc24ndCBhbHJlYWR5IHJlZ2lzdGVyZWQKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVyc0ZvckV2ZW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzdHIxID0gU3RyaW5nKGxpc3RlbmVyKTsKICAgICAgICAgICAgdmFyIHN0cjIgPSBTdHJpbmcobGlzdGVuZXJzRm9yRXZlbnRbaV0pOwogICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IGxpc3RlbmVyc0ZvckV2ZW50W2ldIHx8IHN0cjEgPT09IHN0cjIpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJsaXN0ZW5lciAiICsgc3RyMSArICIgaXMgYWxyZWFkeSByZWdpc3RlcmVkIGZvciBldmVudCAiICsgZXZlbnQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGxpc3RlbmVyc0ZvckV2ZW50LnB1c2gobGlzdGVuZXIpOwogICAgfTsKCiAgICBtcmFpZC5jcmVhdGVDYWxlbmRhckV2ZW50ID0gZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHsKICAgICAgICBsb2cuaSgibXJhaWQuY3JlYXRlQ2FsZW5kYXJFdmVudCB3aXRoICIgKyBwYXJhbWV0ZXJzKTsKICAgICAgICBpZiAoc3VwcG9ydGVkRmVhdHVyZXNbbXJhaWQuU1VQUE9SVEVEX0ZFQVRVUkVTLkNBTEVOREFSXSkgewogICAgICAgICAgICBjYWxsTmF0aXZlKCJjcmVhdGVDYWxlbmRhckV2ZW50P2V2ZW50SlNPTj0iICsgSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVycykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZy5lKCJjcmVhdGVDYWxlbmRhckV2ZW50IGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgICAgICB9CiAgICB9OwoKICAgIG1yYWlkLmNsb3NlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5jbG9zZSIpOwogICAgICAgIGlmIChzdGF0ZSA9PT0gU1RBVEVTLkxPQURJTkcKICAgICAgICAgICAgfHwgKHN0YXRlID09PSBTVEFURVMuREVGQVVMVCAmJiBwbGFjZW1lbnRUeXBlID09PSBQTEFDRU1FTlRfVFlQRVMuSU5MSU5FKQogICAgICAgICAgICB8fCBzdGF0ZSA9PT0gU1RBVEVTLkhJRERFTikgewogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY2FsbE5hdGl2ZSgiY2xvc2UiKTsKICAgIH07CgogICAgbXJhaWQuZXhwYW5kID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBsb2cuaSgibXJhaWQuZXhwYW5kICgxLXBhcnQpIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmV4cGFuZCAiICsgdXJsKTsKICAgICAgICB9CiAgICAgICAgLy8gVGhlIG9ubHkgdGltZSBpdCBpcyB2YWxpZCB0byBjYWxsIGV4cGFuZCBpcyB3aGVuIHRoZSBhZCBpcwogICAgICAgIC8vIGEgYmFubmVyIGN1cnJlbnRseSBpbiBlaXRoZXIgZGVmYXVsdCBvciByZXNpemVkIHN0YXRlLgogICAgICAgIGlmIChwbGFjZW1lbnRUeXBlICE9PSBQTEFDRU1FTlRfVFlQRVMuSU5MSU5FCiAgICAgICAgICAgIHx8IChzdGF0ZSAhPT0gU1RBVEVTLkRFRkFVTFQgJiYgc3RhdGUgIT09IFNUQVRFUy5SRVNJWkVEKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjYWxsTmF0aXZlKCJleHBhbmQiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWxsTmF0aXZlKCJleHBhbmQ/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKSk7CiAgICAgICAgfQogICAgfTsKCiAgICBtcmFpZC5nZXRDdXJyZW50UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLmdldEN1cnJlbnRQb3NpdGlvbiIpOwogICAgICAgIHJldHVybiBjdXJyZW50UG9zaXRpb247CiAgICB9OwoKICAgIG1yYWlkLmdldERlZmF1bHRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2cuaSgibXJhaWQuZ2V0RGVmYXVsdFBvc2l0aW9uIik7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRQb3NpdGlvbjsKICAgIH07CgogICAgbXJhaWQuZ2V0RXhwYW5kUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2cuaSgibXJhaWQuZ2V0RXhwYW5kUHJvcGVydGllcyIpOwogICAgICAgIHJldHVybiBleHBhbmRQcm9wZXJ0aWVzOwogICAgfTsKCiAgICBtcmFpZC5nZXRNYXhTaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5nZXRNYXhTaXplIik7CiAgICAgICAgcmV0dXJuIG1heFNpemU7CiAgICB9OwoKICAgIG1yYWlkLmdldE9yaWVudGF0aW9uUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2cuaSgibXJhaWQuZ2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzIik7CiAgICAgICAgcmV0dXJuIG9yaWVudGF0aW9uUHJvcGVydGllczsKICAgIH07CgogICAgbXJhaWQuZ2V0Q3VycmVudEFwcE9yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5nZXRDdXJyZW50QXBwT3JpZW50YXRpb24iKTsKICAgICAgICByZXR1cm4gY3VycmVudEFwcE9yaWVudGF0aW9uOwogICAgfTsKCiAgICBtcmFpZC5nZXRQbGFjZW1lbnRUeXBlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5nZXRQbGFjZW1lbnRUeXBlIik7CiAgICAgICAgcmV0dXJuIHBsYWNlbWVudFR5cGU7CiAgICB9OwoKICAgIG1yYWlkLmdldFJlc2l6ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLmdldFJlc2l6ZVByb3BlcnRpZXMiKTsKICAgICAgICByZXR1cm4gcmVzaXplUHJvcGVydGllczsKICAgIH07CgogICAgbXJhaWQuZ2V0U2NyZWVuU2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2cuaSgibXJhaWQuZ2V0U2NyZWVuU2l6ZSIpOwogICAgICAgIHJldHVybiBzY3JlZW5TaXplOwogICAgfTsKCiAgICBtcmFpZC5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2cuaSgibXJhaWQuZ2V0U3RhdGUiKTsKICAgICAgICByZXR1cm4gc3RhdGU7CiAgICB9OwoKICAgIG1yYWlkLmdldFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLmdldFZlcnNpb24iKTsKICAgICAgICByZXR1cm4gVkVSU0lPTjsKICAgIH07CgogICAgbXJhaWQuZ2V0TG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLmdldExvY2F0aW9uIik7CiAgICAgICAgcmV0dXJuIGxvY2F0aW9uOwogICAgfTsKCiAgICBtcmFpZC5pc1ZpZXdhYmxlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5pc1ZpZXdhYmxlIik7CiAgICAgICAgcmV0dXJuIGlzVmlld2FibGU7CiAgICB9OwoKICAgIG1yYWlkLm9wZW4gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLm9wZW4gIiArIHVybCk7CiAgICAgICAgY2FsbE5hdGl2ZSgib3Blbj91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh1cmwpKTsKICAgIH07CgogICAgbXJhaWQucGxheVZpZGVvID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5wbGF5VmlkZW8gIiArIHVybCk7CiAgICAgICAgY2FsbE5hdGl2ZSgicGxheVZpZGVvP3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHVybCkpOwogICAgfTsKCiAgICBtcmFpZC5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50LCBsaXN0ZW5lcikgewogICAgICAgIGxvZy5pKCJtcmFpZC5yZW1vdmVFdmVudExpc3RlbmVyICIgKyBldmVudCArICIgOiAiICsgU3RyaW5nKGxpc3RlbmVyKSk7CiAgICAgICAgaWYgKCFldmVudCkgewogICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiRXZlbnQgaXMgcmVxdWlyZWQuIiwgInJlbW92ZUV2ZW50TGlzdGVuZXIiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIWNvbnRhaW5zKGV2ZW50LCBFVkVOVFMpKSB7CiAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KCJVbmtub3duIE1SQUlEIGV2ZW50OiAiICsgZXZlbnQsICJyZW1vdmVFdmVudExpc3RlbmVyIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHsKICAgICAgICAgICAgaWYgKGxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXJzRm9yRXZlbnQgPSBsaXN0ZW5lcnNbZXZlbnRdOwogICAgICAgICAgICAgICAgLy8gdHJ5IHRvIGZpbmQgdGhlIGdpdmVuIGxpc3RlbmVyCiAgICAgICAgICAgICAgICB2YXIgbGVuID0gbGlzdGVuZXJzRm9yRXZlbnQubGVuZ3RoOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciByZWdpc3RlcmVkTGlzdGVuZXIgPSBsaXN0ZW5lcnNGb3JFdmVudFtpXTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RyMSA9IFN0cmluZyhsaXN0ZW5lcik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cjIgPSBTdHJpbmcocmVnaXN0ZXJlZExpc3RlbmVyKTsKICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IHJlZ2lzdGVyZWRMaXN0ZW5lciB8fCBzdHIxID09PSBzdHIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc0ZvckV2ZW50LnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGkgPT09IGxlbikgewogICAgICAgICAgICAgICAgICAgIGxvZy5pKCJsaXN0ZW5lciAiICsgc3RyMSArICIgbm90IGZvdW5kIGZvciBldmVudCAiICsgZXZlbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyc0ZvckV2ZW50Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbZXZlbnRdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gbm8gbGlzdGVuZXIgdG8gcmVtb3ZlIHdhcyBwcm92aWRlZCwgc28gcmVtb3ZlIGFsbCBsaXN0ZW5lcnMKICAgICAgICAgICAgICAgIC8vIGZvciBnaXZlbiBldmVudAogICAgICAgICAgICAgICAgZGVsZXRlIGxpc3RlbmVyc1tldmVudF07CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsb2cuaSgibm8gbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGV2ZW50ICIgKyBldmVudCk7CiAgICAgICAgfQogICAgfTsKCiAgICBtcmFpZC5yZXNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLnJlc2l6ZSIpOwogICAgICAgIC8vIFRoZSBvbmx5IHRpbWUgaXQgaXMgdmFsaWQgdG8gY2FsbCByZXNpemUgaXMgd2hlbiB0aGUgYWQgaXMKICAgICAgICAvLyBhIGJhbm5lciBjdXJyZW50bHkgaW4gZWl0aGVyIGRlZmF1bHQgb3IgcmVzaXplZCBzdGF0ZS4KICAgICAgICAvLyBUcmlnZ2VyIGFuIGVycm9yIGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIGV4cGFuZGVkLgogICAgICAgIGlmIChwbGFjZW1lbnRUeXBlID09PSBQTEFDRU1FTlRfVFlQRVMuSU5URVJTVElUSUFMIHx8IHN0YXRlID09PSBTVEFURVMuTE9BRElORyB8fCBzdGF0ZSA9PT0gU1RBVEVTLkhJRERFTikgewogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YXRlID09PSBTVEFURVMuRVhQQU5ERUQpIHsKICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoIm1yYWlkLnJlc2l6ZSBjYWxsZWQgd2hlbiBhZCBpcyBpbiBleHBhbmRlZCBzdGF0ZSIsICJtcmFpZC5yZXNpemUiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIWlzUmVzaXplUmVhZHkpIHsKICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoIm1yYWlkLnJlc2l6ZSBpcyBub3QgcmVhZHkgdG8gYmUgY2FsbGVkIiwgIm1yYWlkLnJlc2l6ZSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNhbGxOYXRpdmUoInJlc2l6ZSIpOwogICAgfTsKCiAgICBtcmFpZC5zZXRFeHBhbmRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc2V0RXhwYW5kUHJvcGVydGllcyIpOwoKICAgICAgICBpZiAoIXZhbGlkYXRlKHByb3BlcnRpZXMsICJzZXRFeHBhbmRQcm9wZXJ0aWVzIikpIHsKICAgICAgICAgICAgbG9nLmUoImZhaWxlZCB2YWxpZGF0aW9uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBvbGRVc2VDdXN0b21DbG9zZSA9IGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2U7CgogICAgICAgIC8vIGV4cGFuZFByb3BlcnRpZXMgY29udGFpbnMgMyByZWFkLXdyaXRlIHByb3BlcnRpZXM6IHdpZHRoLCBoZWlnaHQsIGFuZCB1c2VDdXN0b21DbG9zZTsKICAgICAgICAvLyB0aGUgaXNNb2RhbCBwcm9wZXJ0eSBpcyByZWFkLW9ubHkKICAgICAgICB2YXIgcndQcm9wcyA9IFsid2lkdGgiLCAiaGVpZ2h0IiwgInVzZUN1c3RvbUNsb3NlIl07CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByd1Byb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBwcm9wbmFtZSA9IHJ3UHJvcHNbaV07CiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BuYW1lKSkgewogICAgICAgICAgICAgICAgZXhwYW5kUHJvcGVydGllc1twcm9wbmFtZV0gPSBwcm9wZXJ0aWVzW3Byb3BuYW1lXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gSW4gTVJBSUQgdjIuMCwgYWxsIGV4cGFuZGVkIGFkcyBieSBkZWZpbml0aW9uIGNvdmVyIHRoZSBlbnRpcmUgc2NyZWVuLAogICAgICAgIC8vIHNvIHRoZSBvbmx5IHByb3BlcnR5IHRoYXQgdGhlIG5hdGl2ZSBzaWRlIGhhcyB0byBrbm93IGFib3V0IGlzIHVzZUN1c3RvbUNsb3NlLgogICAgICAgIC8vIChUaGF0IGlzLCB0aGUgd2lkdGggYW5kIGhlaWdodCBwcm9wZXJ0aWVzIGFyZSBub3QgbmVlZGVkIGJ5IHRoZSBuYXRpdmUgY29kZS4pCiAgICAgICAgaWYgKGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2UgIT09IG9sZFVzZUN1c3RvbUNsb3NlKSB7CiAgICAgICAgICAgIGNhbGxOYXRpdmUoInVzZUN1c3RvbUNsb3NlP3VzZUN1c3RvbUNsb3NlPSIgKyBleHBhbmRQcm9wZXJ0aWVzLnVzZUN1c3RvbUNsb3NlKTsKICAgICAgICB9CgogICAgICAgIGlzRXhwYW5kUHJvcGVydGllc1NldCA9IHRydWU7CiAgICB9OwoKICAgIG1yYWlkLnNldE9yaWVudGF0aW9uUHJvcGVydGllcyA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLnNldE9yaWVudGF0aW9uUHJvcGVydGllcyIpOwoKICAgICAgICBpZiAoIXZhbGlkYXRlKHByb3BlcnRpZXMsICJzZXRPcmllbnRhdGlvblByb3BlcnRpZXMiKSkgewogICAgICAgICAgICBsb2cuZSgiZmFpbGVkIHZhbGlkYXRpb24iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5ld09yaWVudGF0aW9uUHJvcGVydGllcyA9IHt9OwogICAgICAgIG5ld09yaWVudGF0aW9uUHJvcGVydGllcy5hbGxvd09yaWVudGF0aW9uQ2hhbmdlID0gb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmFsbG93T3JpZW50YXRpb25DaGFuZ2UsCiAgICAgICAgICAgIG5ld09yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uID0gb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmZvcmNlT3JpZW50YXRpb247CgogICAgICAgIC8vIG9yaWVudGF0aW9uUHJvcGVydGllcyBjb250YWlucyAyIHJlYWQtd3JpdGUgcHJvcGVydGllczoKICAgICAgICAvLyBhbGxvd09yaWVudGF0aW9uQ2hhbmdlIGFuZCBmb3JjZU9yaWVudGF0aW9uCiAgICAgICAgdmFyIHJ3UHJvcHMgPSBbImFsbG93T3JpZW50YXRpb25DaGFuZ2UiLCAiZm9yY2VPcmllbnRhdGlvbiJdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcndQcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgcHJvcG5hbWUgPSByd1Byb3BzW2ldOwogICAgICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wbmFtZSkpIHsKICAgICAgICAgICAgICAgIG5ld09yaWVudGF0aW9uUHJvcGVydGllc1twcm9wbmFtZV0gPSBwcm9wZXJ0aWVzW3Byb3BuYW1lXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gU2V0dGluZyBhbGxvd09yaWVudGF0aW9uQ2hhbmdlIHRvIHRydWUgd2hpbGUgc2V0dGluZyBmb3JjZU9yaWVudGF0aW9uCiAgICAgICAgLy8gdG8gZWl0aGVyIHBvcnRyYWl0IG9yIGxhbmRzY2FwZQogICAgICAgIC8vIGlzIGNvbnNpZGVyZWQgYW4gZXJyb3IgY29uZGl0aW9uLgogICAgICAgIGlmIChuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZQogICAgICAgICAgICAmJiBuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuZm9yY2VPcmllbnRhdGlvbiAhPT0gbXJhaWQuT1JJRU5UQVRJT05fUFJPUEVSVElFU19GT1JDRV9PUklFTlRBVElPTi5OT05FKSB7CiAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KAogICAgICAgICAgICAgICAgImFsbG93T3JpZW50YXRpb25DaGFuZ2UgaXMgdHJ1ZSBidXQgZm9yY2VPcmllbnRhdGlvbiBpcyAiCiAgICAgICAgICAgICAgICArIG5ld09yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uLAogICAgICAgICAgICAgICAgInNldE9yaWVudGF0aW9uUHJvcGVydGllcyIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBvcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZSA9IG5ld09yaWVudGF0aW9uUHJvcGVydGllcy5hbGxvd09yaWVudGF0aW9uQ2hhbmdlOwogICAgICAgIG9yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uID0gbmV3T3JpZW50YXRpb25Qcm9wZXJ0aWVzLmZvcmNlT3JpZW50YXRpb247CgogICAgICAgIHZhciBwYXJhbXMgPSAiYWxsb3dPcmllbnRhdGlvbkNoYW5nZT0iCiAgICAgICAgICAgICsgb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmFsbG93T3JpZW50YXRpb25DaGFuZ2UKICAgICAgICAgICAgKyAiJmZvcmNlT3JpZW50YXRpb249IiArIG9yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uOwoKICAgICAgICBjYWxsTmF0aXZlKCJzZXRPcmllbnRhdGlvblByb3BlcnRpZXM/IiArIHBhcmFtcyk7CiAgICB9OwoKICAgIG1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAocHJvcGVydGllcykgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRSZXNpemVQcm9wZXJ0aWVzIik7CgogICAgICAgIGlzUmVzaXplUmVhZHkgPSBmYWxzZTsKCiAgICAgICAgLy8gcmVzaXplUHJvcGVydGllcyBjb250YWlucyA2IHJlYWQtd3JpdGUgcHJvcGVydGllczoKICAgICAgICAvLyB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYLCBvZmZzZXRZLCBjdXN0b21DbG9zZVBvc2l0aW9uLCBhbGxvd09mZnNjcmVlbgoKICAgICAgICAvLyBUaGUgcHJvcGVydGllcyBvYmplY3QgcGFzc2VkIGludG8gdGhpcyBmdW5jdGlvbiBtdXN0IGNvbnRhaW4gd2lkdGgsIGhlaWdodCwgb2Zmc2V0WCwgb2Zmc2V0WS4KICAgICAgICAvLyBUaGUgcmVtYWluaW5nIHR3byBwcm9wZXJ0aWVzIGFyZSBvcHRpb25hbC4KICAgICAgICB2YXIgcmVxdWlyZWRQcm9wcyA9IFsid2lkdGgiLCAiaGVpZ2h0IiwgIm9mZnNldFgiLCAib2Zmc2V0WSJdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVxdWlyZWRQcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgcHJvcG5hbWUgPSByZXF1aXJlZFByb3BzW2ldOwogICAgICAgICAgICBpZiAoIXByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcG5hbWUpKSB7CiAgICAgICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgKICAgICAgICAgICAgICAgICAgICAicmVxdWlyZWQgcHJvcGVydHkgIiArIHByb3BuYW1lICsgIiBpcyBtaXNzaW5nIiwKICAgICAgICAgICAgICAgICAgICAibXJhaWQuc2V0UmVzaXplUHJvcGVydGllcyIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIXZhbGlkYXRlKHByb3BlcnRpZXMsICJzZXRSZXNpemVQcm9wZXJ0aWVzIikpIHsKICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoImZhaWxlZCB2YWxpZGF0aW9uIiwgIm1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGFkanVzdG1lbnRzID0geyJ4IjogMCwgInkiOiAwfTsKCiAgICAgICAgdmFyIGFsbG93T2Zmc2NyZWVuID0gcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eSgiYWxsb3dPZmZzY3JlZW4iKSA/IHByb3BlcnRpZXMuYWxsb3dPZmZzY3JlZW4gOiByZXNpemVQcm9wZXJ0aWVzLmFsbG93T2Zmc2NyZWVuOwogICAgICAgIGlmICghYWxsb3dPZmZzY3JlZW4pIHsKICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMud2lkdGggPiBtYXhTaXplLndpZHRoIHx8IHByb3BlcnRpZXMuaGVpZ2h0ID4gbWF4U2l6ZS5oZWlnaHQpIHsKICAgICAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KCJyZXNpemUgd2lkdGggb3IgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWF4U2l6ZSB3aWR0aCBvciBoZWlnaHQiLCAibXJhaWQuc2V0UmVzaXplUHJvcGVydGllcyIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFkanVzdG1lbnRzID0gZml0UmVzaXplVmlld09uU2NyZWVuKHByb3BlcnRpZXMpOwogICAgICAgIH0gZWxzZSBpZiAoIWlzQ2xvc2VSZWdpb25PblNjcmVlbihwcm9wZXJ0aWVzKSkgewogICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiY2xvc2UgZXZlbnQgcmVnaW9uIHdpbGwgbm90IGFwcGVhciBlbnRpcmVseSBvbnNjcmVlbiIsICJtcmFpZC5zZXRSZXNpemVQcm9wZXJ0aWVzIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciByd1Byb3BzID0gWyJ3aWR0aCIsICJoZWlnaHQiLCAib2Zmc2V0WCIsICJvZmZzZXRZIiwgImN1c3RvbUNsb3NlUG9zaXRpb24iLCAiYWxsb3dPZmZzY3JlZW4iXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ3UHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHByb3BuYW1lID0gcndQcm9wc1tpXTsKICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcG5hbWUpKSB7CiAgICAgICAgICAgICAgICByZXNpemVQcm9wZXJ0aWVzW3Byb3BuYW1lXSA9IHByb3BlcnRpZXNbcHJvcG5hbWVdOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgcGFyYW1zID0KICAgICAgICAgICAgIndpZHRoPSIgKyByZXNpemVQcm9wZXJ0aWVzLndpZHRoICsKICAgICAgICAgICAgIiZoZWlnaHQ9IiArIHJlc2l6ZVByb3BlcnRpZXMuaGVpZ2h0ICsKICAgICAgICAgICAgIiZvZmZzZXRYPSIgKyAocmVzaXplUHJvcGVydGllcy5vZmZzZXRYICsgYWRqdXN0bWVudHMueCkgKwogICAgICAgICAgICAiJm9mZnNldFk9IiArIChyZXNpemVQcm9wZXJ0aWVzLm9mZnNldFkgKyBhZGp1c3RtZW50cy55KSArCiAgICAgICAgICAgICImY3VzdG9tQ2xvc2VQb3NpdGlvbj0iICsgcmVzaXplUHJvcGVydGllcy5jdXN0b21DbG9zZVBvc2l0aW9uICsKICAgICAgICAgICAgIiZhbGxvd09mZnNjcmVlbj0iICsgcmVzaXplUHJvcGVydGllcy5hbGxvd09mZnNjcmVlbjsKCiAgICAgICAgY2FsbE5hdGl2ZSgic2V0UmVzaXplUHJvcGVydGllcz8iICsgcGFyYW1zKTsKCiAgICAgICAgaXNSZXNpemVSZWFkeSA9IHRydWU7CiAgICB9OwoKICAgIG1yYWlkLnN0b3JlUGljdHVyZSA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc3RvcmVQaWN0dXJlICIgKyB1cmwpOwogICAgICAgIGlmIChzdXBwb3J0ZWRGZWF0dXJlc1ttcmFpZC5TVVBQT1JURURfRkVBVFVSRVMuU1RPUkVQSUNUVVJFXSkgewogICAgICAgICAgICBjYWxsTmF0aXZlKCJzdG9yZVBpY3R1cmU/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbG9nLmUoInN0b3JlUGljdHVyZSBpcyBub3Qgc3VwcG9ydGVkIik7CiAgICAgICAgfQogICAgfTsKCiAgICBtcmFpZC5zdXBwb3J0cyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLnN1cHBvcnRzICIgKyBmZWF0dXJlICsgIiAiICsgc3VwcG9ydGVkRmVhdHVyZXNbZmVhdHVyZV0pOwogICAgICAgIHZhciByZXR2YWwgPSBzdXBwb3J0ZWRGZWF0dXJlc1tmZWF0dXJlXTsKICAgICAgICBpZiAodHlwZW9mIHJldHZhbCA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcmV0dmFsID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXR2YWw7CiAgICB9OwoKCiAgICBtcmFpZC51c2VDdXN0b21DbG9zZSA9IGZ1bmN0aW9uIChpc0N1c3RvbUNsb3NlKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLnVzZUN1c3RvbUNsb3NlICIgKyBpc0N1c3RvbUNsb3NlKTsKICAgICAgICBpZiAoZXhwYW5kUHJvcGVydGllcy51c2VDdXN0b21DbG9zZSAhPT0gaXNDdXN0b21DbG9zZSkgewogICAgICAgICAgICBleHBhbmRQcm9wZXJ0aWVzLnVzZUN1c3RvbUNsb3NlID0gaXNDdXN0b21DbG9zZTsKICAgICAgICAgICAgY2FsbE5hdGl2ZSgidXNlQ3VzdG9tQ2xvc2U/dXNlQ3VzdG9tQ2xvc2U9IgogICAgICAgICAgICAgICAgKyBleHBhbmRQcm9wZXJ0aWVzLnVzZUN1c3RvbUNsb3NlKTsKICAgICAgICB9CiAgICB9OwoKICAgIG1yYWlkLnVubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIH07CgogICAgbXJhaWQuaW5pdFZwYWlkID0gZnVuY3Rpb24gKHZwYWlkT2JqZWN0KSB7CiAgICAgICAgdnBhaWQgPSB2cGFpZE9iamVjdDsKICAgIH07CgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICogaGVscGVyIG1ldGhvZHMgY2FsbGVkIGJ5IFNESwogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgIC8vIHNldHRlcnMgdG8gY2hhbmdlIHN0YXRlCiAgICBtcmFpZC5zZXRDdXJyZW50UG9zaXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRDdXJyZW50UG9zaXRpb24gIiArIHggKyAiLCIgKyB5ICsgIiwiICsgd2lkdGggKyAiLCIgKyBoZWlnaHQpOwoKICAgICAgICB2YXIgcHJldmlvdXNTaXplID0ge307CiAgICAgICAgcHJldmlvdXNTaXplLndpZHRoID0gY3VycmVudFBvc2l0aW9uLndpZHRoOwogICAgICAgIHByZXZpb3VzU2l6ZS5oZWlnaHQgPSBjdXJyZW50UG9zaXRpb24uaGVpZ2h0OwogICAgICAgIGxvZy5pKCJwcmV2aW91c1NpemUgIiArIHByZXZpb3VzU2l6ZS53aWR0aCArICIsIiArIHByZXZpb3VzU2l6ZS5oZWlnaHQpOwoKICAgICAgICBjdXJyZW50UG9zaXRpb24ueCA9IHg7CiAgICAgICAgY3VycmVudFBvc2l0aW9uLnkgPSB5OwogICAgICAgIGN1cnJlbnRQb3NpdGlvbi53aWR0aCA9IHdpZHRoOwogICAgICAgIGN1cnJlbnRQb3NpdGlvbi5oZWlnaHQgPSBoZWlnaHQ7CgogICAgICAgIGlmICh3aWR0aCAhPT0gcHJldmlvdXNTaXplLndpZHRoIHx8IGhlaWdodCAhPT0gcHJldmlvdXNTaXplLmhlaWdodCkgewogICAgICAgICAgICBtcmFpZC5maXJlU2l6ZUNoYW5nZUV2ZW50KHdpZHRoLCBoZWlnaHQpOwogICAgICAgIH0KICAgIH07CgogICAgbXJhaWQuc2V0RGVmYXVsdFBvc2l0aW9uID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc2V0RGVmYXVsdFBvc2l0aW9uICIgKyB4ICsgIiwiICsgeSArICIsIiArIHdpZHRoICsgIiwiICsgaGVpZ2h0KTsKICAgICAgICBkZWZhdWx0UG9zaXRpb24ueCA9IHg7CiAgICAgICAgZGVmYXVsdFBvc2l0aW9uLnkgPSB5OwogICAgICAgIGRlZmF1bHRQb3NpdGlvbi53aWR0aCA9IHdpZHRoOwogICAgICAgIGRlZmF1bHRQb3NpdGlvbi5oZWlnaHQgPSBoZWlnaHQ7CiAgICB9OwoKICAgIG1yYWlkLnNldEV4cGFuZFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRFeHBhbmRTaXplICIgKyB3aWR0aCArICJ4IiArIGhlaWdodCk7CiAgICAgICAgZXhwYW5kUHJvcGVydGllcy53aWR0aCA9IHdpZHRoOwogICAgICAgIGV4cGFuZFByb3BlcnRpZXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgfTsKCiAgICBtcmFpZC5zZXRNYXhTaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc2V0TWF4U2l6ZSAiICsgd2lkdGggKyAieCIgKyBoZWlnaHQpOwogICAgICAgIG1heFNpemUud2lkdGggPSB3aWR0aDsKICAgICAgICBtYXhTaXplLmhlaWdodCA9IGhlaWdodDsKICAgIH07CgogICAgbXJhaWQuc2V0UGxhY2VtZW50VHlwZSA9IGZ1bmN0aW9uIChwdCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRQbGFjZW1lbnRUeXBlICIgKyBwdCk7CiAgICAgICAgcGxhY2VtZW50VHlwZSA9IHB0OwogICAgfTsKCiAgICBtcmFpZC5zZXRTY3JlZW5TaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc2V0U2NyZWVuU2l6ZSAiICsgd2lkdGggKyAieCIgKyBoZWlnaHQpOwogICAgICAgIHNjcmVlblNpemUud2lkdGggPSB3aWR0aDsKICAgICAgICBzY3JlZW5TaXplLmhlaWdodCA9IGhlaWdodDsKICAgICAgICB1cGRhdGVDcmVhdGl2ZVNpemUod2lkdGgsIGhlaWdodCk7CiAgICAgICAgaWYgKCFpc0V4cGFuZFByb3BlcnRpZXNTZXQpIHsKICAgICAgICAgICAgZXhwYW5kUHJvcGVydGllcy53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICBleHBhbmRQcm9wZXJ0aWVzLmhlaWdodCA9IGhlaWdodDsKICAgICAgICB9CiAgICB9OwoKICAgIG1yYWlkLnNldFN1cHBvcnRzID0gZnVuY3Rpb24gKGZlYXR1cmUsIHN1cHBvcnRlZCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRTdXBwb3J0cyAiICsgZmVhdHVyZSArICIgIiArIHN1cHBvcnRlZCk7CiAgICAgICAgc3VwcG9ydGVkRmVhdHVyZXNbZmVhdHVyZV0gPSBzdXBwb3J0ZWQ7CiAgICB9OwoKICAgIG1yYWlkLnNldFNka1ZlcnNpb24gPSBmdW5jdGlvbiAoc2RrVmVyc2lvbikgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRTZGtWZXJzaW9uICIgKyBzZGtWZXJzaW9uKTsKICAgICAgICBpZiAoc2RrVmVyc2lvbiAmJiBzZGtWZXJzaW9uICE9PSAiIikgewogICAgICAgICAgICBtcmFpZEVudi5zZGtWZXJzaW9uID0gc2RrVmVyc2lvbjsKICAgICAgICB9CiAgICB9OwoKICAgIG1yYWlkLnNldEFwcElkID0gZnVuY3Rpb24gKGJ1bmRsZU5hbWUpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc2V0QXBwSWQgIiArIGJ1bmRsZU5hbWUpOwogICAgICAgIGlmIChidW5kbGVOYW1lICYmIGJ1bmRsZU5hbWUgIT09ICIiKSB7CiAgICAgICAgICAgIG1yYWlkRW52LmFwcElkID0gYnVuZGxlTmFtZTsKICAgICAgICB9CiAgICB9OwoKICAgIG1yYWlkLnNldElmYSA9IGZ1bmN0aW9uIChpZmEpIHsKICAgICAgICBsb2cuaSgibXJhaWQuc2V0SWZhICIgKyBpZmEpOwogICAgICAgIGlmIChpZmEgJiYgaWZhICE9PSAiIikgewogICAgICAgICAgICBtcmFpZEVudi5zZGtWZXJzaW9uID0gaWZhOwogICAgICAgIH0KICAgIH07CgogICAgbXJhaWQuc2V0TGltaXRBZFRyYWNraW5nID0gZnVuY3Rpb24gKGxpbWl0QWRUcmFja2luZykgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRMaW1pdEFkVHJhY2tpbmcgIiArIGxpbWl0QWRUcmFja2luZyk7CiAgICAgICAgbXJhaWRFbnYubGltaXRBZFRyYWNraW5nID0gbGltaXRBZFRyYWNraW5nOwogICAgfTsKCiAgICBtcmFpZC5zZXRDb3BwYSA9IGZ1bmN0aW9uIChjb3BwYSkgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRDb3BwYSAiICsgY29wcGEpOwogICAgICAgIG1yYWlkRW52LmNvcHBhID0gY29wcGE7CiAgICB9OwoKICAgIG1yYWlkLnNldEN1cnJlbnRBcHBPcmllbnRhdGlvbiA9IGZ1bmN0aW9uIChuZXdBcHBPcmllbnRhdGlvbikgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRDdXJyZW50QXBwT3JpZW50YXRpb24gIiArIG5ld0FwcE9yaWVudGF0aW9uKTsKICAgICAgICBpZiAobmV3QXBwT3JpZW50YXRpb24pIHsKICAgICAgICAgICAgY3VycmVudEFwcE9yaWVudGF0aW9uID0gbmV3QXBwT3JpZW50YXRpb247CiAgICAgICAgfQogICAgfTsKCiAgICBtcmFpZC5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChuZXdMb2NhdGlvbikgewogICAgICAgIGxvZy5pKCJtcmFpZC5zZXRMb2NhdGlvbiAiICsgbmV3TG9jYXRpb24pOwogICAgICAgIGlmIChuZXdMb2NhdGlvbikgewogICAgICAgICAgICBsb2NhdGlvbiA9IG5ld0xvY2F0aW9uOwogICAgICAgIH0KICAgIH07CgogICAgLy8gbWV0aG9kcyB0byBmaXJlIGV2ZW50cwoKICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGFjdGlvbikgewogICAgICAgIGxvZy5pKCJtcmFpZC5maXJlRXJyb3JFdmVudCAiICsgbWVzc2FnZSArICIgIiArIGFjdGlvbik7CiAgICAgICAgZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5FUlJPUiwgbWVzc2FnZSwgYWN0aW9uKTsKICAgIH07CgogICAgbXJhaWQuZmlyZVJlYWR5RXZlbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLmZpcmVSZWFkeUV2ZW50Iik7CiAgICAgICAgZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5SRUFEWSk7CiAgICB9OwoKICAgIG1yYWlkLmZpcmVTaXplQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkgewogICAgICAgIGxvZy5pKCJtcmFpZC5maXJlU2l6ZUNoYW5nZUV2ZW50ICIgKyB3aWR0aCArICJ4IiArIGhlaWdodCk7CiAgICAgICAgaWYgKHN0YXRlICE9PSBtcmFpZC5TVEFURVMuTE9BRElORykgewogICAgICAgICAgICBmaXJlRXZlbnQobXJhaWQuRVZFTlRTLlNJWkVDSEFOR0UsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgIH0KICAgIH07CgogICAgbXJhaWQuZmlyZVN0YXRlQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAobmV3U3RhdGUpIHsKICAgICAgICBsb2cuaSgibXJhaWQuZmlyZVN0YXRlQ2hhbmdlRXZlbnQgIiArIG5ld1N0YXRlKTsKICAgICAgICBpZiAoc3RhdGUgIT09IG5ld1N0YXRlKSB7CiAgICAgICAgICAgIHN0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuU1RBVEVDSEFOR0UsIHN0YXRlKTsKICAgICAgICB9CiAgICB9OwoKICAgIG1yYWlkLmZpcmVFeHBvc3VyZUNoYW5nZUV2ZW50ID0gZnVuY3Rpb24gKGV4cG9zZWRQZXJjZW50YWdlLCB2aXNpYmxlUmVjdGFuZ2xlLCBvY2NsdXNpb25SZWN0YW5nbGVzKSB7CiAgICAgICAgbG9nLmkoIm1yYWlkLmZpcmVFeHBvc3VyZUNoYW5nZUV2ZW50ICIgKyBleHBvc2VkUGVyY2VudGFnZSArICIgIiArIHZpc2libGVSZWN0YW5nbGUgKyAiICIgKyBvY2NsdXNpb25SZWN0YW5nbGVzKTsKICAgICAgICBpZiAoc3RhdGUgIT09IG1yYWlkLlNUQVRFUy5MT0FESU5HKSB7CiAgICAgICAgICAgIGV4cG9zdXJlLmV4cG9zZWRQZXJjZW50YWdlID0gZXhwb3NlZFBlcmNlbnRhZ2U7CiAgICAgICAgICAgIGV4cG9zdXJlLnZpc2libGVSZWN0YW5nbGUgPSB2aXNpYmxlUmVjdGFuZ2xlOwogICAgICAgICAgICBpZiAob2NjbHVzaW9uUmVjdGFuZ2xlcykgewogICAgICAgICAgICAgICAgaWYgKGV4cG9zdXJlLm9jY2x1c2lvblJlY3RhbmdsZXMpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9jY2x1c2lvblJlY3RhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3N1cmUub2NjbHVzaW9uUmVjdGFuZ2xlcy5wdXNoKG9jY2x1c2lvblJlY3RhbmdsZXNbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXhwb3N1cmUub2NjbHVzaW9uUmVjdGFuZ2xlcyA9IG9jY2x1c2lvblJlY3RhbmdsZXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGV4cG9zdXJlLm9jY2x1c2lvblJlY3RhbmdsZXMgPSBudWxsCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuRVhQT1NVUkVDSEFOR0UsIGV4cG9zZWRQZXJjZW50YWdlLCB2aXNpYmxlUmVjdGFuZ2xlLCBvY2NsdXNpb25SZWN0YW5nbGVzKTsKICAgICAgICAgICAgLyppZiAoZXhwb3NlZFBlcmNlbnRhZ2UgPiAwLjApIHsKICAgICAgICAgICAgICAgIGlzVmlld2FibGUgPSB0cnVlOwogICAgICAgICAgICAgICAgZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5WSUVXQUJMRUNIQU5HRSwgaXNWaWV3YWJsZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpc1ZpZXdhYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQobXJhaWQuRVZFTlRTLlZJRVdBQkxFQ0hBTkdFLCBpc1ZpZXdhYmxlKTsKICAgICAgICAgICAgfSovCiAgICAgICAgfQoKICAgIH07CgogICAgbXJhaWQuZmlyZUF1ZGlvVm9sdW1lQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAobmV3Vm9sdW1lUGVyY2VudGFnZSkgewogICAgICAgIGxvZy5pKCJtcmFpZC5maXJlQXVkaW9Wb2x1bWVDaGFuZ2VFdmVudCAiICsgbmV3Vm9sdW1lUGVyY2VudGFnZSk7CiAgICAgICAgaWYgKHZvbHVtZVBlcmNlbnRhZ2UgIT09IG5ld1ZvbHVtZVBlcmNlbnRhZ2UpIHsKICAgICAgICAgICAgdm9sdW1lUGVyY2VudGFnZSA9IG5ld1ZvbHVtZVBlcmNlbnRhZ2U7CiAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuQVVESU9WT0xVTUVDSEFOR0UsIHZvbHVtZVBlcmNlbnRhZ2UpOwogICAgICAgIH0KICAgIH07CgogICAgbXJhaWQuZmlyZVZpZXdhYmxlQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAobmV3SXNWaWV3YWJsZSkgewogICAgICAgIGxvZy5pKCJtcmFpZC5maXJlVmlld2FibGVDaGFuZ2VFdmVudCAiICsgbmV3SXNWaWV3YWJsZSk7CiAgICAgICAgaWYgKGlzVmlld2FibGUgIT09IG5ld0lzVmlld2FibGUpIHsKICAgICAgICAgICAgaXNWaWV3YWJsZSA9IG5ld0lzVmlld2FibGU7CiAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuVklFV0FCTEVDSEFOR0UsIGlzVmlld2FibGUpOwogICAgICAgIH0KICAgIH07CgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICogaW50ZXJuYWwgaGVscGVyIG1ldGhvZHMKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICBmdW5jdGlvbiBjYWxsTmF0aXZlKGNvbW1hbmQpIHsKICAgICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiSUZSQU1FIik7CiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgic3JjIiwgIm1yYWlkOi8vIiArIGNvbW1hbmQpOwogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChpZnJhbWUpOwogICAgICAgIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgICAgICAgaWZyYW1lID0gbnVsbDsKICAgIH07CgogICAgZnVuY3Rpb24gZmlyZUV2ZW50KGV2ZW50KSB7CiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAgIGFyZ3Muc2hpZnQoKTsKICAgICAgICBsb2cuaSgiZmlyZUV2ZW50ICIgKyBldmVudCArICIgWyIgKyBhcmdzLnRvU3RyaW5nKCkgKyAiXSIpOwogICAgICAgIHZhciBldmVudExpc3RlbmVycyA9IChsaXN0ZW5lcnNbZXZlbnRdIHx8IFtdKS5zbGljZSgwKTsKICAgICAgICBpZiAoZXZlbnRMaXN0ZW5lcnMpIHsKICAgICAgICAgICAgbG9nLmkoZXZlbnRMaXN0ZW5lcnMubGVuZ3RoICsgIiBsaXN0ZW5lcihzKSBmb3VuZCBmb3IgIiArIGV2ZW50KTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudExpc3RlbmVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbG9nLmkoImZpcmluZyBsaXN0ZW5lciAiICsgaSArICIgZm9yICIgKyBldmVudCArICI6ICIgKyBldmVudExpc3RlbmVyc1tpXSk7CiAgICAgICAgICAgICAgICBldmVudExpc3RlbmVyc1tpXS5hcHBseShudWxsLCBhcmdzKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZy5pKCJubyBsaXN0ZW5lcnMgZm91bmQiKTsKICAgICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGNvbnRhaW5zKHZhbHVlLCBhcnJheSkgewogICAgICAgIGZvciAodmFyIGkgaW4gYXJyYXkpIHsKICAgICAgICAgICAgaWYgKGFycmF5W2ldID09PSB2YWx1ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKCiAgICAvLyBUaGUgYWN0aW9uIHBhcmFtZXRlciBpcyBhIHN0cmluZyB3aGljaCBpcyB0aGUgbmFtZSBvZiB0aGUgc2V0dGVyIGZ1bmN0aW9uCiAgICAvLyB3aGljaCBjYWxsZWQgdGhpcyBmdW5jdGlvbgogICAgLy8gKGluIG90aGVyIHdvcmRzLCBzZXRFeHBhbmRQcm9wZXRpZXMsIHNldE9yaWVudGF0aW9uUHJvcGVydGllcywgb3IKICAgIC8vIHNldFJlc2l6ZVByb3BlcnRpZXMpLgogICAgLy8gSXQgc2VydmVzIGJvdGggYXMgdGhlIGtleSB0byBnZXQgdGhlIHRoZSBhcHByb3ByaWF0ZSBzZXQgb2YgdmFsaWRhdGluZwogICAgLy8gZnVuY3Rpb25zIGZyb20gdGhlIGFsbFZhbGlkYXRvcnMgb2JqZWN0CiAgICAvLyBhcyB3ZWxsIGFzIHRoZSBhY3Rpb24gcGFyYW1ldGVyIG9mIGFueSBlcnJvciBldmVudCB0aGF0IG1heSBiZSB0aHJvd24uCiAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wZXJ0aWVzLCBhY3Rpb24pIHsKICAgICAgICB2YXIgcmV0dmFsID0gdHJ1ZTsKICAgICAgICB2YXIgdmFsaWRhdG9ycyA9IGFsbFZhbGlkYXRvcnNbYWN0aW9uXTsKICAgICAgICBmb3IgKHZhciBwcm9wIGluIHByb3BlcnRpZXMpIHsKICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9IHZhbGlkYXRvcnNbcHJvcF07CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHByb3BlcnRpZXNbcHJvcF07CiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IgJiYgIXZhbGlkYXRvcih2YWx1ZSkpIHsKICAgICAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KCJWYWx1ZSBvZiBwcm9wZXJ0eSAiICsgcHJvcCArICIgKCIgKyB2YWx1ZSArICIpIGlzIGludmFsaWQiLCAibXJhaWQuIiArIGFjdGlvbik7CiAgICAgICAgICAgICAgICByZXR2YWwgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0dmFsOwogICAgfTsKCiAgICB2YXIgYWxsVmFsaWRhdG9ycyA9IHsKICAgICAgICAic2V0RXhwYW5kUHJvcGVydGllcyI6IHsKICAgICAgICAgICAgLy8gSW4gTVJBSUQgMi4wLCB0aGUgb25seSBwcm9wZXJ0eSBpbiBleHBhbmRQcm9wZXJ0aWVzIHdlIGFjdHVhbGx5IGNhcmUgYWJvdXQgaXMgdXNlQ3VzdG9tQ2xvc2UuCiAgICAgICAgICAgIC8vIFN0aWxsLCB3ZSdsbCBkbyBhIGJhc2ljIHNhbml0eSBjaGVjayBvbiB0aGUgd2lkdGggYW5kIGhlaWdodCBwcm9wZXJ0aWVzLCB0b28uCiAgICAgICAgICAgICJ3aWR0aCI6IGZ1bmN0aW9uICh3aWR0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuICFpc05hTih3aWR0aCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJoZWlnaHQiOiBmdW5jdGlvbiAoaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKGhlaWdodCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJ1c2VDdXN0b21DbG9zZSI6IGZ1bmN0aW9uICh1c2VDdXN0b21DbG9zZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgdXNlQ3VzdG9tQ2xvc2UgPT09ICJib29sZWFuIik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICJzZXRPcmllbnRhdGlvblByb3BlcnRpZXMiOiB7CiAgICAgICAgICAgICJhbGxvd09yaWVudGF0aW9uQ2hhbmdlIjogZnVuY3Rpb24gKGFsbG93T3JpZW50YXRpb25DaGFuZ2UpIHsKICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGFsbG93T3JpZW50YXRpb25DaGFuZ2UgPT09ICJib29sZWFuIik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJmb3JjZU9yaWVudGF0aW9uIjogZnVuY3Rpb24gKGZvcmNlT3JpZW50YXRpb24pIHsKICAgICAgICAgICAgICAgIHZhciB2YWxpZFZhbHVlcyA9IFsicG9ydHJhaXQiLCAibGFuZHNjYXBlIiwgIm5vbmUiXTsKICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGZvcmNlT3JpZW50YXRpb24gPT09ICJzdHJpbmciICYmIHZhbGlkVmFsdWVzLmluZGV4T2YoZm9yY2VPcmllbnRhdGlvbikgIT09IC0xKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgInNldFJlc2l6ZVByb3BlcnRpZXMiOiB7CiAgICAgICAgICAgICJ3aWR0aCI6IGZ1bmN0aW9uICh3aWR0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuICFpc05hTih3aWR0aCkgJiYgNTAgPD0gd2lkdGg7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJoZWlnaHQiOiBmdW5jdGlvbiAoaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKGhlaWdodCkgJiYgNTAgPD0gaGVpZ2h0OwogICAgICAgICAgICB9LAogICAgICAgICAgICAib2Zmc2V0WCI6IGZ1bmN0aW9uIChvZmZzZXRYKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKG9mZnNldFgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAib2Zmc2V0WSI6IGZ1bmN0aW9uIChvZmZzZXRZKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKG9mZnNldFkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAiY3VzdG9tQ2xvc2VQb3NpdGlvbiI6IGZ1bmN0aW9uIChjdXN0b21DbG9zZVBvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsaWRQb3NpdGlvbnMgPSBbInRvcC1sZWZ0IiwgInRvcC1jZW50ZXIiLCAidG9wLXJpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAiYm90dG9tLWxlZnQiLCAiYm90dG9tLWNlbnRlciIsICJib3R0b20tcmlnaHQiXTsKICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGN1c3RvbUNsb3NlUG9zaXRpb24gPT09ICJzdHJpbmciICYmIHZhbGlkUG9zaXRpb25zLmluZGV4T2YoY3VzdG9tQ2xvc2VQb3NpdGlvbikgIT09IC0xKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImFsbG93T2Zmc2NyZWVuIjogZnVuY3Rpb24gKGFsbG93T2Zmc2NyZWVuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBhbGxvd09mZnNjcmVlbiA9PT0gImJvb2xlYW4iKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gaXNDbG9zZVJlZ2lvbk9uU2NyZWVuKHByb3BlcnRpZXMpIHsKICAgICAgICBsb2cuZCgiaXNDbG9zZVJlZ2lvbk9uU2NyZWVuIik7CiAgICAgICAgbG9nLmQoImRlZmF1bHRQb3NpdGlvbiAiICsgZGVmYXVsdFBvc2l0aW9uLnggKyAiICIgKyBkZWZhdWx0UG9zaXRpb24ueSk7CiAgICAgICAgbG9nLmQoIm9mZnNldCAiICsgcHJvcGVydGllcy5vZmZzZXRYICsgIiAiICsgcHJvcGVydGllcy5vZmZzZXRZKTsKCiAgICAgICAgdmFyIHJlc2l6ZVJlY3QgPSB7fTsKICAgICAgICByZXNpemVSZWN0LnggPSBkZWZhdWx0UG9zaXRpb24ueCArIHByb3BlcnRpZXMub2Zmc2V0WDsKICAgICAgICByZXNpemVSZWN0LnkgPSBkZWZhdWx0UG9zaXRpb24ueSArIHByb3BlcnRpZXMub2Zmc2V0WTsKICAgICAgICByZXNpemVSZWN0LndpZHRoID0gcHJvcGVydGllcy53aWR0aDsKICAgICAgICByZXNpemVSZWN0LmhlaWdodCA9IHByb3BlcnRpZXMuaGVpZ2h0OwogICAgICAgIHByaW50UmVjdCgicmVzaXplUmVjdCIsIHJlc2l6ZVJlY3QpOwoKICAgICAgICB2YXIgY3VzdG9tQ2xvc2VQb3NpdGlvbiA9IHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoImN1c3RvbUNsb3NlUG9zaXRpb24iKSA/CiAgICAgICAgICAgIHByb3BlcnRpZXMuY3VzdG9tQ2xvc2VQb3NpdGlvbiA6IHJlc2l6ZVByb3BlcnRpZXMuY3VzdG9tQ2xvc2VQb3NpdGlvbjsKICAgICAgICBsb2cuZCgiY3VzdG9tQ2xvc2VQb3NpdGlvbiAiICsgY3VzdG9tQ2xvc2VQb3NpdGlvbik7CgogICAgICAgIHZhciBjbG9zZVJlY3QgPSB7IndpZHRoIjogNTAsICJoZWlnaHQiOiA1MH07CgogICAgICAgIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgibGVmdCIpICE9PSAtMSkgewogICAgICAgICAgICBjbG9zZVJlY3QueCA9IHJlc2l6ZVJlY3QueDsKICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24uc2VhcmNoKCJjZW50ZXIiKSAhPT0gLTEpIHsKICAgICAgICAgICAgY2xvc2VSZWN0LnggPSByZXNpemVSZWN0LnggKyAocmVzaXplUmVjdC53aWR0aCAvIDIpIC0gMjU7CiAgICAgICAgfSBlbHNlIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgicmlnaHQiKSAhPT0gLTEpIHsKICAgICAgICAgICAgY2xvc2VSZWN0LnggPSByZXNpemVSZWN0LnggKyByZXNpemVSZWN0LndpZHRoIC0gNTA7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3VzdG9tQ2xvc2VQb3NpdGlvbi5zZWFyY2goInRvcCIpICE9PSAtMSkgewogICAgICAgICAgICBjbG9zZVJlY3QueSA9IHJlc2l6ZVJlY3QueTsKICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24gPT09ICJjZW50ZXIiKSB7CiAgICAgICAgICAgIGNsb3NlUmVjdC55ID0gcmVzaXplUmVjdC55ICsgKHJlc2l6ZVJlY3QuaGVpZ2h0IC8gMikgLSAyNTsKICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24uc2VhcmNoKCJib3R0b20iKSAhPT0gLTEpIHsKICAgICAgICAgICAgY2xvc2VSZWN0LnkgPSByZXNpemVSZWN0LnkgKyByZXNpemVSZWN0LmhlaWdodCAtIDUwOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1heFJlY3QgPSB7IngiOiAwLCAieSI6IDB9OwogICAgICAgIG1heFJlY3Qud2lkdGggPSBtYXhTaXplLndpZHRoOwogICAgICAgIG1heFJlY3QuaGVpZ2h0ID0gbWF4U2l6ZS5oZWlnaHQ7CgogICAgICAgIHJldHVybiBpc1JlY3RDb250YWluZWQobWF4UmVjdCwgY2xvc2VSZWN0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaXRSZXNpemVWaWV3T25TY3JlZW4ocHJvcGVydGllcykgewogICAgICAgIGxvZy5kKCJmaXRSZXNpemVWaWV3T25TY3JlZW4iKTsKICAgICAgICBsb2cuZCgiZGVmYXVsdFBvc2l0aW9uICIgKyBkZWZhdWx0UG9zaXRpb24ueCArICIgIiArIGRlZmF1bHRQb3NpdGlvbi55KTsKICAgICAgICBsb2cuZCgib2Zmc2V0ICIgKyBwcm9wZXJ0aWVzLm9mZnNldFggKyAiICIgKyBwcm9wZXJ0aWVzLm9mZnNldFkpOwoKICAgICAgICB2YXIgcmVzaXplUmVjdCA9IHt9OwogICAgICAgIHJlc2l6ZVJlY3QueCA9IGRlZmF1bHRQb3NpdGlvbi54ICsgcHJvcGVydGllcy5vZmZzZXRYOwogICAgICAgIHJlc2l6ZVJlY3QueSA9IGRlZmF1bHRQb3NpdGlvbi55ICsgcHJvcGVydGllcy5vZmZzZXRZOwogICAgICAgIHJlc2l6ZVJlY3Qud2lkdGggPSBwcm9wZXJ0aWVzLndpZHRoOwogICAgICAgIHJlc2l6ZVJlY3QuaGVpZ2h0ID0gcHJvcGVydGllcy5oZWlnaHQ7CiAgICAgICAgcHJpbnRSZWN0KCJyZXNpemVSZWN0IiwgcmVzaXplUmVjdCk7CgogICAgICAgIHZhciBtYXhSZWN0ID0geyJ4IjogMCwgInkiOiAwfTsKICAgICAgICBtYXhSZWN0LndpZHRoID0gbWF4U2l6ZS53aWR0aDsKICAgICAgICBtYXhSZWN0LmhlaWdodCA9IG1heFNpemUuaGVpZ2h0OwoKICAgICAgICB2YXIgYWRqdXN0bWVudHMgPSB7IngiOiAwLCAieSI6IDB9OwoKICAgICAgICBpZiAoaXNSZWN0Q29udGFpbmVkKG1heFJlY3QsIHJlc2l6ZVJlY3QpKSB7CiAgICAgICAgICAgIGxvZy5kKCJubyBhZGp1c3RtZW50IG5lY2Vzc2FyeSIpOwogICAgICAgICAgICByZXR1cm4gYWRqdXN0bWVudHM7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzaXplUmVjdC54IDwgbWF4UmVjdC54KSB7CiAgICAgICAgICAgIGFkanVzdG1lbnRzLnggPSBtYXhSZWN0LnggLSByZXNpemVSZWN0Lng7CiAgICAgICAgfSBlbHNlIGlmICgocmVzaXplUmVjdC54ICsgcmVzaXplUmVjdC53aWR0aCkgPiAobWF4UmVjdC54ICsgbWF4UmVjdC53aWR0aCkpIHsKICAgICAgICAgICAgYWRqdXN0bWVudHMueCA9IChtYXhSZWN0LnggKyBtYXhSZWN0LndpZHRoKSAtIChyZXNpemVSZWN0LnggKyByZXNpemVSZWN0LndpZHRoKTsKICAgICAgICB9CiAgICAgICAgbG9nLmQoImFkanVzdG1lbnRzLnggIiArIGFkanVzdG1lbnRzLngpOwoKICAgICAgICBpZiAocmVzaXplUmVjdC55IDwgbWF4UmVjdC55KSB7CiAgICAgICAgICAgIGFkanVzdG1lbnRzLnkgPSBtYXhSZWN0LnkgLSByZXNpemVSZWN0Lnk7CiAgICAgICAgfSBlbHNlIGlmICgocmVzaXplUmVjdC55ICsgcmVzaXplUmVjdC5oZWlnaHQpID4gKG1heFJlY3QueSArIG1heFJlY3QuaGVpZ2h0KSkgewogICAgICAgICAgICBhZGp1c3RtZW50cy55ID0gKG1heFJlY3QueSArIG1heFJlY3QuaGVpZ2h0KSAtIChyZXNpemVSZWN0LnkgKyByZXNpemVSZWN0LmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIGxvZy5kKCJhZGp1c3RtZW50cy55ICIgKyBhZGp1c3RtZW50cy55KTsKCiAgICAgICAgcmVzaXplUmVjdC54ID0gZGVmYXVsdFBvc2l0aW9uLnggKyBwcm9wZXJ0aWVzLm9mZnNldFggKyBhZGp1c3RtZW50cy54OwogICAgICAgIHJlc2l6ZVJlY3QueSA9IGRlZmF1bHRQb3NpdGlvbi55ICsgcHJvcGVydGllcy5vZmZzZXRZICsgYWRqdXN0bWVudHMueTsKICAgICAgICBwcmludFJlY3QoImFkanVzdGVkIHJlc2l6ZVJlY3QiLCByZXNpemVSZWN0KTsKCiAgICAgICAgcmV0dXJuIGFkanVzdG1lbnRzOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUmVjdENvbnRhaW5lZChjb250YWluaW5nUmVjdCwgY29udGFpbmVkUmVjdCkgewogICAgICAgIGxvZy5kKCJpc1JlY3RDb250YWluZWQiKTsKICAgICAgICBwcmludFJlY3QoImNvbnRhaW5pbmdSZWN0IiwgY29udGFpbmluZ1JlY3QpOwogICAgICAgIHByaW50UmVjdCgiY29udGFpbmVkUmVjdCIsIGNvbnRhaW5lZFJlY3QpOwogICAgICAgIHJldHVybiAoY29udGFpbmVkUmVjdC54ID49IGNvbnRhaW5pbmdSZWN0LnggJiYKICAgICAgICAgICAgKGNvbnRhaW5lZFJlY3QueCArIGNvbnRhaW5lZFJlY3Qud2lkdGgpIDw9IChjb250YWluaW5nUmVjdC54ICsgY29udGFpbmluZ1JlY3Qud2lkdGgpICYmCiAgICAgICAgICAgIGNvbnRhaW5lZFJlY3QueSA+PSBjb250YWluaW5nUmVjdC55ICYmCiAgICAgICAgICAgIChjb250YWluZWRSZWN0LnkgKyBjb250YWluZWRSZWN0LmhlaWdodCkgPD0gKGNvbnRhaW5pbmdSZWN0LnkgKyBjb250YWluaW5nUmVjdC5oZWlnaHQpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludFJlY3QobGFiZWwsIHJlY3QpIHsKICAgICAgICBsb2cuZChsYWJlbCArCiAgICAgICAgICAgICIgWyIgKyByZWN0LnggKyAiLCIgKyByZWN0LnkgKyAiXSIgKwogICAgICAgICAgICAiLFsiICsgKHJlY3QueCArIHJlY3Qud2lkdGgpICsgIiwiICsgKHJlY3QueSArIHJlY3QuaGVpZ2h0KSArICJdIiArCiAgICAgICAgICAgICIgKCIgKyByZWN0LndpZHRoICsgIngiICsgcmVjdC5oZWlnaHQgKyAiKSIpOwogICAgfQoKICAgIG1yYWlkLmR1bXBMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5FdmVudHMgPSBPYmplY3Qua2V5cyhsaXN0ZW5lcnMpLmxlbmd0aDsKICAgICAgICBsb2cuaSgiZHVtcGluZyBsaXN0ZW5lcnMgKCIgKyBuRXZlbnRzICsgIiBldmVudHMpIik7CiAgICAgICAgZm9yICh2YXIgZXZlbnQgaW4gbGlzdGVuZXJzKSB7CiAgICAgICAgICAgIHZhciBldmVudExpc3RlbmVycyA9IGxpc3RlbmVyc1tldmVudF07CiAgICAgICAgICAgIGxvZy5pKCIgICIgKyBldmVudCArICIgY29udGFpbnMgIiArIGV2ZW50TGlzdGVuZXJzLmxlbmd0aCArICIgbGlzdGVuZXJzIik7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGxvZy5pKCIgICAgIiArIGV2ZW50TGlzdGVuZXJzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgY29uc29sZS5sb2coIk1SQUlEIG9iamVjdCBsb2FkZWQiKTsKCn0pKCk7"

    .line 154
    .line 155
    invoke-static {p0, v7}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    .line 156
    .line 157
    .line 158
    move-result-object p0

    .line 159
    new-instance v1, Ljava/lang/String;

    .line 160
    .line 161
    invoke-direct {v1, p0}, Ljava/lang/String;-><init>([B)V

    .line 162
    .line 163
    .line 164
    const-string p0, "<script>"

    .line 165
    .line 166
    const-string v3, "</script>"

    .line 167
    .line 168
    invoke-static {p0, v4, v1, v4, v3}, Landroidx/camera/camera2/internal/J1;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    .line 169
    .line 170
    .line 171
    move-result-object v1

    .line 172
    const-string v5, "OyhmdW5jdGlvbihvbWlkR2xvYmFsKSB7CiAgdmFyIG47ZnVuY3Rpb24gYWEoYSl7dmFyIGI9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYjxhLmxlbmd0aD97ZG9uZTohMSx2YWx1ZTphW2IrK119Ontkb25lOiEwfX19ZnVuY3Rpb24gcChhKXt2YXIgYj0ndW5kZWZpbmVkJyE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yJiZhW1N5bWJvbC5pdGVyYXRvcl07aWYoYilyZXR1cm4gYi5jYWxsKGEpO2lmKCdudW1iZXInPT10eXBlb2YgYS5sZW5ndGgpcmV0dXJue25leHQ6YWEoYSl9O3Rocm93IEVycm9yKFN0cmluZyhhKSsnIGlzIG5vdCBhbiBpdGVyYWJsZSBvciBBcnJheUxpa2UnKTt9ZnVuY3Rpb24gcShhKXtpZighKGEgaW5zdGFuY2VvZiBBcnJheSkpe2E9cChhKTtmb3IodmFyIGIsYz1bXTshKGI9YS5uZXh0KCkpLmRvbmU7KWMucHVzaChiLnZhbHVlKTthPWN9cmV0dXJuIGF9CnZhciBjYT0nZnVuY3Rpb24nPT10eXBlb2YgT2JqZWN0LmNyZWF0ZT9PYmplY3QuY3JlYXRlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9Yi5wcm90b3R5cGU9YTtyZXR1cm4gbmV3IGJ9LHI9J2Z1bmN0aW9uJz09dHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7aWYoYT09QXJyYXkucHJvdG90eXBlfHxhPT1PYmplY3QucHJvdG90eXBlKXJldHVybiBhO2FbYl09Yy52YWx1ZTtyZXR1cm4gYX07CmZ1bmN0aW9uIGRhKGEpe2E9WydvYmplY3QnPT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcyxhLCdvYmplY3QnPT10eXBlb2Ygd2luZG93JiZ3aW5kb3csJ29iamVjdCc9PXR5cGVvZiBzZWxmJiZzZWxmLCdvYmplY3QnPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWxdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7KytiKXt2YXIgYz1hW2JdO2lmKGMmJmMuTWF0aD09TWF0aClyZXR1cm4gY310aHJvdyBFcnJvcignQ2Fubm90IGZpbmQgZ2xvYmFsIG9iamVjdCcpO312YXIgZWE9ZGEodGhpcyk7ZnVuY3Rpb24gdShhLGIpe2lmKGIpYTp7dmFyIGM9ZWE7YT1hLnNwbGl0KCcuJyk7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aC0xO2QrKyl7dmFyIGU9YVtkXTtpZighKGUgaW4gYykpYnJlYWsgYTtjPWNbZV19YT1hW2EubGVuZ3RoLTFdO2Q9Y1thXTtiPWIoZCk7YiE9ZCYmbnVsbCE9YiYmcihjLGEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9fXZhciBmYTsKaWYoJ2Z1bmN0aW9uJz09dHlwZW9mIE9iamVjdC5zZXRQcm90b3R5cGVPZilmYT1PYmplY3Quc2V0UHJvdG90eXBlT2Y7ZWxzZXt2YXIgaGE7YTp7dmFyIGlhPXthOiEwfSxqYT17fTt0cnl7amEuX19wcm90b19fPWlhO2hhPWphLmE7YnJlYWsgYX1jYXRjaChhKXt9aGE9ITF9ZmE9aGE/ZnVuY3Rpb24oYSxiKXthLl9fcHJvdG9fXz1iO2lmKGEuX19wcm90b19fIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKGErJyBpcyBub3QgZXh0ZW5zaWJsZScpO3JldHVybiBhfTpudWxsfXZhciBrYT1mYTsKZnVuY3Rpb24gdihhLGIpe2EucHJvdG90eXBlPWNhKGIucHJvdG90eXBlKTthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2lmKGthKWthKGEsYik7ZWxzZSBmb3IodmFyIGMgaW4gYilpZigncHJvdG90eXBlJyE9YylpZihPYmplY3QuZGVmaW5lUHJvcGVydGllcyl7dmFyIGQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpO2QmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsZCl9ZWxzZSBhW2NdPWJbY107YS5MYT1iLnByb3RvdHlwZX1mdW5jdGlvbiB3KCl7Zm9yKHZhciBhPU51bWJlcih0aGlzKSxiPVtdLGM9YTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWJbYy1hXT1hcmd1bWVudHNbY107cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX0KdmFyIGxhPSdmdW5jdGlvbic9PXR5cGVvZiBPYmplY3QuYXNzaWduP09iamVjdC5hc3NpZ246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXt2YXIgZD1hcmd1bWVudHNbY107aWYoZClmb3IodmFyIGUgaW4gZCl4KGQsZSkmJihhW2VdPWRbZV0pfXJldHVybiBhfTt1KCdPYmplY3QuYXNzaWduJyxmdW5jdGlvbihhKXtyZXR1cm4gYXx8bGF9KTsKdSgnU3ltYm9sJyxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGYpe2lmKHRoaXMgaW5zdGFuY2VvZiBiKXRocm93IG5ldyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvcicpO3JldHVybiBuZXcgYyhkKyhmfHwnJykrJ18nK2UrKyxmKX1mdW5jdGlvbiBjKGYsZyl7dGhpcy5nPWY7cih0aGlzLCdkZXNjcmlwdGlvbicse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpnfSl9aWYoYSlyZXR1cm4gYTtjLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmd9O3ZhciBkPSdqc2NvbXBfc3ltYm9sXycrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCkrJ18nLGU9MDtyZXR1cm4gYn0pOwp1KCdTeW1ib2wuaXRlcmF0b3InLGZ1bmN0aW9uKGEpe2lmKGEpcmV0dXJuIGE7YT1TeW1ib2woJ1N5bWJvbC5pdGVyYXRvcicpO2Zvcih2YXIgYj0nQXJyYXkgSW50OEFycmF5IFVpbnQ4QXJyYXkgVWludDhDbGFtcGVkQXJyYXkgSW50MTZBcnJheSBVaW50MTZBcnJheSBJbnQzMkFycmF5IFVpbnQzMkFycmF5IEZsb2F0MzJBcnJheSBGbG9hdDY0QXJyYXknLnNwbGl0KCcgJyksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1lYVtiW2NdXTsnZnVuY3Rpb24nPT09dHlwZW9mIGQmJidmdW5jdGlvbichPXR5cGVvZiBkLnByb3RvdHlwZVthXSYmcihkLnByb3RvdHlwZSxhLHtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbWEoYWEodGhpcykpfX0pfXJldHVybiBhfSk7ZnVuY3Rpb24gbWEoYSl7YT17bmV4dDphfTthW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307cmV0dXJuIGF9CnUoJ1dlYWtNYXAnLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoayl7dGhpcy5nPShoKz1NYXRoLnJhbmRvbSgpKzEpLnRvU3RyaW5nKCk7aWYoayl7az1wKGspO2Zvcih2YXIgbDshKGw9ay5uZXh0KCkpLmRvbmU7KWw9bC52YWx1ZSx0aGlzLnNldChsWzBdLGxbMV0pfX1mdW5jdGlvbiBjKCl7fWZ1bmN0aW9uIGQoayl7dmFyIGw9dHlwZW9mIGs7cmV0dXJuJ29iamVjdCc9PT1sJiZudWxsIT09a3x8J2Z1bmN0aW9uJz09PWx9ZnVuY3Rpb24gZShrKXtpZigheChrLGcpKXt2YXIgbD1uZXcgYztyKGssZyx7dmFsdWU6bH0pfX1mdW5jdGlvbiBmKGspe3ZhciBsPU9iamVjdFtrXTtsJiYoT2JqZWN0W2tdPWZ1bmN0aW9uKG0pe2lmKG0gaW5zdGFuY2VvZiBjKXJldHVybiBtO09iamVjdC5pc0V4dGVuc2libGUobSkmJmUobSk7cmV0dXJuIGwobSl9KX1pZihmdW5jdGlvbigpe2lmKCFhfHwhT2JqZWN0LnNlYWwpcmV0dXJuITE7dHJ5e3ZhciBrPU9iamVjdC5zZWFsKHt9KSxsPU9iamVjdC5zZWFsKHt9KSwKbT1uZXcgYShbW2ssMl0sW2wsM11dKTtpZigyIT1tLmdldChrKXx8MyE9bS5nZXQobCkpcmV0dXJuITE7bS5kZWxldGUoayk7bS5zZXQobCw0KTtyZXR1cm4hbS5oYXMoaykmJjQ9PW0uZ2V0KGwpfWNhdGNoKHQpe3JldHVybiExfX0oKSlyZXR1cm4gYTt2YXIgZz0nJGpzY29tcF9oaWRkZW5fJytNYXRoLnJhbmRvbSgpO2YoJ2ZyZWV6ZScpO2YoJ3ByZXZlbnRFeHRlbnNpb25zJyk7Zignc2VhbCcpO3ZhciBoPTA7Yi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGssbCl7aWYoIWQoaykpdGhyb3cgRXJyb3IoJ0ludmFsaWQgV2Vha01hcCBrZXknKTtlKGspO2lmKCF4KGssZykpdGhyb3cgRXJyb3IoJ1dlYWtNYXAga2V5IGZhaWw6ICcrayk7a1tnXVt0aGlzLmddPWw7cmV0dXJuIHRoaXN9O2IucHJvdG90eXBlLmdldD1mdW5jdGlvbihrKXtyZXR1cm4gZChrKSYmeChrLGcpP2tbZ11bdGhpcy5nXTp2b2lkIDB9O2IucHJvdG90eXBlLmhhcz1mdW5jdGlvbihrKXtyZXR1cm4gZChrKSYmeChrLApnKSYmeChrW2ddLHRoaXMuZyl9O2IucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihrKXtyZXR1cm4gZChrKSYmeChrLGcpJiZ4KGtbZ10sdGhpcy5nKT9kZWxldGUga1tnXVt0aGlzLmddOiExfTtyZXR1cm4gYn0pOwp1KCdNYXAnLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgaD17fTtyZXR1cm4gaC5IPWgubmV4dD1oLmhlYWQ9aH1mdW5jdGlvbiBjKGgsayl7dmFyIGw9aC5nO3JldHVybiBtYShmdW5jdGlvbigpe2lmKGwpe2Zvcig7bC5oZWFkIT1oLmc7KWw9bC5IO2Zvcig7bC5uZXh0IT1sLmhlYWQ7KXJldHVybiBsPWwubmV4dCx7ZG9uZTohMSx2YWx1ZTprKGwpfTtsPW51bGx9cmV0dXJue2RvbmU6ITAsdmFsdWU6dm9pZCAwfX0pfWZ1bmN0aW9uIGQoaCxrKXt2YXIgbD1rJiZ0eXBlb2Ygazsnb2JqZWN0Jz09bHx8J2Z1bmN0aW9uJz09bD9mLmhhcyhrKT9sPWYuZ2V0KGspOihsPScnKyArK2csZi5zZXQoayxsKSk6bD0ncF8nK2s7dmFyIG09aC5oW2xdO2lmKG0mJngoaC5oLGwpKWZvcihoPTA7aDxtLmxlbmd0aDtoKyspe3ZhciB0PW1baF07aWYoayE9PWsmJnQua2V5IT09dC5rZXl8fGs9PT10LmtleSlyZXR1cm57aWQ6bCxsaXN0Om0saW5kZXg6aCxCOnR9fXJldHVybntpZDpsLGxpc3Q6bSwKaW5kZXg6LTEsQjp2b2lkIDB9fWZ1bmN0aW9uIGUoaCl7dGhpcy5oPXt9O3RoaXMuZz1iKCk7dGhpcy5zaXplPTA7aWYoaCl7aD1wKGgpO2Zvcih2YXIgazshKGs9aC5uZXh0KCkpLmRvbmU7KWs9ay52YWx1ZSx0aGlzLnNldChrWzBdLGtbMV0pfX1pZihmdW5jdGlvbigpe2lmKCFhfHwnZnVuY3Rpb24nIT10eXBlb2YgYXx8IWEucHJvdG90eXBlLmVudHJpZXN8fCdmdW5jdGlvbichPXR5cGVvZiBPYmplY3Quc2VhbClyZXR1cm4hMTt0cnl7dmFyIGg9T2JqZWN0LnNlYWwoe3g6NH0pLGs9bmV3IGEocChbW2gsJ3MnXV0pKTtpZigncychPWsuZ2V0KGgpfHwxIT1rLnNpemV8fGsuZ2V0KHt4OjR9KXx8ay5zZXQoe3g6NH0sJ3QnKSE9a3x8MiE9ay5zaXplKXJldHVybiExO3ZhciBsPWsuZW50cmllcygpLG09bC5uZXh0KCk7aWYobS5kb25lfHxtLnZhbHVlWzBdIT1ofHwncychPW0udmFsdWVbMV0pcmV0dXJuITE7bT1sLm5leHQoKTtyZXR1cm4gbS5kb25lfHw0IT1tLnZhbHVlWzBdLnh8fAondCchPW0udmFsdWVbMV18fCFsLm5leHQoKS5kb25lPyExOiEwfWNhdGNoKHQpe3JldHVybiExfX0oKSlyZXR1cm4gYTt2YXIgZj1uZXcgV2Vha01hcDtlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oaCxrKXtoPTA9PT1oPzA6aDt2YXIgbD1kKHRoaXMsaCk7bC5saXN0fHwobC5saXN0PXRoaXMuaFtsLmlkXT1bXSk7bC5CP2wuQi52YWx1ZT1rOihsLkI9e25leHQ6dGhpcy5nLEg6dGhpcy5nLkgsaGVhZDp0aGlzLmcsa2V5OmgsdmFsdWU6a30sbC5saXN0LnB1c2gobC5CKSx0aGlzLmcuSC5uZXh0PWwuQix0aGlzLmcuSD1sLkIsdGhpcy5zaXplKyspO3JldHVybiB0aGlzfTtlLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oaCl7aD1kKHRoaXMsaCk7cmV0dXJuIGguQiYmaC5saXN0PyhoLmxpc3Quc3BsaWNlKGguaW5kZXgsMSksaC5saXN0Lmxlbmd0aHx8ZGVsZXRlIHRoaXMuaFtoLmlkXSxoLkIuSC5uZXh0PWguQi5uZXh0LGguQi5uZXh0Lkg9aC5CLkgsaC5CLmhlYWQ9bnVsbCx0aGlzLnNpemUtLSwKITApOiExfTtlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuaD17fTt0aGlzLmc9dGhpcy5nLkg9YigpO3RoaXMuc2l6ZT0wfTtlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oaCl7cmV0dXJuISFkKHRoaXMsaCkuQn07ZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGgpe3JldHVybihoPWQodGhpcyxoKS5CKSYmaC52YWx1ZX07ZS5wcm90b3R5cGUuZW50cmllcz1mdW5jdGlvbigpe3JldHVybiBjKHRoaXMsZnVuY3Rpb24oaCl7cmV0dXJuW2gua2V5LGgudmFsdWVdfSl9O2UucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gYyh0aGlzLGZ1bmN0aW9uKGgpe3JldHVybiBoLmtleX0pfTtlLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gYyh0aGlzLGZ1bmN0aW9uKGgpe3JldHVybiBoLnZhbHVlfSl9O2UucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oaCxrKXtmb3IodmFyIGw9dGhpcy5lbnRyaWVzKCksbTshKG09bC5uZXh0KCkpLmRvbmU7KW09bS52YWx1ZSwKaC5jYWxsKGssbVsxXSxtWzBdLHRoaXMpfTtlLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPWUucHJvdG90eXBlLmVudHJpZXM7dmFyIGc9MDtyZXR1cm4gZX0pO3UoJ09iamVjdC52YWx1ZXMnLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oYil7dmFyIGM9W10sZDtmb3IoZCBpbiBiKXgoYixkKSYmYy5wdXNoKGJbZF0pO3JldHVybiBjfX0pO2Z1bmN0aW9uIG5hKGEsYil7YSBpbnN0YW5jZW9mIFN0cmluZyYmKGErPScnKTt2YXIgYz0wLGQ9ITEsZT17bmV4dDpmdW5jdGlvbigpe2lmKCFkJiZjPGEubGVuZ3RoKXt2YXIgZj1jKys7cmV0dXJue3ZhbHVlOmIoZixhW2ZdKSxkb25lOiExfX1kPSEwO3JldHVybntkb25lOiEwLHZhbHVlOnZvaWQgMH19fTtlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIGV9dSgnQXJyYXkucHJvdG90eXBlLmtleXMnLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oKXtyZXR1cm4gbmEodGhpcyxmdW5jdGlvbihiKXtyZXR1cm4gYn0pfX0pOwp1KCdTZXQnLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyl7dGhpcy5nPW5ldyBNYXA7aWYoYyl7Yz1wKGMpO2Zvcih2YXIgZDshKGQ9Yy5uZXh0KCkpLmRvbmU7KXRoaXMuYWRkKGQudmFsdWUpfXRoaXMuc2l6ZT10aGlzLmcuc2l6ZX1pZihmdW5jdGlvbigpe2lmKCFhfHwnZnVuY3Rpb24nIT10eXBlb2YgYXx8IWEucHJvdG90eXBlLmVudHJpZXN8fCdmdW5jdGlvbichPXR5cGVvZiBPYmplY3Quc2VhbClyZXR1cm4hMTt0cnl7dmFyIGM9T2JqZWN0LnNlYWwoe3g6NH0pLGQ9bmV3IGEocChbY10pKTtpZighZC5oYXMoYyl8fDEhPWQuc2l6ZXx8ZC5hZGQoYykhPWR8fDEhPWQuc2l6ZXx8ZC5hZGQoe3g6NH0pIT1kfHwyIT1kLnNpemUpcmV0dXJuITE7dmFyIGU9ZC5lbnRyaWVzKCksZj1lLm5leHQoKTtpZihmLmRvbmV8fGYudmFsdWVbMF0hPWN8fGYudmFsdWVbMV0hPWMpcmV0dXJuITE7Zj1lLm5leHQoKTtyZXR1cm4gZi5kb25lfHxmLnZhbHVlWzBdPT1jfHw0IT1mLnZhbHVlWzBdLnh8fApmLnZhbHVlWzFdIT1mLnZhbHVlWzBdPyExOmUubmV4dCgpLmRvbmV9Y2F0Y2goZyl7cmV0dXJuITF9fSgpKXJldHVybiBhO2IucHJvdG90eXBlLmFkZD1mdW5jdGlvbihjKXtjPTA9PT1jPzA6Yzt0aGlzLmcuc2V0KGMsYyk7dGhpcy5zaXplPXRoaXMuZy5zaXplO3JldHVybiB0aGlzfTtiLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oYyl7Yz10aGlzLmcuZGVsZXRlKGMpO3RoaXMuc2l6ZT10aGlzLmcuc2l6ZTtyZXR1cm4gY307Yi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmcuY2xlYXIoKTt0aGlzLnNpemU9MH07Yi5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmcuaGFzKGMpfTtiLnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZy5lbnRyaWVzKCl9O2IucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmcudmFsdWVzKCl9O2IucHJvdG90eXBlLmtleXM9Yi5wcm90b3R5cGUudmFsdWVzO2IucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09CmIucHJvdG90eXBlLnZhbHVlcztiLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGMsZCl7dmFyIGU9dGhpczt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihmKXtyZXR1cm4gYy5jYWxsKGQsZixmLGUpfSl9O3JldHVybiBifSk7dSgnT2JqZWN0LmlzJyxmdW5jdGlvbihhKXtyZXR1cm4gYT9hOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9PT1jPzAhPT1ifHwxL2I9PT0xL2M6YiE9PWImJmMhPT1jfX0pO3UoJ0FycmF5LnByb3RvdHlwZS5pbmNsdWRlcycsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXM7ZCBpbnN0YW5jZW9mIFN0cmluZyYmKGQ9U3RyaW5nKGQpKTt2YXIgZT1kLmxlbmd0aDtjPWN8fDA7Zm9yKDA+YyYmKGM9TWF0aC5tYXgoYytlLDApKTtjPGU7YysrKXt2YXIgZj1kW2NdO2lmKGY9PT1ifHxPYmplY3QuaXMoZixiKSlyZXR1cm4hMH1yZXR1cm4hMX19KTsKdSgnU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcycsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbihiLGMpe2lmKG51bGw9PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlICd0aGlzJyB2YWx1ZSBmb3IgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCIpO2lmKGIgaW5zdGFuY2VvZiBSZWdFeHApdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgdG8gU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyBtdXN0IG5vdCBiZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbicpO3JldHVybi0xIT09dGhpcy5pbmRleE9mKGIsY3x8MCl9fSk7dSgnT2JqZWN0LmVudHJpZXMnLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oYil7dmFyIGM9W10sZDtmb3IoZCBpbiBiKXgoYixkKSYmYy5wdXNoKFtkLGJbZF1dKTtyZXR1cm4gY319KTsKdSgnQXJyYXkucHJvdG90eXBlLnZhbHVlcycsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbigpe3JldHVybiBuYSh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGN9KX19KTsKdmFyIHk9e3hhOidsb2FkZWQnLEZhOidzdGFydCcscmE6J2ZpcnN0UXVhcnRpbGUnLEFhOidtaWRwb2ludCcsR2E6J3RoaXJkUXVhcnRpbGUnLHBhOidjb21wbGV0ZScsQmE6J3BhdXNlJyxEYToncmVzdW1lJyxvYTonYnVmZmVyU3RhcnQnLG5hOididWZmZXJGaW5pc2gnLEVhOidza2lwcGVkJyxKYTondm9sdW1lQ2hhbmdlJyxDYToncGxheWVyU3RhdGVDaGFuZ2UnLGthOidhZFVzZXJJbnRlcmFjdGlvbid9LG9hPXt1YTonZ2VuZXJpYycsSWE6J3ZpZGVvJyx6YTonbWVkaWEnfSxwYT17Y2E6J25hdGl2ZScsdmE6J2h0bWwnLFY6J2phdmFzY3JpcHQnfSxxYT17Y2E6J25hdGl2ZScsVjonamF2YXNjcmlwdCcsTk9ORTonbm9uZSd9LHJhPXt0YTonZnVsbCcscWE6J2RvbWFpbicsd2E6J2xpbWl0ZWQnfSxzYT17bWE6J2JhY2tncm91bmRlZCcsc2E6J2ZvcmVncm91bmRlZCd9LHRhPXt5YTonbG9ja2VkJyxIYTondW5sb2NrZWQnfSx1YT17bGE6J2FwcCcsS2E6J3dlYid9O2Z1bmN0aW9uIHooYSxiKXt0aGlzLng9bnVsbCE9YS54P2EueDphLmxlZnQ7dGhpcy55PW51bGwhPWEueT9hLnk6YS50b3A7dGhpcy53aWR0aD1hLndpZHRoO3RoaXMuaGVpZ2h0PWEuaGVpZ2h0O3RoaXMuZW5kWD10aGlzLngrdGhpcy53aWR0aDt0aGlzLmVuZFk9dGhpcy55K3RoaXMuaGVpZ2h0O3RoaXMuYWRTZXNzaW9uSWQ9YS5hZFNlc3Npb25JZHx8dm9pZCAwO3RoaXMuaXNGcmllbmRseU9ic3RydWN0aW9uRm9yPWEuaXNGcmllbmRseU9ic3RydWN0aW9uRm9yfHxbXTt0aGlzLmg9YS5mcmllbmRseU9ic3RydWN0aW9uQ2xhc3N8fHZvaWQgMDt0aGlzLmk9YS5mcmllbmRseU9ic3RydWN0aW9uUHVycG9zZXx8dm9pZCAwO3RoaXMuaj1hLmZyaWVuZGx5T2JzdHJ1Y3Rpb25SZWFzb258fHZvaWQgMDt0aGlzLmNsaXBzVG9Cb3VuZHM9dm9pZCAwIT09YS5jbGlwc1RvQm91bmRzPyEwPT09YS5jbGlwc1RvQm91bmRzOiEwO3RoaXMubT12b2lkIDAhPT1hLmhhc1dpbmRvd0ZvY3VzPyEwPT09CmEuaGFzV2luZG93Rm9jdXM6ITA7dGhpcy5ub3RWaXNpYmxlUmVhc29uPWEubm90VmlzaWJsZVJlYXNvbnx8dm9pZCAwO3RoaXMubm9PdXRwdXREZXZpY2U9YS5ub091dHB1dERldmljZXx8dm9pZCAwO3RoaXMuaXNQaXBBY3RpdmU9J3RydWUnPT09YS5pc1BpcEFjdGl2ZXx8ITA9PT1hLmlzUGlwQWN0aXZlfHwhMTt0aGlzLmNoaWxkVmlld3M9YS5jaGlsZFZpZXdzfHxbXTt0aGlzLmlzQ3JlYXRpdmU9YS5pc0NyZWF0aXZlfHwhMTt0aGlzLmc9Yn1mdW5jdGlvbiB2YShhKXt2YXIgYj17fTtyZXR1cm4gYi53aWR0aD1hLndpZHRoLGIuaGVpZ2h0PWEuaGVpZ2h0LGJ9ZnVuY3Rpb24gQShhKXt2YXIgYj17fTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSx2YShhKSwoYi54PWEueCxiLnk9YS55LGIpKX1mdW5jdGlvbiBDKGEpe3ZhciBiPUEoYSksYz17fTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSxiLChjLmVuZFg9YS5lbmRYLGMuZW5kWT1hLmVuZFksYykpfQpmdW5jdGlvbiB3YShhLGIsYyl7YS54Kz1iO2EueSs9YzthLmVuZFgrPWI7YS5lbmRZKz1jfXoucHJvdG90eXBlLk49ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4hMTthPUEoYSk7dmFyIGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0O3JldHVybiB0aGlzLng9PT1hLngmJnRoaXMueT09PWImJnRoaXMud2lkdGg9PT1jJiZ0aGlzLmhlaWdodD09PWR9O2Z1bmN0aW9uIHhhKGEpe3JldHVybiBhLndpZHRoKmEuaGVpZ2h0fWZ1bmN0aW9uIEQoYSl7cmV0dXJuIDA9PT1hLndpZHRofHwwPT09YS5oZWlnaHR9O2Z1bmN0aW9uIHlhKGEsYil7YT1BKGEpO2Zvcih2YXIgYz1bXSxkPVtdLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGY9QShiW2VdKTtmPXphKGEsZik7RShjLGYueCk7RShjLGYuZW5kWCk7RShkLGYueSk7RShkLGYuZW5kWSl9Yz1jLnNvcnQoZnVuY3Rpb24oZyxoKXtyZXR1cm4gZy1ofSk7ZD1kLnNvcnQoZnVuY3Rpb24oZyxoKXtyZXR1cm4gZy1ofSk7cmV0dXJue2lhOmMsamE6ZH19ZnVuY3Rpb24gemEoYSxiKXtyZXR1cm57eDpNYXRoLm1heChhLngsYi54KSx5Ok1hdGgubWF4KGEueSxiLnkpLGVuZFg6TWF0aC5taW4oYS54K2Eud2lkdGgsYi54K2Iud2lkdGgpLGVuZFk6TWF0aC5taW4oYS55K2EuaGVpZ2h0LGIueStiLmhlaWdodCl9fWZ1bmN0aW9uIEUoYSxiKXstMT09PWEuaW5kZXhPZihiKSYmYS5wdXNoKGIpfTtmdW5jdGlvbiBHKCl7dGhpcy5oPXRoaXMuZz10aGlzLkQ9dGhpcy51PXRoaXMubT10aGlzLnM9dm9pZCAwO3RoaXMuQT0wO3RoaXMubD1bXTt0aGlzLnY9W107dGhpcy5DPTA7dGhpcy5vPVtdO3RoaXMuaj1bXTt0aGlzLmk9W119Ry5wcm90b3R5cGUuTj1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8hMTpKU09OLnN0cmluZ2lmeShBYSh0aGlzKSk9PT1KU09OLnN0cmluZ2lmeShBYShhKSl9OwpmdW5jdGlvbiBBYShhKXt2YXIgYj1bXSxjPVtdLGQ9e3ZpZXdwb3J0OmEucyxhZFZpZXc6e3BlcmNlbnRhZ2VJblZpZXc6YS5BLHBpeGVsc0luVmlldzphLkMscmVhc29uczphLml9LGRlY2xhcmVkRnJpZW5kbHlPYnN0cnVjdGlvbnM6YS5sLmxlbmd0aH07aWYodm9pZCAwIT09YS5nKXtkLmFkVmlldy5nZW9tZXRyeT1BKGEuZyk7ZC5hZFZpZXcuZ2VvbWV0cnkucGl4ZWxzPXhhKGEuZyk7ZC5hZFZpZXcub25TY3JlZW5HZW9tZXRyeT1BKGEuaCk7ZC5hZFZpZXcub25TY3JlZW5HZW9tZXRyeS5waXhlbHM9QmEoYSk7Zm9yKHZhciBlPTA7ZTxhLmoubGVuZ3RoO2UrKyliLnB1c2goQShhLmpbZV0pKTtmb3IoZT0wO2U8YS52Lmxlbmd0aDtlKyspe3ZhciBmPWEudltlXSxnPWYsaD17fTtnLmgmJihoLm9ic3RydWN0aW9uQ2xhc3M9Zy5oKTtnLmkmJihoLm9ic3RydWN0aW9uUHVycG9zZT1nLmkpO2cuaiYmKGgub2JzdHJ1Y3Rpb25SZWFzb249Zy5qKTtmPXphKGEuZyxmKTtjLnB1c2goT2JqZWN0LmFzc2lnbih7fSwKe3g6Zi54LHk6Zi55LHdpZHRoOmYuZW5kWC1mLngsaGVpZ2h0OmYuZW5kWS1mLnl9LGgpKX1kLmFkVmlldy5vblNjcmVlbkdlb21ldHJ5Lm9ic3RydWN0aW9ucz1iO2QuYWRWaWV3Lm9uU2NyZWVuR2VvbWV0cnkuZnJpZW5kbHlPYnN0cnVjdGlvbnM9Yzt2b2lkIDAhPT1hLnUmJnZvaWQgMCE9PWEuRCYmKGQuYWRWaWV3LmNvbnRhaW5lckdlb21ldHJ5PUEoYS51KSxkLmFkVmlldy5vblNjcmVlbkNvbnRhaW5lckdlb21ldHJ5PUEoYS5EKSxkLmFkVmlldy5tZWFzdXJpbmdFbGVtZW50PSEwKX1yZXR1cm4gZH1mdW5jdGlvbiBDYShhLGIpe2I9dmEoYik7YS5zPXt9O2Eucy53aWR0aD1iLndpZHRoO2Eucy5oZWlnaHQ9Yi5oZWlnaHQ7YS5tPXt9O2EubS54PTA7YS5tLnk9MDthLm0ud2lkdGg9Yi53aWR0aDthLm0uaGVpZ2h0PWIuaGVpZ2h0O2EubS5lbmRYPWIud2lkdGg7YS5tLmVuZFk9Yi5oZWlnaHR9CmZ1bmN0aW9uIERhKCl7cmV0dXJue3g6MCx5OjAsZW5kWDowLGVuZFk6MCx3aWR0aDowLGhlaWdodDowfX1mdW5jdGlvbiBFYShhLGIpe3ZhciBjPXt9O2MueD1NYXRoLm1heChhLngsYi54KTtjLnk9TWF0aC5tYXgoYS55LGIueSk7Yy5lbmRYPU1hdGgubWluKGEuZW5kWCxiLmVuZFgpO2MuZW5kWT1NYXRoLm1pbihhLmVuZFksYi5lbmRZKTtjLndpZHRoPU1hdGgubWF4KDAsYy5lbmRYLWMueCk7Yy5oZWlnaHQ9TWF0aC5tYXgoMCxjLmVuZFktYy55KTtyZXR1cm4gY31mdW5jdGlvbiBGYShhLGIpe3JldHVybi4wMTxiLndpZHRoLWEud2lkdGh8fC4wMTxiLmhlaWdodC1hLmhlaWdodH1mdW5jdGlvbiBHYShhKXtpZigtMSE9PWEuaS5pbmRleE9mKCdiYWNrZ3JvdW5kZWQnKSlhLkE9MCxhLkM9MDtlbHNle3ZhciBiPXhhKGEuZyk7aWYoMCE9PWIpe3ZhciBjPUJhKGEpO2EuQT1NYXRoLnJvdW5kKGMvYioxMDApO2EuQz1jfX19CmZ1bmN0aW9uIEhhKGEsYil7aWYoRChiKXx8IWEuaCliPSExO2Vsc2V7dmFyIGM9QyhhLmgpLGQ9Yy55LGU9Yy5lbmRYO2E9Yy5lbmRZO3ZhciBmPWIuZW5kWDtjPWMueDsoZj1mPGN8fC4wMT5NYXRoLmFicyhmLWMpKXx8KGY9Yi54LGY9Zj5lfHwuMDE+TWF0aC5hYnMoZi1lKSk7KGU9Zil8fChlPWIuZW5kWSxlPWU8ZHx8LjAxPk1hdGguYWJzKGUtZCkpOyhkPWUpfHwoYj1iLnksZD1iPmF8fC4wMT5NYXRoLmFicyhiLWEpKTtiPSFkfXJldHVybiBifWZ1bmN0aW9uIEgoYSxiKXtmb3IodmFyIGM9ITEsZD0wO2Q8YS5pLmxlbmd0aDtkKyspYS5pW2RdPT09YiYmKGM9ITApO2N8fGEuaS5wdXNoKGIpfQpmdW5jdGlvbiBCYShhKXt2YXIgYj1NYXRoLGM9Yi5tYXgsZD14YShhLmgpLGU9YS5qLGY9MDtpZigwPGUubGVuZ3RoKXt2YXIgZz15YShhLmgsZSk7YT1nLmlhO2c9Zy5qYTtmb3IodmFyIGg9MDtoPGEubGVuZ3RoLTE7aCsrKWZvcih2YXIgaz0oYVtoXSsoYVtoXSsxKSkvMixsPWFbaCsxXS1hW2hdLG09MDttPGcubGVuZ3RoLTE7bSsrKXtmb3IodmFyIHQ9KGdbbV0rKGdbbV0rMSkpLzIsST1nW20rMV0tZ1ttXSxiYT0hMSxSPTA7UjxlLmxlbmd0aDtSKyspe3ZhciBGPUEoZVtSXSk7aWYoRi54PGsmJkYueCtGLndpZHRoPmsmJkYueTx0JiZGLnkrRi5oZWlnaHQ+dCl7YmE9ITA7YnJlYWt9fWJhJiYoZis9TWF0aC5yb3VuZChsKSpNYXRoLnJvdW5kKEkpKX19cmV0dXJuIGMuY2FsbChiLDAsZC1mKX07ZnVuY3Rpb24gSWEoKXt9O2Z1bmN0aW9uIEphKCl7fQpmdW5jdGlvbiBLYShhLGIsYyxkLGUsZil7dmFyIGc9bmV3IEc7Yj1uZXcgeihiLCExKTtDYShnLGIpO0xhKGEsYixnLGQpO2lmKCFlKXJldHVybiBnLmk9Wyd1bm1lYXN1cmFibGUnXSxnLnM9dm9pZCAwLGcuQT0wLGcuaj1bXSxnLmcmJihhPWcuZyxjPXt9LGE9bmV3IHooKGMueD0wLGMueT0wLGMud2lkdGg9YS53aWR0aCxjLmhlaWdodD1hLmhlaWdodCxjKSxhLmcpLGcuZz1hKSxnLmg9RGEoKSxnOydsb2NrZWQnPT09ZiYmSChnLCdkZXZpY2VMb2NrZWQnKTtpZihiLm5vT3V0cHV0RGV2aWNlKUgoZywnYmFja2dyb3VuZGVkJyksSChnLCdub091dHB1dERldmljZScpO2Vsc2UgaWYoJ2JhY2tncm91bmRlZCc9PT1jKUgoZywnYmFja2dyb3VuZGVkJyk7ZWxzZSBpZih2b2lkIDAhPT1nLmcpe2ZvcihhPTA7YTxnLmwubGVuZ3RoO2ErKylIYShnLGcubFthXSkmJmcudi5wdXNoKGcubFthXSk7Zm9yKGE9MDthPGcuby5sZW5ndGg7YSsrKXtpZihjPUhhKGcsZy5vW2FdKSl7YTp7Yz1nLm9bYV07CmZvcihkPTA7ZDxnLmoubGVuZ3RoO2QrKylpZihnLmpbZF0uTihjKSl7Yz0hMDticmVhayBhfWM9ITF9Yz0hY31jJiYoSChnLCdvYnN0cnVjdGVkJyksZy5qLnB1c2goZy5vW2FdKSl9R2EoZyl9ZWxzZSBIKGcsJ25vdEZvdW5kJyk7cmV0dXJuIGd9CmZ1bmN0aW9uIExhKGEsYixjLGQpe3ZhciBlPWIuaXNDcmVhdGl2ZT8hMDpiLmFkU2Vzc2lvbklkPT09ZDtpZihlKXtjLmc9Yjt2YXIgZj1DKGMuZyk7YT1FYShjLm0sZik7dmFyIGc9Yy5nOydub3RBdHRhY2hlZCc9PT1nLm5vdFZpc2libGVSZWFzb258fCdub1dpbmRvd0ZvY3VzJz09PWcubm90VmlzaWJsZVJlYXNvbnx8J25vQWRWaWV3Jz09PWcubm90VmlzaWJsZVJlYXNvbj8oSChjLCdub3RGb3VuZCcpLGMuaD1uZXcgeihEYSgpLCExKSk6KGc9Yy5nLCd2aWV3SW52aXNpYmxlJz09PWcubm90VmlzaWJsZVJlYXNvbnx8J3ZpZXdHb25lJz09PWcubm90VmlzaWJsZVJlYXNvbnx8J3ZpZXdOb3RWaXNpYmxlJz09PWcubm90VmlzaWJsZVJlYXNvbnx8J3ZpZXdBbHBoYVplcm8nPT09Zy5ub3RWaXNpYmxlUmVhc29ufHwndmlld0hpZGRlbic9PT1nLm5vdFZpc2libGVSZWFzb258fHZvaWQgMCE9PWMuZy5ub3RWaXNpYmxlUmVhc29ufHxEKGMuZyk/KEgoYywnaGlkZGVuJyksYy5oPW5ldyB6KERhKCksCiExKSk6KGMuZy5pc1BpcEFjdGl2ZSYmSChjLCdwaWN0dXJlSW5QaWN0dXJlJyksYy5nLm18fChIKGMsJ2JhY2tncm91bmRlZCcpLEgoYywnbm9XaW5kb3dGb2N1cycpKSxGYShhLGYpJiZIKGMsJ2NsaXBwZWQnKSxjLmg9bmV3IHooYSwhMSkpKX1lbHNlIGlmKGY9ITAsYi5nJiYoZj0tMSE9PWIuaXNGcmllbmRseU9ic3RydWN0aW9uRm9yLmluZGV4T2YoZCk/ITE6ITE9PT1iLmNsaXBzVG9Cb3VuZHMpLGYpe2c9Yi5jaGlsZFZpZXdzO2Zvcih2YXIgaD0wO2g8Zy5sZW5ndGg7aCsrKWY9dm9pZCAwIT09Yy5nLExhKGEsbmV3IHooZ1toXSxmKSxjLGQpfWV8fHZvaWQgMD09PWMuZ3x8KGIuZz8tMSE9PWIuaXNGcmllbmRseU9ic3RydWN0aW9uRm9yLmluZGV4T2YoZCk/Yy5sLnB1c2goYik6Yy5vLnB1c2goYik6KGU9QyhiKSxkPUMoYy5oKSxBKGMuaCksIUQoYy5oKSYmYi5jbGlwc1RvQm91bmRzJiYoYj1FYShkLGUpLEZhKGIsZCkmJihIKGMsJ2NsaXBwZWQnKSxjLmg9bmV3IHooYiwhMSkpKSkpfQo7ZnVuY3Rpb24gTWEoKXt0aGlzLmg9bmV3IE1hcDt0aGlzLmc9bnVsbH1mdW5jdGlvbiBOYSgpe09hfHwoT2E9bmV3IE1hKTtyZXR1cm4gT2F9dmFyIE9hPW51bGw7ZnVuY3Rpb24gUGEoYSxiKXt0aGlzLnk9dGhpcy54PTA7dGhpcy53aWR0aD1hO3RoaXMuaGVpZ2h0PWJ9O2Z1bmN0aW9uIFFhKCl7dGhpcy5hZFNlc3Npb25JZD1udWxsO3RoaXMubT17YXBpVmVyc2lvbjonMS4wJyxhY2Nlc3NNb2RlOidsaW1pdGVkJyxlbnZpcm9ubWVudDonYXBwJyxvbWlkSnNJbmZvOntvbWlkSW1wbGVtZW50ZXI6J29tc2RrJyxzZXJ2aWNlVmVyc2lvbjonMS41LjEtaWFiNDUyMid9fTt0aGlzLkM9bnVsbDt0aGlzLkE9J2ZvcmVncm91bmRlZCc7dGhpcy5NPSd1bmxvY2tlZCc7dGhpcy51PXRoaXMubz0nbm9uZSc7dGhpcy5zPXRoaXMuaj10aGlzLmk9dGhpcy5sPXRoaXMuaD10aGlzLmc9dGhpcy5KPXRoaXMuRD1udWxsO3RoaXMuST0hMDt0aGlzLnY9bmV3IE1hcH0KZnVuY3Rpb24gUmEoYSxiKXt2b2lkIDAhPT1iLmNvbnRlbnRVcmwmJihhLkM9Yi5jb250ZW50VXJsLGIuY29udGVudFVybD12b2lkIDApO3ZhciBjPWEubXx8e307Yi5vbWlkSnNJbmZvPU9iamVjdC5hc3NpZ24oe30sYy5vbWlkSnNJbmZvfHx7fSxiLm9taWRKc0luZm98fHt9KTtiPU9iamVjdC5hc3NpZ24oe30sYyxiKTthLkl8fChudWxsIT1hLmo/KGIudmlkZW9FbGVtZW50PWEuaixiLmFjY2Vzc01vZGU9J2Z1bGwnKTpudWxsIT1hLmkmJihiLnNsb3RFbGVtZW50PWEuaSxiLmFjY2Vzc01vZGU9J2Z1bGwnKSk7YS5tPWJ9O3ZhciBKPWZ1bmN0aW9uKCl7aWYoJ3VuZGVmaW5lZCchPT10eXBlb2Ygb21pZEdsb2JhbCYmb21pZEdsb2JhbClyZXR1cm4gb21pZEdsb2JhbDtpZigndW5kZWZpbmVkJyE9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbClyZXR1cm4gZ2xvYmFsO2lmKCd1bmRlZmluZWQnIT09dHlwZW9mIHdpbmRvdyYmd2luZG93KXJldHVybiB3aW5kb3c7aWYoJ3VuZGVmaW5lZCchPT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcylyZXR1cm4gZ2xvYmFsVGhpczt2YXIgYT1GdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO2lmKGEpcmV0dXJuIGE7dGhyb3cgRXJyb3IoJ0NvdWxkIG5vdCBkZXRlcm1pbmUgZ2xvYmFsIG9iamVjdCBjb250ZXh0LicpO30oKTtmdW5jdGlvbiBTYShhLGIpe3RoaXMuZz1hO3RoaXMuaD1ifWVhLk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFNhLnByb3RvdHlwZSx7ZXZlbnQ6e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmd9fSxvcmlnaW46e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmh9fX0pO2Z1bmN0aW9uIEsoKXt2YXIgYT13LmFwcGx5KDAsYXJndW1lbnRzKTtUYShmdW5jdGlvbigpe3Rocm93IG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoRXJyb3IsW251bGwsJ0NvdWxkIG5vdCBjb21wbGV0ZSB0aGUgdGVzdCBzdWNjZXNzZnVsbHkgLSAnXS5jb25jYXQocShhKSkpKTt9LGZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSxxKGEpKX0pfWZ1bmN0aW9uIFVhKCl7dmFyIGE9dy5hcHBseSgwLGFyZ3VtZW50cyk7VGEoZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSxxKGEpKX0pfWZ1bmN0aW9uIFRhKGEsYil7J3VuZGVmaW5lZCchPT10eXBlb2YgamFzbWluZSYmamFzbWluZT9hKCk6J3VuZGVmaW5lZCchPT10eXBlb2YgY29uc29sZSYmY29uc29sZSYmY29uc29sZS5lcnJvciYmYigpfTtmdW5jdGlvbiBWYShhKXt0aGlzLmc9YTt0aGlzLm09W107dGhpcy5pPVtdO3RoaXMuaj1bXTt0aGlzLmw9W107dGhpcy5vPXt9fWZ1bmN0aW9uIFdhKGEsYil7aWYodm9pZCAwIT09YS5nJiZhLmcuYWRTZXNzaW9uSWQmJiExIT09WGEoYSxiKSl7dmFyIGM9Yi5ldmVudDthLmouZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBkLnR5cGU9PT1jLnR5cGV9KS5mb3JFYWNoKGZ1bmN0aW9uKGQpe2EuaChkLkcsYyl9KX19ZnVuY3Rpb24gWWEoYSxiKXthLm0ucHVzaChiKTtXYShhLGIpfWZ1bmN0aW9uIFphKGEsYixjKXt2b2lkIDAhPT1hLmcmJmEuZy5hZFNlc3Npb25JZCYmYS5tLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gZC5ldmVudC50eXBlPT09YiYmWGEoYSxkKX0pLm1hcChmdW5jdGlvbihkKXtyZXR1cm4gZC5ldmVudH0pLmZvckVhY2goZnVuY3Rpb24oZCl7YS5oKGMuRyxkKX0pfQpmdW5jdGlvbiBYYShhLGIpe3ZhciBjPWIuZXZlbnQudHlwZSxkPS0xIT09T2JqZWN0LnZhbHVlcyh5KS5pbmRleE9mKGMpJiYndm9sdW1lQ2hhbmdlJyE9PWM7cmV0dXJuJ2ltcHJlc3Npb24nPT09Y3x8J2xvYWRlZCc9PT1jJiZhLmcuaD9iLm9yaWdpbj09PWEuZy51OmQ/Yi5vcmlnaW49PT1hLmcubzohMH1mdW5jdGlvbiAkYShhLGIsYyl7T2JqZWN0LmtleXMoeSkuZm9yRWFjaChmdW5jdGlvbihkKXtkPXlbZF07dmFyIGU9e3R5cGU6ZCxSOmMsRzpifTthLmoucHVzaChlKTtaYShhLGQsZSl9KX1mdW5jdGlvbiBhYihhLGIsYyxkKXt2YXIgZT17VTpjLFI6ZCxHOmJ9O2EubC5wdXNoKGUpO2EuaS5mb3JFYWNoKGZ1bmN0aW9uKGYpe3ZhciBnPWJiKGYpOydzZXNzaW9uU3RhcnQnPT09Zi5ldmVudC50eXBlJiZjYihhLGcsZSk7YS5oKGUuRyxnKX0pfQpmdW5jdGlvbiBkYihhLGIsYyl7dmFyIGQ9TChhLCdzZXNzaW9uRXJyb3InLCduYXRpdmUnLHtlcnJvclR5cGU6YixtZXNzYWdlOmN9KTthLmkucHVzaChkKTthLmwuZm9yRWFjaChmdW5jdGlvbihlKXthLmgoZS5HLGQuZXZlbnQpfSl9ZnVuY3Rpb24gZWIoYSxiKXthLm89T2JqZWN0LmFzc2lnbihhLm8sYik7Yj1hLmcubTtpZih2b2lkIDAhPT1iKXtiPU9iamVjdC5hc3NpZ24oe30sZmIoZ2IoYSxoYihhLHtjb250ZXh0OmJ9KSwhMCkpLHtzdXBwb3J0c0xvYWRlZEV2ZW50OiEhYS5nLmh8fCd2aWRlbyc9PWEuZy5nfSk7T2JqZWN0LmFzc2lnbihiLHtwYWdlVXJsOm51bGwsY29udGVudFVybDphLmcuQ30pO3ZhciBjPUwoYSwnc2Vzc2lvblN0YXJ0JywnbmF0aXZlJyxiKTthLmkucHVzaChjKTthLmwuZm9yRWFjaChmdW5jdGlvbihkKXt2YXIgZT1iYihjKTtjYihhLGUsZCk7YS5oKGQuRyxlKX0sYSk7aWIoYSl9fQpmdW5jdGlvbiBjYihhLGIsYyl7Yy5VJiYoYi5kYXRhLnZlcmlmaWNhdGlvblBhcmFtZXRlcnM9YS5vW2MuVV0pO2MuUiYmKGM9YS5nLnYuZ2V0KGMuUikpJiYoYi5kYXRhLnZlcmlmaWNhdGlvblBhcmFtZXRlcnM9Yy52ZXJpZmljYXRpb25QYXJhbWV0ZXJzLGIuZGF0YS5jb250ZXh0LmFjY2Vzc01vZGU9Yy5hY2Nlc3NNb2RlLCdmdWxsJz09PWMuYWNjZXNzTW9kZSYmKGEuZy5qJiYoYi5kYXRhLmNvbnRleHQudmlkZW9FbGVtZW50PWEuZy5qKSxhLmcuaSYmKGIuZGF0YS5jb250ZXh0LnNsb3RFbGVtZW50PWEuZy5pKSkpfWZ1bmN0aW9uIGpiKGEpe3ZhciBiPUwoYSwnc2Vzc2lvbkZpbmlzaCcsJ25hdGl2ZScpO2EuaS5wdXNoKGIpO2EubC5mb3JFYWNoKGZ1bmN0aW9uKGMpe2EuaChjLkcsYi5ldmVudCl9KX1WYS5wcm90b3R5cGUuaD1mdW5jdGlvbihhKXt2YXIgYj13LmFwcGx5KDEsYXJndW1lbnRzKTt0cnl7YS5hcHBseShudWxsLHEoYikpfWNhdGNoKGMpe1VhKGMpfX07CmZ1bmN0aW9uIGtiKGEsYil7dmFyIGM9KGM9YS5nLkspP0FhKGMpOm51bGw7Yz1nYihhLGhiKGEsYykpO1lhKGEsTChhLCdpbXByZXNzaW9uJyxiLGMpKX1mdW5jdGlvbiBsYihhLGIsYyl7aWYoYS5nLmh8fCdkaXNwbGF5JyE9YS5nLmcpYj1MKGEsJ2xvYWRlZCcsYixnYihhLGhiKGEsdm9pZCAwPT09Yz9udWxsOmMpKSksWWEoYSxiKX0KZnVuY3Rpb24gbWIoYSxiLGMsZCl7J3N0YXJ0JyE9PWImJid2b2x1bWVDaGFuZ2UnIT09Ynx8bnVsbCE9KGQmJmQuZGV2aWNlVm9sdW1lKXx8KGQuZGV2aWNlVm9sdW1lPWEuZy5EKTtpZihkJiYoJ3N0YXJ0Jz09PWJ8fCd2b2x1bWVDaGFuZ2UnPT09Yikpe3ZhciBlPWQudmlkZW9QbGF5ZXJWb2x1bWUsZj1kLm1lZGlhUGxheWVyVm9sdW1lO251bGwhPWU/KE9iamVjdC5hc3NpZ24oZCx7bWVkaWFQbGF5ZXJWb2x1bWU6ZX0pLGEuZy5KPWUpOm51bGwhPWYmJihPYmplY3QuYXNzaWduKGQse3ZpZGVvUGxheWVyVm9sdW1lOmZ9KSxhLmcuSj1mKX1ZYShhLEwoYSxiLGMsZCkpfQpmdW5jdGlvbiBpYihhKXt2YXIgYj1hLm0uZmlsdGVyKGZ1bmN0aW9uKGYpe3JldHVybiBPYmplY3QudmFsdWVzKHkpLmluY2x1ZGVzKGYuZXZlbnQudHlwZSkmJid2aWRlbyc9PWEuZy5nJiZmLm9yaWdpbj09PWEuZy5vfHwnbG9hZGVkJz09Zi5ldmVudC50eXBlJiYnZGlzcGxheSc9PWEuZy5nJiZmLm9yaWdpbj09PWEuZy51PyEwOiExfSkubWFwKGZ1bmN0aW9uKGYpe3JldHVybiBmLmV2ZW50fSksYz1hLmcuYWRTZXNzaW9uSWR8fCcnLGQ9e307Yj1wKGIpO2Zvcih2YXIgZT1iLm5leHQoKTshZS5kb25lO2Q9e0Y6ZC5GfSxlPWIubmV4dCgpKXtkLkY9ZS52YWx1ZTtkLkYuYWRTZXNzaW9uSWR8fChkLkYuYWRTZXNzaW9uSWQ9Yyk7aWYoJ2xvYWRlZCc9PWQuRi50eXBlKXtpZighYS5nLmgmJidkaXNwbGF5Jz09YS5nLmcpY29udGludWU7ZC5GLmRhdGE9Z2IoYSxoYihhLGQuRi5kYXRhKSl9YS5qLmZpbHRlcihmdW5jdGlvbihmKXtyZXR1cm4gZnVuY3Rpb24oZyl7cmV0dXJuIGcudHlwZT09PQpmLkYudHlwZX19KGQpKS5mb3JFYWNoKGZ1bmN0aW9uKGYpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gZy5HKGYuRil9fShkKSl9fWZ1bmN0aW9uIG5iKGEsYixjKXthOntjPW5ldyBTZXQoYyk7YT1wKGEubS5jb25jYXQoYS5pKSk7Zm9yKHZhciBkPWEubmV4dCgpOyFkLmRvbmU7ZD1hLm5leHQoKSlpZihkPWQudmFsdWUsYy5oYXMoZC5ldmVudC50eXBlKSYmZC5vcmlnaW4hPWIpe2I9ITA7YnJlYWsgYX1iPSExfXJldHVybiBiPyhLKCdFdmVudCBvd25lciBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhZnRlciBpdHMgZXZlbnRzIGhhdmUgYWxyZWFkeSBiZWVuIHB1Ymxpc2hlZC4nKSwhMSk6ITB9ZnVuY3Rpb24gb2IoYSxiKXtuYihhLGIsT2JqZWN0LnZhbHVlcyh5KSkmJnBiKGEsYikmJihhLmcubz1iKX1mdW5jdGlvbiBxYihhLGIpe25iKGEsYixbJ2ltcHJlc3Npb24nXSkmJnJiKGEsYikmJihhLmcudT1iKX0KZnVuY3Rpb24gcmIoYSxiKXt2YXIgYz1hLmcudTtyZXR1cm4nbm9uZSchPWMmJmMhPWI/KEsoJ0ltcHJlc3Npb24gZXZlbnQgaXMgb3duZWQgYnkgJysoYS5nLnUrJywgbm90ICcpKyhiKycuJykpLCExKTohMH1mdW5jdGlvbiBwYihhLGIpe3ZhciBjPWEuZy5vO3JldHVybidub25lJyE9YyYmYyE9Yj8oSygnTWVkaWEgZXZlbnRzIGFyZSBvd25lZCBieSAnKyhhLmcubysnLCBub3QgJytiKycuJykpLCExKTohMH1mdW5jdGlvbiBnYihhLGIsYyl7Yz12b2lkIDA9PT1jPyExOmM7Yj1PYmplY3QuYXNzaWduKHt9LGIpO2EuZy5nJiZPYmplY3QuYXNzaWduKGIse21lZGlhVHlwZTphLmcuZ30pO2EuZy5oJiYoY3x8J2RlZmluZWRCeUphdmFTY3JpcHQnIT09YS5nLmgpJiZPYmplY3QuYXNzaWduKGIse2NyZWF0aXZlVHlwZTphLmcuaH0pO3JldHVybiBifWZ1bmN0aW9uIGZiKGEpe3ZhciBiPU5hKCkuZztyZXR1cm4gYj9PYmplY3QuYXNzaWduKHt9LGEse2xhc3RBY3Rpdml0eTpifSk6YX0KZnVuY3Rpb24gaGIoYSxiKXtyZXR1cm4gYS5nLmw/T2JqZWN0LmFzc2lnbih7fSxiLHtpbXByZXNzaW9uVHlwZTphLmcubH0pOmJ9ZnVuY3Rpb24gTChhLGIsYyxkKXtyZXR1cm4gbmV3IFNhKHthZFNlc3Npb25JZDphLmcuYWRTZXNzaW9uSWR8fCcnLHRpbWVzdGFtcDoobmV3IERhdGUpLmdldFRpbWUoKSx0eXBlOmIsZGF0YTpkfSxjKX1mdW5jdGlvbiBiYihhKXthPWEuZXZlbnQ7dmFyIGI9YS5kYXRhP09iamVjdC5hc3NpZ24oe30sYS5kYXRhKTp2b2lkIDA7J3Nlc3Npb25TdGFydCc9PT1hLnR5cGUmJihiLmNvbnRleHQ9T2JqZWN0LmFzc2lnbih7fSxiLmNvbnRleHQpKTtyZXR1cm57YWRTZXNzaW9uSWQ6YS5hZFNlc3Npb25JZCx0aW1lc3RhbXA6YS50aW1lc3RhbXAsdHlwZTphLnR5cGUsZGF0YTpifX07ZnVuY3Rpb24gc2IoYSxiLGMpe3RoaXMuaD1hO3RoaXMuaT1iO3RoaXMuZz1jfQpmdW5jdGlvbiBNKGEsYixjKXsnY29udGFpbmVyJz09PWImJnZvaWQgMCE9PWEuZy5MJiZ2b2lkIDAhPT1hLmcmJm51bGwhPWEuZy5hZFNlc3Npb25JZCYmKGEuZy5PPUthKGEuaSxhLmcuTCxhLmcuQSxhLmcuYWRTZXNzaW9uSWQsITAsYS5nLk0pKTtiPWEuZzt2YXIgZD1iLk8sZT1iLlA7aWYoZClpZihlKXtiPW5ldyBHO3ZhciBmPWQucyxnPWQuZyxoPWQuaCxrPWUuZyxsPWUuaDtmJiZnJiZoJiZrJiZsJiYoQ2EoYixmKSxiLnU9bmV3IHooZywhMSksYi5EPW5ldyB6KGgsITEpLGIubz1PYmplY3QuYXNzaWduKFtdLGQubyksYi5qPU9iamVjdC5hc3NpZ24oW10sZC5qKSxiLmw9T2JqZWN0LmFzc2lnbihbXSxkLmwpLGIudj1PYmplY3QuYXNzaWduKFtdLGQudiksYi5pPU9iamVjdC5hc3NpZ24oW10sZS5pLGQuaSksZD1iLnUueCxlPWIudS55LGs9bmV3IHooaywhMSksbD1uZXcgeihsLCExKSx3YShrLGQsZSksd2EobCxkLGUpLGIuZz1rLGIuaD1FYShsLGgpLEdhKGIpKX1lbHNlIGI9CmQ7ZWxzZSBiPW51bGw7aD1hLmcuSztpZihiJiYhYi5OKGgpfHxjKWg9QWEoYiksYyYmKGguYWRWaWV3LnJlYXNvbnM9aC5hZFZpZXcucmVhc29uc3x8W2NdKSxjPWEuaCwnYXVkaW8nIT1jLmcuaCYmWWEoYyxMKGMsJ2dlb21ldHJ5Q2hhbmdlJywnbmF0aXZlJyxoKSksYS5nLks9Yn07ZnVuY3Rpb24gdGIoKXt2YXIgYTt0aGlzLmc9YT12b2lkIDA9PT1hP29taWRHbG9iYWw6YX10Yi5wcm90b3R5cGUuc2V0SW50ZXJ2YWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdWIodGhpcywnc2V0SW50ZXJ2YWwnKShhLGIpfTt0Yi5wcm90b3R5cGUuY2xlYXJJbnRlcnZhbD1mdW5jdGlvbihhKXt1Yih0aGlzLCdjbGVhckludGVydmFsJykoYSl9O2Z1bmN0aW9uIHZiKGEsYil7dWIoYSwnY2xlYXJUaW1lb3V0JykoYil9ZnVuY3Rpb24gdWIoYSxiKXtyZXR1cm4gYS5nJiZhLmdbYl0/YS5nW2JdOndiKGEsYil9CmZ1bmN0aW9uIHhiKGEsYixjLGQpe2lmKGEuZy5kb2N1bWVudCYmYS5nLmRvY3VtZW50LmJvZHkpe3ZhciBlPWEuZy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtlLndpZHRoPTE7ZS5oZWlnaHQ9MTtlLnN0eWxlLmRpc3BsYXk9J25vbmUnO2Uuc3JjPWI7YyYmZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxmdW5jdGlvbigpe3JldHVybiBjKCl9KTtkJiZlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxmdW5jdGlvbigpe3JldHVybiBkKCl9KTthLmcuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKX1lbHNlIHdiKGEsJ3NlbmRVcmwnKShiLGMsZCl9ZnVuY3Rpb24gd2IoYSxiKXtpZihhLmcmJmEuZy5vbWlkTmF0aXZlJiZhLmcub21pZE5hdGl2ZVtiXSlyZXR1cm4gYS5nLm9taWROYXRpdmVbYl0uYmluZChhLmcub21pZE5hdGl2ZSk7dGhyb3cgRXJyb3IoJ05hdGl2ZSBpbnRlcmZhY2UgbWV0aG9kICInK2IrJyIgbm90IGZvdW5kLicpO307ZnVuY3Rpb24gTihhKXtyZXR1cm4nb2JqZWN0Jz09PXR5cGVvZiBhfWZ1bmN0aW9uIE8oYSl7cmV0dXJuJ251bWJlcic9PT10eXBlb2YgYSYmIWlzTmFOKGEpJiYwPD1hfWZ1bmN0aW9uIFAoYSl7cmV0dXJuJ3N0cmluZyc9PT10eXBlb2YgYX1mdW5jdGlvbiBRKGEsYil7cmV0dXJuIFAoYSkmJi0xIT09T2JqZWN0LnZhbHVlcyhiKS5pbmRleE9mKGEpfWZ1bmN0aW9uIHliKGEpe3JldHVybiEoIWF8fCFhLnRhZ05hbWV8fCdpZnJhbWUnIT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpfTtmdW5jdGlvbiBTKGEsYixjLGQsZSl7dGhpcy5qPWE7dGhpcy5iYT1iO3RoaXMuTD1jO3RoaXMuaT1kO3RoaXMuUD1lO3RoaXMuaD1udWxsO3RoaXMuZz10aGlzLm09dGhpcy5EPXZvaWQgMDt0aGlzLk89ITA7dGhpcy5KPXZvaWQgMDt6Yih0aGlzKX0KZnVuY3Rpb24gemIoYSl7aWYoIWEuaCl7dmFyIGI7YTp7aWYoKGI9YS5qLmRvY3VtZW50KSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYoYj1iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29taWQtZWxlbWVudCcpKSl7aWYoMT09Yi5sZW5ndGgpe2I9YlswXTticmVhayBhfTE8Yi5sZW5ndGgmJmEuTyYmKGRiKGEuTCwnZ2VuZXJpYycsIk1vcmUgdGhhbiBvbmUgZWxlbWVudCB3aXRoICdvbWlkLWVsZW1lbnQnIGNsYXNzIG5hbWUuIiksYS5PPSExKX1iPW51bGx9aWYoYiYmYi50YWdOYW1lJiYndmlkZW8nPT09Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCkpYS5pLmo9YjtlbHNlIGlmKGImJmIudGFnTmFtZSlhLmkuaT1iO2Vsc2UgcmV0dXJuO0FiKGEpfX1mdW5jdGlvbiBBYihhKXthLmkuaj8oYS5oPWEuaS5qLGEubygpKTphLmkuaSYmKGEuaD1hLmkuaSx5YihhLmgpP2EuaS5zJiZhLm8oKTphLm8oKSl9CmZ1bmN0aW9uIEJiKGEpe2EuZyYmKHliKGEuaCk/YS5pLnMmJihhLksoKSxDYihhKSk6KGEuSygpLENiKGEpKSl9Uy5wcm90b3R5cGUuQT1mdW5jdGlvbigpe3RoaXMuSiYmKHRoaXMuai5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJyx0aGlzLkopLHRoaXMuSj12b2lkIDApfTtTLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBDYihhKXthLkQmJihhLmkuUD1hLkQsTShhLmJhLCdjcmVhdGl2ZScpKX1mdW5jdGlvbiBEYihhKXtpZihhLmcmJmEuaS5zKXt2YXIgYj1uZXcgeihhLmkucywhMSk7d2EoYixhLmcueCxhLmcueSk7Yi5jbGlwc1RvQm91bmRzPSEwO3JldHVybiBifX07ZnVuY3Rpb24gVChhLGIsYyxkLGUsZil7Uy5jYWxsKHRoaXMsYSxjLGQsZSxmKTt0aGlzLnM9Yjt0aGlzLmw9dm9pZCAwfXYoVCxTKTtULnByb3RvdHlwZS5BPWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5sJiYodGhpcy5QLmNsZWFySW50ZXJ2YWwodGhpcy5sKSx0aGlzLmw9dm9pZCAwKTtTLnByb3RvdHlwZS5BLmNhbGwodGhpcyl9O1QucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO1MucHJvdG90eXBlLm8uY2FsbCh0aGlzKTtudWxsPT10aGlzLmg/dGhpcy5sPXZvaWQgMDp2b2lkIDA9PT10aGlzLmwmJih0aGlzLmw9dGhpcy5QLnNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIEViKGEpfSwyMDApLEViKHRoaXMpKX07ClQucHJvdG90eXBlLks9ZnVuY3Rpb24oKXtpZih0aGlzLm0pe3ZhciBhPURiKHRoaXMpO2lmKGEpe3RoaXMuZy5pc0NyZWF0aXZlPSExO2EuaXNDcmVhdGl2ZT0hMDtmb3IodmFyIGI9ITEsYz0wO2M8dGhpcy5nLmNoaWxkVmlld3MubGVuZ3RoO2MrKylpZih0aGlzLmcuY2hpbGRWaWV3c1tjXS5pc0NyZWF0aXZlKXt0aGlzLmcuY2hpbGRWaWV3c1tjXT1hO2I9ITA7YnJlYWt9Ynx8dGhpcy5nLmNoaWxkVmlld3MucHVzaChhKX1lbHNlIHRoaXMuZy5pc0NyZWF0aXZlPSEwO3RoaXMuRD1LYSh0aGlzLnMsdGhpcy5tLHRoaXMuaS5BLHRoaXMuaS5hZFNlc3Npb25JZCx0aGlzLkkoKSl9fTtULnByb3RvdHlwZS5JPWZ1bmN0aW9uKCl7cmV0dXJuITB9OwpmdW5jdGlvbiBFYihhKXtpZih2b2lkIDAhPT1hLmwpe2I6e3RyeXt2YXIgYj1hLmoudG9wO3ZhciBjPTA8PWIuaW5uZXJIZWlnaHQmJjA8PWIuaW5uZXJXaWR0aDticmVhayBifWNhdGNoKGQpe31jPSExfWM/KGM9YS5qLnRvcCxjPW5ldyB6KG5ldyBQYShjLmlubmVyV2lkdGgsYy5pbm5lckhlaWdodCksITEpKTpjPW5ldyB6KG5ldyBQYSgwLDApLCExKTtiPWEuaC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihudWxsPT1iLnh8fGlzTmFOKGIueCkpYi54PWIubGVmdDtpZihudWxsPT1iLnl8fGlzTmFOKGIueSkpYi55PWIudG9wO2I9bmV3IHooYiwhMSk7Yy5OKGEubSkmJmIuTihhLmcpfHwoYS5nPWIsYS5nLmNsaXBzVG9Cb3VuZHM9ITAsYS5tPWMsYS5tLmNoaWxkVmlld3MucHVzaChhLmcpLEJiKGEpKX19O2Z1bmN0aW9uIFUoYSxiLGMsZCxlLGYpe1MuY2FsbCh0aGlzLGEsYyxkLGUsZik7dGhpcy52PXRoaXMucz10aGlzLnU9dGhpcy5sPXZvaWQgMDt0aGlzLk09ITE7dGhpcy5DPXZvaWQgMH12KFUsUyk7VS5wcm90b3R5cGUuQT1mdW5jdGlvbigpe3RoaXMubCYmdGhpcy5sLmRpc2Nvbm5lY3QoKTtGYih0aGlzKTtTLnByb3RvdHlwZS5BLmNhbGwodGhpcyl9O1UucHJvdG90eXBlLm89ZnVuY3Rpb24oKXtTLnByb3RvdHlwZS5vLmNhbGwodGhpcyk7aWYodGhpcy5oJiYodGhpcy5sfHwodGhpcy5sPUdiKHRoaXMpKSxIYih0aGlzKSxJYih0aGlzLmgpJiZKYih0aGlzKSwnYmFja2dyb3VuZGVkJz09PXRoaXMuaS5BKSl7dmFyIGE9S2IobmV3IFBhKDAsMCkpO3RoaXMuQz10aGlzLmc9dGhpcy5tPWE7QmIodGhpcyl9fTsKVS5wcm90b3R5cGUuSz1mdW5jdGlvbigpe2lmKHRoaXMuZyYmdGhpcy5DKXt2YXIgYT1EYih0aGlzKTtpZihhKXt2YXIgYj1hO3ZhciBjPXRoaXMuQzt2YXIgZD1NYXRoLm1heChhLngsYy54KTt2YXIgZT1NYXRoLm1heChhLnksYy55KSxmPU1hdGgubWluKGEuZW5kWCxjLmVuZFgpO2E9TWF0aC5taW4oYS5lbmRZLGMuZW5kWSk7Zjw9ZHx8YTw9ZT9kPW51bGw6KGM9e30sZD1uZXcgeigoYy54PWQsYy55PWUsYy53aWR0aD1NYXRoLmFicyhmLWQpLGMuaGVpZ2h0PU1hdGguYWJzKGEtZSksYyksITEpKTtkfHwoZD1uZXcgeih7eDowLHk6MCx3aWR0aDowLGhlaWdodDowfSwhMSkpfWVsc2UgYj10aGlzLmcsZD10aGlzLkM7ZT1uZXcgRzt0aGlzLm0mJkNhKGUsdGhpcy5tKTtlLmc9YjtlLmg9ZDtHYShlKTt0aGlzLk0/RChlLmcpP0goZSwnaGlkZGVuJyk6MTAwPT09ZS5BfHxIKGUsJ2NsaXBwZWQnKTpIKGUsJ3ZpZXdwb3J0Jyk7dGhpcy5EPWV9fTtVLnByb3RvdHlwZS5JPWZ1bmN0aW9uKCl7cmV0dXJuITB9OwpmdW5jdGlvbiBGYihhKXthLnUmJihhLnUuZGlzY29ubmVjdCgpLGEudT12b2lkIDApO2EucyYmKGEucy5kaXNjb25uZWN0KCksYS5zPXZvaWQgMCk7YS52JiYoKDAsYS5qLnJlbW92ZUV2ZW50TGlzdGVuZXIpKCdyZXNpemUnLGEudiksYS52PXZvaWQgMCl9ZnVuY3Rpb24gSGIoYSl7YS5sJiZhLmgmJihhLmwudW5vYnNlcnZlKGEuaCksYS5sLm9ic2VydmUoYS5oKSl9ZnVuY3Rpb24gSWIoYSl7YT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiAwPT1hLndpZHRofHwwPT1hLmhlaWdodH0KZnVuY3Rpb24gR2IoYSl7cmV0dXJuIG5ldyBhLmouSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYil7dHJ5e2lmKGIubGVuZ3RoKXtmb3IodmFyIGMsZD1iWzBdLGU9MTtlPGIubGVuZ3RoO2UrKyliW2VdLnRpbWU+ZC50aW1lJiYoZD1iW2VdKTtjPWQ7YS5tPUtiKGMucm9vdEJvdW5kcyk7YS5nPUtiKGMuYm91bmRpbmdDbGllbnRSZWN0KTthLkM9S2IoYy5pbnRlcnNlY3Rpb25SZWN0KTthLk09ISFjLmlzSW50ZXJzZWN0aW5nO0JiKGEpfX1jYXRjaChmKXthLkEoKSxkYihhLkwsJ2dlbmVyaWMnLCdQcm9ibGVtIGhhbmRsaW5nIEludGVyc2VjdGlvbk9ic2VydmVyIGNhbGxiYWNrOiAnK2YubWVzc2FnZSl9fSx7cm9vdDpudWxsLHJvb3RNYXJnaW46JzBweCcsdGhyZXNob2xkOlswLC4xLC4yLC4zLC40LC41LC42LC43LC44LC45LDFdfSl9CmZ1bmN0aW9uIEpiKGEpe2Euai5SZXNpemVPYnNlcnZlcj9hLnV8fChhLnU9TGIoYSxmdW5jdGlvbigpe3JldHVybiBNYihhKX0pLGEudS5vYnNlcnZlKGEuaCkpOihhLnZ8fChhLnY9ZnVuY3Rpb24oKXtyZXR1cm4gTWIoYSl9LCgwLGEuai5hZGRFdmVudExpc3RlbmVyKSgncmVzaXplJyxhLnYpKSxhLnN8fChhLnM9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKXtyZXR1cm4gTWIoYSl9KSxhLnMub2JzZXJ2ZShhLmgse2NoaWxkTGlzdDohMSxhdHRyaWJ1dGVzOiEwLHN1YnRyZWU6ITF9KSkpfWZ1bmN0aW9uIE1iKGEpe2EuaCYmIUliKGEuaCkmJihIYihhKSxGYihhKSl9ZnVuY3Rpb24gTGIoYSxiKXtyZXR1cm4gbmV3IGEuai5SZXNpemVPYnNlcnZlcihiKX1mdW5jdGlvbiBLYihhKXtpZihhJiZudWxsIT09YS54JiZudWxsIT09YS55JiZudWxsIT09YS53aWR0aCYmbnVsbCE9PWEuaGVpZ2h0KXJldHVybiBuZXcgeihhLCExKX07ZnVuY3Rpb24gTmIoYSl7aWYoJ29iamVjdCc9PT10eXBlb2YgYSYmJ29iamVjdCc9PT10eXBlb2YgYS53ZWJPU1N5c3RlbSlyZXR1cm4gYS53ZWJPU1N5c3RlbX1mdW5jdGlvbiBPYihhKXtpZignb2JqZWN0Jz09PXR5cGVvZiBhJiYnb2JqZWN0Jz09PXR5cGVvZiBhLnRpemVuKXJldHVybiBhLnRpemVufWZ1bmN0aW9uIFBiKGEpe3JldHVybidvYmplY3QnPT09dHlwZW9mIE9iKGEpfTtmdW5jdGlvbiBRYihhLGIpe3RoaXMuaD1hO3RoaXMuZz1ifTtmdW5jdGlvbiBTYigpe3JldHVybid4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZyxmdW5jdGlvbihhKXt2YXIgYj0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuJ3knPT09YT8oYiYzfDgpLnRvU3RyaW5nKDE2KTpiLnRvU3RyaW5nKDE2KX0pfTtmdW5jdGlvbiBUYihhLGIpe3ZhciBjPXZvaWQgMD09PWM/SjpjO3RoaXMuaj1hO3RoaXMuZz1jO3RoaXMuaT1iO3RoaXMuaD1bXX0KZnVuY3Rpb24gVWIoYSl7aWYoIWEuZ3x8IWEuZy5kb2N1bWVudCl0aHJvdyBFcnJvcignT01JRCBTZXJ2aWNlIFNjcmlwdCBpcyBub3QgcnVubmluZyB3aXRoaW4gYSB3aW5kb3cuJyk7dmFyIGI9YS5oO2EuaD1bXTtiLmZvckVhY2goZnVuY3Rpb24oYyl7dHJ5e3ZhciBkPWEuaS5JPydsaW1pdGVkJzonZnVsbCcsZT1RKGMuYWNjZXNzTW9kZSxyYSk/Yy5hY2Nlc3NNb2RlOm51bGw7dmFyIGY9ZT8nZnVsbCc9PWUmJidsaW1pdGVkJz09ZD9kOidkb21haW4nPT1lPydsaW1pdGVkJzplOmQ7Yy5hY2Nlc3NNb2RlPWY7YTp7dmFyIGc9Yy5yZXNvdXJjZVVybCxoPWEuZy5sb2NhdGlvbi5vcmlnaW47dHJ5e3ZhciBrPW5ldyBVUkwoZyxoKTticmVhayBhfWNhdGNoKEkpe310cnl7az1uZXcgVVJMKGcpO2JyZWFrIGF9Y2F0Y2goSSl7fWs9bnVsbH1pZihkPWspe3ZhciBsPVNiKCk7VmIoYSxsLGQsZik7dmFyIG09Yy52ZW5kb3JLZXksdD1jLnZlcmlmaWNhdGlvblBhcmFtZXRlcnM7bT12b2lkIDA9PT0KbT8nJzptO3Q9dm9pZCAwPT09dD8nJzp0O20mJidzdHJpbmcnPT09dHlwZW9mIG0mJicnIT09bSYmdCYmJ3N0cmluZyc9PT10eXBlb2YgdCYmJychPT10JiYoYS5qLm9bbV09dCk7YS5pLnYuc2V0KGwsYyl9fWNhdGNoKEkpe1VhKCdPTUlEIHZlcmlmaWNhdGlvbiBzY3JpcHQgJytjLnJlc291cmNlVXJsKycgZmFpbGVkIHRvIGxvYWQ6ICcrSSl9fSl9CmZ1bmN0aW9uIFZiKGEsYixjLGQpe3ZhciBlPWEuZy5kb2N1bWVudCxmPWUuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7Zi5pZD0nb21pZC12ZXJpZmljYXRpb24tc2NyaXB0LWZyYW1lLScrYjtmLnN0eWxlLmRpc3BsYXk9J25vbmUnO2lmKCdmdWxsJz09ZCl7dmFyIGc9ZnVuY3Rpb24oKXt2YXIgaD1mLmNvbnRlbnRXaW5kb3c7aC5vbWlkVmVyaWZpY2F0aW9uUHJvcGVydGllcz17c2VydmljZVdpbmRvdzphLmcsaW5qZWN0aW9uU291cmNlOidhcHAnLGluamVjdGlvbklkOmJ9O2g9aC5kb2N1bWVudDt2YXIgaz1oLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO2suc3JjPWMuaHJlZjtoLmhlYWQuYXBwZW5kQ2hpbGQoayk7Zi5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJyxnKX07Zi5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxnKX1lbHNlJ2xpbWl0ZWQnPT1kP2Yuc3JjZG9jPSI8aHRtbD48aGVhZD5cbjxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiPndpbmRvd1snb21pZFZlcmlmaWNhdGlvblByb3BlcnRpZXMnXSA9IHtcbidzZXJ2aWNlV2luZG93Jzogd2luZG93LnBhcmVudCxcbidpbmplY3Rpb25Tb3VyY2UnOiAnYXBwJyxcbidpbmplY3Rpb25JZCc6ICciKwooYisnXCcsXG59O1x4M2Mvc2NyaXB0PlxuPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJykrYy5ocmVmKyciPlx4M2Mvc2NyaXB0PlxuPC9oZWFkPjxib2R5PjwvYm9keT48L2h0bWw+JzonZG9tYWluJz09ZCYmKGYuc3JjPVdiKGEsYixjKS5ocmVmKTtbJ2RvbWFpbicsJ2xpbWl0ZWQnXS5pbmNsdWRlcyhkKSYmKGYuc2FuZGJveD0nYWxsb3ctc2NyaXB0cycpO2UuYm9keS5hcHBlbmRDaGlsZChmKTtOYSgpLmguc2V0KGIsZil9CmZ1bmN0aW9uIFdiKGEsYixjKXt2YXIgZD0nLy53ZWxsLWtub3duL29taWQvb21sb2FkZXItdjEuaHRtbCMnOyhuZXcgTWFwKFtbJ3ZlcmlmaWNhdGlvblNjcmlwdFVybCcsYy5ocmVmXSxbJ2luamVjdGlvbklkJyxiXV0pKS5mb3JFYWNoKGZ1bmN0aW9uKGUsZil7ZCs9ZW5jb2RlVVJJQ29tcG9uZW50KGYpKyc9JytlbmNvZGVVUklDb21wb25lbnQoZSkrJyYnfSk7Yj1udWxsO3RyeXtiPW5ldyBVUkwoZCxhLmcucGFyZW50LmxvY2F0aW9uLm9yaWdpbil9Y2F0Y2goZSl7dGhyb3cgRXJyb3IoJ09NSUQgU2VydmljZSBTY3JpcHQgY2Fubm90IGFjY2VzcyB0aGUgcGFyZW50IHdpbmRvdy4nKTt9cmV0dXJuIGJ9O2Z1bmN0aW9uIFhiKGEsYixjLGQsZSxmKXt2YXIgZz10aGlzO3RoaXMuZz1hO3RoaXMuaD1iO3RoaXMuaj1jO3RoaXMuaT1kO3RoaXMubD1lO3RoaXMucz1mO3RoaXMubT0hMTtZYih0aGlzLGZ1bmN0aW9uKGgpe2lmKCdzZXNzaW9uU3RhcnQnPT09aC50eXBlKXtnLm09ITA7dHJ5e1ViKGcubCl9Y2F0Y2goayl7SyhrLm1lc3NhZ2UpfX0nc2Vzc2lvbkZpbmlzaCc9PT1oLnR5cGUmJihnLm09ITEpfSl9ZnVuY3Rpb24gWWIoYSxiLGMsZCl7YWIoYS5oLGIsYyxkKX1uPVhiLnByb3RvdHlwZTtuLnNldFNsb3RFbGVtZW50PWZ1bmN0aW9uKGEpe2EmJmEudGFnTmFtZT8odGhpcy5nLmk9YSx0aGlzLmkmJkFiKHRoaXMuaSkpOksoJ3NldFNsb3RFbGVtZW50IGNhbGxlZCB3aXRoIGEgbm9uLUhUTUxFbGVtZW50LiAgSXQgd2lsbCBiZSBpZ25vcmVkLicpfTtuLnNldEVsZW1lbnRCb3VuZHM9ZnVuY3Rpb24oYSl7dGhpcy5nLnM9YTt0aGlzLmkmJkFiKHRoaXMuaSk7dGhpcy5pJiZCYih0aGlzLmkpfTsKbi5lcnJvcj1mdW5jdGlvbihhLGIpe2RiKHRoaXMuaCxhLGIpfTtuLmluamVjdFZlcmlmaWNhdGlvblNjcmlwdFJlc291cmNlcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmw7Yi5oLnB1c2guYXBwbHkoYi5oLHEoYSkpO2lmKHRoaXMubSl0cnl7VWIodGhpcy5sKX1jYXRjaChjKXtLKGMubWVzc2FnZSl9fTtuLnNldENyZWF0aXZlVHlwZT1mdW5jdGlvbihhLGIpe2I9dm9pZCAwPT09Yj9udWxsOmI7aWYoIXRoaXMuZy5nfHx0aGlzLmcuaCl0aGlzLmcuaD1hLCd2aWRlbyc9PWF8fCdhdWRpbyc9PWE/dGhpcy5nLmc9J3ZpZGVvJzonaHRtbERpc3BsYXknPT1hfHwnbmF0aXZlRGlzcGxheSc9PWE/dGhpcy5nLmc9J2Rpc3BsYXknOidkZWZpbmVkQnlKYXZhU2NyaXB0Jz09YSYmYiYmKHRoaXMuZy5nPSdub25lJz09Yj8nZGlzcGxheSc6J3ZpZGVvJyl9O24uc2V0SW1wcmVzc2lvblR5cGU9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZy5nfHx0aGlzLmcuaCl0aGlzLmcubD1hfTsKbi5zZXRDbGllbnRJbmZvPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmcubXx8e307ZC5vbWlkSnNJbmZvPU9iamVjdC5hc3NpZ24oe30sZC5vbWlkSnNJbmZvLHtzZXNzaW9uQ2xpZW50VmVyc2lvbjphLHBhcnRuZXJOYW1lOmIscGFydG5lclZlcnNpb246Y30pO3RoaXMuZy5tPWQ7cmV0dXJuIHRoaXMuZy5tLm9taWRKc0luZm8uc2VydmljZVZlcnNpb259O2Z1bmN0aW9uIFpiKGEsYil7aWYoIWIpcmV0dXJuIGEuZztmb3IodmFyIGM9cChhLmgudmFsdWVzKCkpLGQ9Yy5uZXh0KCk7IWQuZG9uZTtkPWMubmV4dCgpKWlmKGQ9ZC52YWx1ZSxkLmcudi5oYXMoYikpcmV0dXJuIGQ7cmV0dXJuIGEuZ31mdW5jdGlvbiBWKGEsYil7cmV0dXJuIG51bGw9PWI/YS5nOmEuaC5nZXQoYil8fGEuZ31mdW5jdGlvbiAkYihhKXt2YXIgYj1uZXcgUWEsYz1uZXcgVmEoYiksZD1uZXcgSWEsZT1uZXcgSmEsZj1uZXcgc2IoYyxlLGIpO2E9YS5pO3ZhciBnPW9taWRHbG9iYWw7ZD1nP2cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXImJihnLk11dGF0aW9uT2JzZXJ2ZXJ8fGcuUmVzaXplT2JzZXJ2ZXIpP25ldyBVKGcsZCxmLGMsYixhKTpuZXcgVChnLGUsZixjLGIsYSk6bnVsbDtyZXR1cm4gbmV3IFhiKGIsYyxmLGQsbmV3IFRiKGMsYiksbmV3IFFiKGMsYikpfTtmdW5jdGlvbiBhYyhhKXtyZXR1cm4gYSYmTihhKT9PYmplY3QuZW50cmllcyhhKS5yZWR1Y2UoZnVuY3Rpb24oYixjKXt2YXIgZD1wKGMpO2M9ZC5uZXh0KCkudmFsdWU7ZD1kLm5leHQoKS52YWx1ZTtyZXR1cm4gYiYmUChjKSYmbnVsbCE9ZCYmTihkKSYmUChkLnJlc291cmNlVXJsKX0sITApOiExfTtmdW5jdGlvbiBXKGEsYixjLGQpe3RoaXMuaD1hO3RoaXMubWV0aG9kPWI7dGhpcy52ZXJzaW9uPWM7dGhpcy5nPWR9ZnVuY3Rpb24gYmMoYSl7cmV0dXJuISFhJiZ2b2lkIDAhPT1hLm9taWRfbWVzc2FnZV9ndWlkJiZ2b2lkIDAhPT1hLm9taWRfbWVzc2FnZV9tZXRob2QmJnZvaWQgMCE9PWEub21pZF9tZXNzYWdlX3ZlcnNpb24mJidzdHJpbmcnPT09dHlwZW9mIGEub21pZF9tZXNzYWdlX2d1aWQmJidzdHJpbmcnPT09dHlwZW9mIGEub21pZF9tZXNzYWdlX21ldGhvZCYmJ3N0cmluZyc9PT10eXBlb2YgYS5vbWlkX21lc3NhZ2VfdmVyc2lvbiYmKHZvaWQgMD09PWEub21pZF9tZXNzYWdlX2FyZ3N8fHZvaWQgMCE9PWEub21pZF9tZXNzYWdlX2FyZ3MpfWZ1bmN0aW9uIGNjKGEpe3JldHVybiBuZXcgVyhhLm9taWRfbWVzc2FnZV9ndWlkLGEub21pZF9tZXNzYWdlX21ldGhvZCxhLm9taWRfbWVzc2FnZV92ZXJzaW9uLGEub21pZF9tZXNzYWdlX2FyZ3MpfQpmdW5jdGlvbiBkYyhhKXt2YXIgYj17fTtiPShiLm9taWRfbWVzc2FnZV9ndWlkPWEuaCxiLm9taWRfbWVzc2FnZV9tZXRob2Q9YS5tZXRob2QsYi5vbWlkX21lc3NhZ2VfdmVyc2lvbj1hLnZlcnNpb24sYik7dm9pZCAwIT09YS5nJiYoYi5vbWlkX21lc3NhZ2VfYXJncz1hLmcpO3JldHVybiBifTtmdW5jdGlvbiBlYyhhKXt0aGlzLmk9YX07ZnVuY3Rpb24gWChhKXt0aGlzLmk9YTt0aGlzLmhhbmRsZUV4cG9ydGVkTWVzc2FnZT1YLnByb3RvdHlwZS5qLmJpbmQodGhpcyl9dihYLGVjKTtYLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDA9PT1iP3RoaXMuaTpiO2lmKCFiKXRocm93IEVycm9yKCdNZXNzYWdlIGRlc3RpbmF0aW9uIG11c3QgYmUgZGVmaW5lZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB3aGVuIHNlbmRpbmcgdGhlIG1lc3NhZ2UuJyk7Yi5oYW5kbGVFeHBvcnRlZE1lc3NhZ2UoZGMoYSksdGhpcyl9O1gucHJvdG90eXBlLmo9ZnVuY3Rpb24oYSxiKXtiYyhhKSYmdGhpcy5nJiZ0aGlzLmcoY2MoYSksYil9O2Z1bmN0aW9uIGZjKGEpe3JldHVybiBnYyhhLCdTZXNzaW9uU2VydmljZS4nKX1mdW5jdGlvbiBnYyhhLGIpe3JldHVybihhPWEubWF0Y2gobmV3IFJlZ0V4cCgnXicrYisnKC4qKScpKSkmJmFbMV19O2Z1bmN0aW9uIGhjKGEsYil7dGhpcy5pPWI9dm9pZCAwPT09Yj9KOmI7dmFyIGM9dGhpczthLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLGZ1bmN0aW9uKGQpe2lmKCdvYmplY3QnPT09dHlwZW9mIGQuZGF0YSl7dmFyIGU9ZC5kYXRhO2JjKGUpJiZkLnNvdXJjZSYmYy5nJiZjLmcoY2MoZSksZC5zb3VyY2UpfX0pfXYoaGMsZWMpO2hjLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDA9PT1iP3RoaXMuaTpiO2lmKCFiKXRocm93IEVycm9yKCdNZXNzYWdlIGRlc3RpbmF0aW9uIG11c3QgYmUgZGVmaW5lZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB3aGVuIHNlbmRpbmcgdGhlIG1lc3NhZ2UuJyk7Yi5wb3N0TWVzc2FnZShkYyhhKSwnKicpfTtmdW5jdGlvbiBpYyhhLGIpe2I9dm9pZCAwPT09Yj97fTpiO3ZhciBjPUoud2Via2l0P0oud2Via2l0Lm1lc3NhZ2VIYW5kbGVycy5vbWlkSnNTZXNzaW9uU2VydmljZTpKLm9taWRKc1Nlc3Npb25TZXJ2aWNlO2lmKCFjKXJldHVybiExO2MucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoe21ldGhvZDphLGRhdGE6Yn0pKTtyZXR1cm4hMH07ZnVuY3Rpb24gamMoKXt0aGlzLmc9a2N9bj1qYy5wcm90b3R5cGU7bi5yZWdpc3RlclNlc3Npb25PYnNlcnZlcj1mdW5jdGlvbihhLGIpe1liKFYodGhpcy5nLGEpLGIpfTtuLnNldFNsb3RFbGVtZW50PWZ1bmN0aW9uKGEsYil7Vih0aGlzLmcsYSkuc2V0U2xvdEVsZW1lbnQoYil9O24uc2V0RWxlbWVudEJvdW5kcz1mdW5jdGlvbihhLGIpe1YodGhpcy5nLGEpLnNldEVsZW1lbnRCb3VuZHMoYil9OwpmdW5jdGlvbiBsYyhhLGIsYyxkLGUpe2U9dm9pZCAwPT09ZT9udWxsOmU7YT1WKGEuZyxiKTt2YXIgZj1hLmcubTtmLnNlc3Npb25Pd25lcnx8KGYuc2Vzc2lvbk93bmVyPWQ/J25hdGl2ZSc6J2phdmFzY3JpcHQnKTtkPyhiPWJ8fFNiKCksYS5nLmFkU2Vzc2lvbklkPWIsYy5jYW5NZWFzdXJlVmlzaWJpbGl0eT1hLmkuSSgpLFJhKGEuZyxjKSxlYihhLmgsZSksYS5pJiZ6YihhLmkpKTpiPyhSYShhLmcsYyksaWMoJ3N0YXJ0U2Vzc2lvbicse2FkU2Vzc2lvbklkOmJ9KXx8SygnT24gQXBwLCB0aGUgbmF0aXZlLWxheWVyIEpTIFNlc3Npb24gU2VydmljZSBtdXN0IGJlIGluaXRpYWxpemVkIGJlZm9yZSBzdGFydGluZyBhbiBhZCBzZXNzaW9uIHVzaW5nIHRoZSBKUyBBUEkuJykpOksoJ1Nlc3Npb24gY2xpZW50IG11c3QgYmUgdXBkYXRlZCB0byBzdGFydCBhbiBBcHAgc2Vzc2lvbiBmcm9tIEpTLicpfQpmdW5jdGlvbiBtYyhhLGIsYyl7Yz8oYj1WKGEuZyxiKSxhPWEuZyxhLmc9JGIoYSksamIoYi5oKSxiLmkuQSgpLGIubyYmKGIuby5zdG9wKCksYi5vPW51bGwpKTpiP2ljKCdmaW5pc2hTZXNzaW9uJyx7YWRTZXNzaW9uSWQ6Yn0pfHxLKCdPbiBBcHAsIHRoZSBuYXRpdmUtbGF5ZXIgSlMgU2Vzc2lvbiBTZXJ2aWNlIG11c3QgYmUgaW5pdGlhbGl6ZWQgYmVmb3JlIGZpbmlzaGluZyBhbiBhZCBzZXNzaW9uIHVzaW5nIHRoZSBKUyBBUEkuJyk6SygnU2Vzc2lvbiBjbGllbnQgbXVzdCBiZSB1cGRhdGVkIHRvIGZpbmlzaCBhbiBBcHAgc2Vzc2lvbiBmcm9tIEpTLicpfW4uZXJyb3I9ZnVuY3Rpb24oYSxiLGMpe1YodGhpcy5nLGEpLmVycm9yKGIsYyl9OwpmdW5jdGlvbiBZKGEsYixjLGQpe2E9VihhLmcsYik7J2ltcHJlc3Npb24nPT1jP3JiKGEuaCwnamF2YXNjcmlwdCcpJiYoa2IoYS5oLCdqYXZhc2NyaXB0JyksYS5pJiZ6YihhLmkpKTooJ2xvYWRlZCc9PWM/KGQ9dm9pZCAwPT09ZD9udWxsOmQscGIoYS5oLCdqYXZhc2NyaXB0JykmJmxiKGEuaCwnamF2YXNjcmlwdCcsZCkpOnBiKGEuaCwnamF2YXNjcmlwdCcpJiZtYihhLmgsYywnamF2YXNjcmlwdCcsZCksWydsb2FkZWQnLCdzdGFydCddLmluY2x1ZGVzKGMpJiZhLmkmJnpiKGEuaSkpfW4uaW5qZWN0VmVyaWZpY2F0aW9uU2NyaXB0UmVzb3VyY2VzPWZ1bmN0aW9uKGEsYil7Vih0aGlzLmcsYSkuaW5qZWN0VmVyaWZpY2F0aW9uU2NyaXB0UmVzb3VyY2VzKGIpfTtuLnNldENyZWF0aXZlVHlwZT1mdW5jdGlvbihhLGIsYyl7Yz12b2lkIDA9PT1jP251bGw6YztWKHRoaXMuZyxhKS5zZXRDcmVhdGl2ZVR5cGUoYixjKX07Cm4uc2V0SW1wcmVzc2lvblR5cGU9ZnVuY3Rpb24oYSxiKXtWKHRoaXMuZyxhKS5zZXRJbXByZXNzaW9uVHlwZShiKX07bi5zZXRDbGllbnRJbmZvPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuZztpZihudWxsPT1hKWE9ZS5nO2Vsc2V7dmFyIGY9W10uY29uY2F0KHEoZS5oLnZhbHVlcygpKSkuaW5jbHVkZXMoZS5nKT8kYihlKTplLmc7ZS5oLnNldChhLGYpO2E9Zn1yZXR1cm4gYS5zZXRDbGllbnRJbmZvKGIsYyxkKX07ZnVuY3Rpb24gbmMoYSl7YT1hLnNwbGl0KCctJylbMF0uc3BsaXQoJy4nKTtmb3IodmFyIGI9WycxJywnMCcsJzMnXSxjPTA7Mz5jO2MrKyl7dmFyIGQ9cGFyc2VJbnQoYVtjXSwxMCksZT1wYXJzZUludChiW2NdLDEwKTtpZihkPmUpYnJlYWs7ZWxzZSBpZihkPGUpcmV0dXJuITF9cmV0dXJuITB9O2Z1bmN0aW9uIG9jKGEsYil7cmV0dXJuL1xkK1wuXGQrXC5cZCsoLS4qKT8vLnRlc3QoYSkmJm5jKGEpP2I6SlNPTi5zdHJpbmdpZnkoYil9ZnVuY3Rpb24gcGMoYSxiKXtyZXR1cm4vXGQrXC5cZCtcLlxkKygtLiopPy8udGVzdChhKSYmbmMoYSk/Yj9iOltdOmImJidzdHJpbmcnPT09dHlwZW9mIGI/SlNPTi5wYXJzZShiKTpbXX07ZnVuY3Rpb24gcWMoKXt2YXIgYT1yYzt2YXIgYj12b2lkIDA9PT1iP29taWRHbG9iYWw6Yjt0aGlzLmc9YTt0aGlzLmg9Yjt0aGlzLmo9bmV3IFg7dGhpcy5oLm9taWQ9dGhpcy5oLm9taWR8fHt9O3RoaXMuaC5vbWlkLnYxX1Nlc3Npb25TZXJ2aWNlQ29tbXVuaWNhdGlvbj10aGlzLmo7dGhpcy5pPWImJmIuYWRkRXZlbnRMaXN0ZW5lciYmYi5wb3N0TWVzc2FnZT9uZXcgaGMoYik6bnVsbDt0aGlzLmouZz10aGlzLm0uYmluZCh0aGlzKTt0aGlzLmkmJih0aGlzLmkuZz10aGlzLmwuYmluZCh0aGlzKSl9cWMucHJvdG90eXBlLm09ZnVuY3Rpb24oYSxiKXtudWxsIT1mYyhhLm1ldGhvZCkmJnNjKHRoaXMsYSxiLHRoaXMuail9O3FjLnByb3RvdHlwZS5sPWZ1bmN0aW9uKGEsYil7bnVsbCE9ZmMoYS5tZXRob2QpJiZzYyh0aGlzLGEsYix0aGlzLmkpfTsKZnVuY3Rpb24gc2MoYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe3ZhciBrPW5ldyBXKGYsJ3Jlc3BvbnNlJyxoLG9jKGgsdy5hcHBseSgwLGFyZ3VtZW50cykpKTtkLmgoayxjKX12YXIgZj1iLmgsZz1iLm1ldGhvZCxoPWIudmVyc2lvbjtiPXBjKGgsYi5nKTt0cnl7dGMoYSxnLGUsYil9Y2F0Y2goayl7ZC5oKG5ldyBXKGYsJ2Vycm9yJyxoLCdcbiAgICAgICAgbmFtZTogJytrLm5hbWUrJ1xuICAgICAgICBtZXNzYWdlOiAnK2subWVzc2FnZSsnXG4gICAgICAgIGZpbGVuYW1lOiAnK2suZmlsZW5hbWUrJ1xuICAgICAgICBsaW5lTnVtYmVyOiAnK2subGluZU51bWJlcisnXG4gICAgICAgIGNvbHVtbk51bWJlcjogJytrLmNvbHVtbk51bWJlcisnXG4gICAgICAgIHN0YWNrOiAnK2suc3RhY2srJ1xuICAgICAgICB0b1N0cmluZygpOiAnK2sudG9TdHJpbmcoKSksYyl9fQpmdW5jdGlvbiB0YyhhLGIsYyxkKXtpZihudWxsIT1mYyhiKSlzd2l0Y2goZmMoYikpe2Nhc2UgJ3JlZ2lzdGVyQWRFdmVudHMnOmM9cChkKS5uZXh0KCkudmFsdWU7cWIoVihhLmcuZyxjKS5oLCdqYXZhc2NyaXB0Jyk7YnJlYWs7Y2FzZSAncmVnaXN0ZXJNZWRpYUV2ZW50cyc6Yz1wKGQpLm5leHQoKS52YWx1ZTtvYihWKGEuZy5nLGMpLmgsJ2phdmFzY3JpcHQnKTticmVhaztjYXNlICdyZWdpc3RlclNlc3Npb25PYnNlcnZlcic6dmFyIGU9cChkKS5uZXh0KCkudmFsdWU7YS5nLnJlZ2lzdGVyU2Vzc2lvbk9ic2VydmVyKGUsYyk7YnJlYWs7Y2FzZSAnc2V0U2xvdEVsZW1lbnQnOmU9cChkKTtjPWUubmV4dCgpLnZhbHVlO2U9ZS5uZXh0KCkudmFsdWU7YS5nLnNldFNsb3RFbGVtZW50KGUsYyk7YnJlYWs7Y2FzZSAnc2V0VmlkZW9FbGVtZW50JzplPXAoZCk7Yz1lLm5leHQoKS52YWx1ZTtlPWUubmV4dCgpLnZhbHVlO2E9VihhLmcuZyxlKTtjJiZjLnRhZ05hbWUmJid2aWRlbyc9PT0KYy50YWdOYW1lLnRvTG93ZXJDYXNlKCk/KGEuZy5qPWMsYS5pJiZBYihhLmkpKTpLKCdzZXRWaWRlb0VsZW1lbnQgY2FsbGVkIHdpdGggYSBub24tSFRNTFZpZGVvRWxlbWVudC4gSXQgd2lsbCBiZSBpZ25vcmVkLicpO2JyZWFrO2Nhc2UgJ3NldEVsZW1lbnRCb3VuZHMnOmU9cChkKTtjPWUubmV4dCgpLnZhbHVlO2U9ZS5uZXh0KCkudmFsdWU7YS5nLnNldEVsZW1lbnRCb3VuZHMoZSxjKTticmVhaztjYXNlICdzdGFydFNlc3Npb24nOmM9cChkKTtkPWMubmV4dCgpLnZhbHVlO2M9Yy5uZXh0KCkudmFsdWU7Yj1hLmg7aWYobnVsbCE9ZCYmTihkKSl7dmFyIGY9ZC5jdXN0b21SZWZlcmVuY2VEYXRhO2Q9ZC51bmRlckV2YWx1YXRpb247UChmKXx8KGY9dm9pZCAwKTsnYm9vbGVhbic9PT10eXBlb2YgZHx8KGQ9ITEpO2Q9e2N1c3RvbVJlZmVyZW5jZURhdGE6Zix1bmRlckV2YWx1YXRpb246ZH07aWYoJ29iamVjdCc9PT10eXBlb2YgTmIoYikpe3ZhciBnPU5iKGIpLGg7J29iamVjdCc9PT0KdHlwZW9mIGcmJihoPWcuaWRlbnRpZmllcik7ZC5hcHA9e2FwcElkOmgmJidzdHJpbmcnPT09dHlwZW9mIGg/aDp2b2lkIDB9O2I6aWYoZz1OYihiKSwnb2JqZWN0Jz09PXR5cGVvZiBnKXt0cnl7ZT1KU09OLnBhcnNlKGcuZGV2aWNlSW5mbyl9Y2F0Y2gobSl7ZT12b2lkIDA7YnJlYWsgYn1lPXtkZXZpY2VUeXBlOmUubW9kZWxOYW1lfHwnVW5rbm93bicsb3NWZXJzaW9uOmUucGxhdGZvcm1WZXJzaW9ufHwnVW5rbm93bicsb3M6J3dlYk9TJ319ZWxzZSBlPXZvaWQgMDtkLmRldmljZUluZm89ZTtkLmRldmljZUNhdGVnb3J5PSdjdHYnfWVsc2UgaWYoUGIoYikpe2I6e2lmKFBiKGIpKXt0cnl7dmFyIGs9T2IoYikuYXBwbGljYXRpb24uZ2V0Q3VycmVudEFwcGxpY2F0aW9uKCkuYXBwSW5mby5pZH1jYXRjaChtKXtlPXZvaWQgMDticmVhayBifWlmKCdzdHJpbmcnPT09dHlwZW9mIGspe2U9azticmVhayBifX1lPXZvaWQgMH1kLmFwcD17YXBwSWQ6ZX07aWYoUGIoYikpe2U9T2IoYikuc3lzdGVtaW5mbzsKaWYoJ29iamVjdCc9PT10eXBlb2YgZSYmJ2Z1bmN0aW9uJz09PXR5cGVvZiBlLmdldENhcGFiaWxpdHkpe2c9ZS5nZXRDYXBhYmlsaXR5KCdodHRwOi8vdGl6ZW4ub3JnL3N5c3RlbS9tb2RlbF9uYW1lJyk7dmFyIGw9ZS5nZXRDYXBhYmlsaXR5KCdodHRwOi8vdGl6ZW4ub3JnL2ZlYXR1cmUvcGxhdGZvcm0udmVyc2lvbicpfWU9e2RldmljZVR5cGU6Z3x8J1Vua25vd24nLG9zVmVyc2lvbjpsfHwnVW5rbm93bicsb3M6J3RpemVuJ319ZWxzZSBlPXZvaWQgMDtkLmRldmljZUluZm89ZTtQYihiKSYmJ29iamVjdCc9PT10eXBlb2YgT2IoYikudHZpbnB1dGRldmljZSYmKGQuZGV2aWNlQ2F0ZWdvcnk9J2N0dicpfX1lbHNlIGQ9bnVsbDtpZihudWxsPT1kKWJyZWFrO2xjKGEuZyxjLGQsITEpO2JyZWFrO2Nhc2UgJ2ZpbmlzaFNlc3Npb24nOmM9cChkKS5uZXh0KCkudmFsdWU7bWMoYS5nLGMsITEpO2JyZWFrO2Nhc2UgJ2ltcHJlc3Npb25PY2N1cnJlZCc6Yz1wKGQpLm5leHQoKS52YWx1ZTsKWShhLmcsYywnaW1wcmVzc2lvbicpO2JyZWFrO2Nhc2UgJ2xvYWRlZCc6ZT1wKGQpO2M9ZS5uZXh0KCkudmFsdWU7ZT1lLm5leHQoKS52YWx1ZTtjPyhnPXtza2lwcGFibGU6Yy5pc1NraXBwYWJsZSxhdXRvUGxheTpjLmlzQXV0b1BsYXkscG9zaXRpb246Yy5wb3NpdGlvbn0sYy5pc1NraXBwYWJsZSYmKGcuc2tpcE9mZnNldD1jLnNraXBPZmZzZXQpLFkoYS5nLGUsJ2xvYWRlZCcsZykpOlkoYS5nLGUsJ2xvYWRlZCcpO2JyZWFrO2Nhc2UgJ3N0YXJ0JzpnPXAoZCk7Yz1nLm5leHQoKS52YWx1ZTtlPWcubmV4dCgpLnZhbHVlO2c9Zy5uZXh0KCkudmFsdWU7WShhLmcsZywnc3RhcnQnLHtkdXJhdGlvbjpjLG1lZGlhUGxheWVyVm9sdW1lOmV9KTticmVhaztjYXNlICdmaXJzdFF1YXJ0aWxlJzpjPXAoZCkubmV4dCgpLnZhbHVlO1koYS5nLGMsJ2ZpcnN0UXVhcnRpbGUnKTticmVhaztjYXNlICdtaWRwb2ludCc6Yz1wKGQpLm5leHQoKS52YWx1ZTtZKGEuZyxjLCdtaWRwb2ludCcpO2JyZWFrOwpjYXNlICd0aGlyZFF1YXJ0aWxlJzpjPXAoZCkubmV4dCgpLnZhbHVlO1koYS5nLGMsJ3RoaXJkUXVhcnRpbGUnKTticmVhaztjYXNlICdjb21wbGV0ZSc6Yz1wKGQpLm5leHQoKS52YWx1ZTtZKGEuZyxjLCdjb21wbGV0ZScpO2JyZWFrO2Nhc2UgJ3BhdXNlJzpjPXAoZCkubmV4dCgpLnZhbHVlO1koYS5nLGMsJ3BhdXNlJyk7YnJlYWs7Y2FzZSAncmVzdW1lJzpjPXAoZCkubmV4dCgpLnZhbHVlO1koYS5nLGMsJ3Jlc3VtZScpO2JyZWFrO2Nhc2UgJ2J1ZmZlclN0YXJ0JzpjPXAoZCkubmV4dCgpLnZhbHVlO1koYS5nLGMsJ2J1ZmZlclN0YXJ0Jyk7YnJlYWs7Y2FzZSAnYnVmZmVyRmluaXNoJzpjPXAoZCkubmV4dCgpLnZhbHVlO1koYS5nLGMsJ2J1ZmZlckZpbmlzaCcpO2JyZWFrO2Nhc2UgJ3NraXBwZWQnOmM9cChkKS5uZXh0KCkudmFsdWU7WShhLmcsYywnc2tpcHBlZCcpO2JyZWFrO2Nhc2UgJ3ZvbHVtZUNoYW5nZSc6ZT1wKGQpO2M9ZS5uZXh0KCkudmFsdWU7ZT1lLm5leHQoKS52YWx1ZTsKWShhLmcsZSwndm9sdW1lQ2hhbmdlJyx7bWVkaWFQbGF5ZXJWb2x1bWU6Y30pO2JyZWFrO2Nhc2UgJ3BsYXllclN0YXRlQ2hhbmdlJzplPXAoZCk7Yz1lLm5leHQoKS52YWx1ZTtlPWUubmV4dCgpLnZhbHVlO1koYS5nLGUsJ3BsYXllclN0YXRlQ2hhbmdlJyx7c3RhdGU6Y30pO2JyZWFrO2Nhc2UgJ2FkVXNlckludGVyYWN0aW9uJzplPXAoZCk7Yz1lLm5leHQoKS52YWx1ZTtlPWUubmV4dCgpLnZhbHVlO1koYS5nLGUsJ2FkVXNlckludGVyYWN0aW9uJyx7aW50ZXJhY3Rpb25UeXBlOmN9KTticmVhaztjYXNlICdzZXRDbGllbnRJbmZvJzpoPXAoZCk7ZT1oLm5leHQoKS52YWx1ZTtnPWgubmV4dCgpLnZhbHVlO2w9aC5uZXh0KCkudmFsdWU7aD1oLm5leHQoKS52YWx1ZTthPWEuZy5zZXRDbGllbnRJbmZvKGgsZSxnLGwpO2MoYSk7YnJlYWs7Y2FzZSAnaW5qZWN0VmVyaWZpY2F0aW9uU2NyaXB0UmVzb3VyY2VzJzplPXAoZCk7Yz1lLm5leHQoKS52YWx1ZTtlPWUubmV4dCgpLnZhbHVlOwphLmcuaW5qZWN0VmVyaWZpY2F0aW9uU2NyaXB0UmVzb3VyY2VzKGUsYyk7YnJlYWs7Y2FzZSAnc2V0Q3JlYXRpdmVUeXBlJzplPXAoZCk7Yz1lLm5leHQoKS52YWx1ZTtlPWUubmV4dCgpLnZhbHVlO2EuZy5zZXRDcmVhdGl2ZVR5cGUoZSxjKTticmVhaztjYXNlICdzZXRJbXByZXNzaW9uVHlwZSc6ZT1wKGQpO2M9ZS5uZXh0KCkudmFsdWU7ZT1lLm5leHQoKS52YWx1ZTthLmcuc2V0SW1wcmVzc2lvblR5cGUoZSxjKTticmVhaztjYXNlICdzZXRDb250ZW50VXJsJzplPXAoZCk7Yz1lLm5leHQoKS52YWx1ZTtlPWUubmV4dCgpLnZhbHVlO1YoYS5nLmcsZSkuZy5DPWM7YnJlYWs7Y2FzZSAnc2Vzc2lvbkVycm9yJzpnPXAoZCksYz1nLm5leHQoKS52YWx1ZSxlPWcubmV4dCgpLnZhbHVlLGc9Zy5uZXh0KCkudmFsdWUsYS5nLmVycm9yKGcsYyxlKX19O2Z1bmN0aW9uIFooKXt0aGlzLmc9cmN9bj1aLnByb3RvdHlwZTsKbi5kYT1mdW5jdGlvbihhLGIpe2lmKCEoIShhJiZOKGEpJiZRKGEuaW1wcmVzc2lvbk93bmVyLHFhKSl8fCd2aWRlb0V2ZW50c093bmVyJ2luIGEmJm51bGwhPWEudmlkZW9FdmVudHNPd25lciYmIVEoYS52aWRlb0V2ZW50c093bmVyLHFhKXx8J21lZGlhRXZlbnRzT3duZXInaW4gYSYmbnVsbCE9YS5tZWRpYUV2ZW50c093bmVyJiYhUShhLm1lZGlhRXZlbnRzT3duZXIscWEpKSl7Yj1WKHRoaXMuZy5nLGIpO2lmKGEuY3JlYXRpdmVUeXBlJiZhLmltcHJlc3Npb25UeXBlKXt2YXIgYz1hLm1lZGlhRXZlbnRzT3duZXI7bnVsbD09Yi5nLmgmJmIuc2V0Q3JlYXRpdmVUeXBlKGEuY3JlYXRpdmVUeXBlLGMpO251bGw9PWIuZy5sJiYoYi5nLmw9YS5pbXByZXNzaW9uVHlwZSk7b2IoYi5oLGMpfWVsc2UgYz1hLnZpZGVvRXZlbnRzT3duZXIsYi5nLmc9bnVsbD09Y3x8J25vbmUnPT09Yz8nZGlzcGxheSc6J3ZpZGVvJyxiLmcuaD1udWxsLGIuZy5sPW51bGwsb2IoYi5oLGMpO3FiKGIuaCxhLmltcHJlc3Npb25Pd25lcik7CmEmJm51bGwhPWEuaXNvbGF0ZVZlcmlmaWNhdGlvblNjcmlwdHMmJidib29sZWFuJz09PXR5cGVvZiBhLmlzb2xhdGVWZXJpZmljYXRpb25TY3JpcHRzJiYoYi5nLkk9YS5pc29sYXRlVmVyaWZpY2F0aW9uU2NyaXB0cyl9fTsKbi5hYT1mdW5jdGlvbihhLGIsYyxkKXtiJiYnc3RyaW5nJz09PXR5cGVvZiBiLmFkU2Vzc2lvblR5cGUmJihiLmFkU2Vzc2lvblR5cGU9Yi5hZFNlc3Npb25UeXBlLnRvTG93ZXJDYXNlKCkpO3ZhciBlO2lmKE4oYikpe2lmKGU9UShiLmVudmlyb25tZW50LHVhKSYmUShiLmFkU2Vzc2lvblR5cGUscGEpKWU9Yi5vbWlkTmF0aXZlSW5mbyxlPU4oZSk/UChlLnBhcnRuZXJOYW1lKSYmUChlLnBhcnRuZXJWZXJzaW9uKTohMTtlJiYoZT1iLmFwcCxlPU4oZSk/UChlLmxpYnJhcnlWZXJzaW9uKSYmUChlLmFwcElkKTohMSl9ZWxzZSBlPSExO2lmKGUpe2lmKGFjKGQpKXtlPXAoT2JqZWN0LnZhbHVlcyhkKSk7Zm9yKHZhciBmPWUubmV4dCgpOyFmLmRvbmU7Zj1lLm5leHQoKSlmLnZhbHVlLmFjY2Vzc01vZGU9J2xpbWl0ZWQnO1YodGhpcy5nLmcsYSkuZy52PW5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZCkpfWxjKHRoaXMuZyxhLGIsITAsYyl9ZWxzZSBLKCdOYXRpdmUgYWQgc2Vzc2lvbiBjb250ZXh0IGludmFsaWQ7IHNlc3Npb24gbm90IHN0YXJ0ZWQuJyl9OwpuLlc9ZnVuY3Rpb24oYSl7bWModGhpcy5nLGEsITApfTtuLiQ9ZnVuY3Rpb24oYSxiKXtOKGEpJiZPKGEueCkmJk8oYS55KSYmTyhhLndpZHRoKSYmTyhhLmhlaWdodCkmJihiPVYodGhpcy5nLmcsYiksYi5nLkw9YSxNKGIuaiwnY29udGFpbmVyJykpfTtuLmhhPWZ1bmN0aW9uKGEsYil7UShhLHNhKSYmKGI9Vih0aGlzLmcuZyxiKSxiLmcuQT1hLCdiYWNrZ3JvdW5kZWQnPT09YT9NKGIuaiwnY29udGFpbmVyJywnYmFja2dyb3VuZGVkJyk6TShiLmosJ2NvbnRhaW5lcicpKX07bi5ZPWZ1bmN0aW9uKGEsYil7UShhLHRhKSYmKGI9Vih0aGlzLmcuZyxiKSxiLmcuTT1hLCdsb2NrZWQnPT09YT9NKGIuaiwnY29udGFpbmVyJywnZGV2aWNlTG9ja2VkJyk6TShiLmosJ2NvbnRhaW5lcicpKX07bi5lYT1mdW5jdGlvbihhKXsnaW1wcmVzc2lvbic9PT1hJiZ0aGlzLlQoKX07bi5UPWZ1bmN0aW9uKGEpe2E9Vih0aGlzLmcuZyxhKTtyYihhLmgsJ25hdGl2ZScpJiZrYihhLmgsJ25hdGl2ZScpfTsKbi5YPWZ1bmN0aW9uKGEsYil7dGhpcy5TKCdsb2FkZWQnLHZvaWQgMD09PWE/bnVsbDphLGIpfTtuLmVycm9yPWZ1bmN0aW9uKGEsYixjKXtRKGEsb2EpJiZ0aGlzLmcuZXJyb3IoYyxhLGIpfTtuLmZhPWZ1bmN0aW9uKGEsYixjKXt0aGlzLlMoYSxiLGMpfTtuLlM9ZnVuY3Rpb24oYSxiLGMpe1EoYSx5KSYmKHZvaWQgMD09PWJ8fE4oYikpJiYoYz1WKHRoaXMuZy5nLGMpLHBiKGMuaCwnbmF0aXZlJykmJignbG9hZGVkJz09YT9sYihjLmgsJ25hdGl2ZScsYik6bWIoYy5oLGEsJ25hdGl2ZScsYikpKX07bi5aPWZ1bmN0aW9uKGEsYil7Yj1WKHRoaXMuZy5nLGIpOydub25lJz09PWIuaC5nLm98fCdudW1iZXInIT09dHlwZW9mIGF8fGlzTmFOKGEpfHwoYi5nLkQ9YSxhPWIucyxiPWEuZy5KLG51bGwhPWImJm1iKGEuaCwndm9sdW1lQ2hhbmdlJywnbmF0aXZlJyx7bWVkaWFQbGF5ZXJWb2x1bWU6YixkZXZpY2VWb2x1bWU6YS5nLkR9KSl9OwpuLmdhPWZ1bmN0aW9uKGEpe2lmKGEmJk4oYSkmJk8oYS50aW1lc3RhbXApKXt2YXIgYj1OYSgpLGM9KGIuZ3x8e30pLnRpbWVzdGFtcDtpZighY3x8YzxhLnRpbWVzdGFtcCliLmc9YX19O1oucHJvdG90eXBlLnN0YXJ0U2Vzc2lvbj1aLnByb3RvdHlwZS5hYTtaLnByb3RvdHlwZS5lcnJvcj1aLnByb3RvdHlwZS5lcnJvcjtaLnByb3RvdHlwZS5maW5pc2hTZXNzaW9uPVoucHJvdG90eXBlLlc7Wi5wcm90b3R5cGUucHVibGlzaEFkRXZlbnQ9Wi5wcm90b3R5cGUuZWE7Wi5wcm90b3R5cGUucHVibGlzaEltcHJlc3Npb25FdmVudD1aLnByb3RvdHlwZS5UO1oucHJvdG90eXBlLnB1Ymxpc2hWaWRlb0V2ZW50PVoucHJvdG90eXBlLmZhO1oucHJvdG90eXBlLnB1Ymxpc2hNZWRpYUV2ZW50PVoucHJvdG90eXBlLlM7Wi5wcm90b3R5cGUucHVibGlzaExvYWRlZEV2ZW50PVoucHJvdG90eXBlLlg7Wi5wcm90b3R5cGUuc2V0TmF0aXZlVmlld0hpZXJhcmNoeT1aLnByb3RvdHlwZS4kOwpaLnByb3RvdHlwZS5zZXRTdGF0ZT1aLnByb3RvdHlwZS5oYTtaLnByb3RvdHlwZS5zZXREZXZpY2VMb2NrU3RhdGU9Wi5wcm90b3R5cGUuWTtaLnByb3RvdHlwZS5zZXREZXZpY2VWb2x1bWU9Wi5wcm90b3R5cGUuWjtaLnByb3RvdHlwZS5pbml0PVoucHJvdG90eXBlLmRhO1oucHJvdG90eXBlLnNldExhc3RBY3Rpdml0eT1aLnByb3RvdHlwZS5nYTtmdW5jdGlvbiB1Yygpe3ZhciBhPWtjLGI9dmMsYz10aGlzO3ZhciBkPXZvaWQgMD09PWQ/SjpkO3RoaXMuaj1hO3RoaXMuZz1iO3RoaXMubD17fTt0aGlzLm09e307dGhpcy5pPW5ldyBYO2Qub21pZD1kLm9taWR8fHt9O2Qub21pZC52MV9WZXJpZmljYXRpb25TZXJ2aWNlQ29tbXVuaWNhdGlvbj10aGlzLmk7dGhpcy5oPW51bGw7ZCYmZC5hZGRFdmVudExpc3RlbmVyJiZkLnBvc3RNZXNzYWdlJiYodGhpcy5oPW5ldyBoYyhkKSk7dGhpcy5pLmc9ZnVuY3Rpb24oZSxmKXt3YyhjLGUsZixjLmkpfTt0aGlzLmgmJih0aGlzLmguZz1mdW5jdGlvbihlLGYpe2MuaCYmd2MoYyxlLGYsYy5oKX0pfWZ1bmN0aW9uIHhjKGEsYixjLGQpe2E9WmIoYS5qLGQpLmg7J21lZGlhJz09PWJ8fCd2aWRlbyc9PT1iPyRhKGEsYyxkKTooYz17dHlwZTpiLFI6ZCxHOmN9LGEuai5wdXNoKGMpLFphKGEsYixjKSl9ZnVuY3Rpb24geWMoYSxiLGMsZCl7YT1aYihhLmosZCk7WWIoYSxiLGMsZCl9CmZ1bmN0aW9uIHpjKGEsYixjLGQpe3hiKGEuZyxiLGMsZCl9dWMucHJvdG90eXBlLnNldEludGVydmFsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZy5zZXRJbnRlcnZhbChhLGIpfTt1Yy5wcm90b3R5cGUuY2xlYXJJbnRlcnZhbD1mdW5jdGlvbihhKXt0aGlzLmcuY2xlYXJJbnRlcnZhbChhKX07ZnVuY3Rpb24gQWMoYSxiLGMsZCl7d2IoYS5nLCdkb3dubG9hZEphdmFTY3JpcHRSZXNvdXJjZScpKGIsYyxkKX0KZnVuY3Rpb24gd2MoYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe3ZhciBCPW5ldyBXKGYsJ3Jlc3BvbnNlJyxoLG9jKGgsdy5hcHBseSgwLGFyZ3VtZW50cykpKTtkLmgoQixjKX12YXIgZj1iLmgsZz1iLm1ldGhvZCxoPWIudmVyc2lvbjtiPXBjKGgsYi5nKTtpZihudWxsIT1nYyhnLCdWZXJpZmljYXRpb25TZXJ2aWNlLicpKXtnPWdjKGcsJ1ZlcmlmaWNhdGlvblNlcnZpY2UuJyk7dHJ5e3N3aXRjaChnKXtjYXNlICdhZGRFdmVudExpc3RlbmVyJzp2YXIgaz1wKGIpLGw9ay5uZXh0KCkudmFsdWUsbT1rLm5leHQoKS52YWx1ZXx8QmMoYyk7eGMoYSxsLGUsbSk7YnJlYWs7Y2FzZSAnYWRkU2Vzc2lvbkxpc3RlbmVyJzp2YXIgdD1wKGIpLEk9dC5uZXh0KCkudmFsdWUsYmE9dC5uZXh0KCkudmFsdWV8fEJjKGMpO3ljKGEsZSxJLGJhKTticmVhaztjYXNlICdzZW5kVXJsJzp2YXIgUj1wKGIpLm5leHQoKS52YWx1ZTt6YyhhLFIsZnVuY3Rpb24oKXtyZXR1cm4gZSghMCl9LGZ1bmN0aW9uKCl7cmV0dXJuIGUoITEpfSk7CmJyZWFrO2Nhc2UgJ3NldFRpbWVvdXQnOnZhciBGPXAoYiksRmM9Ri5uZXh0KCkudmFsdWUsR2M9Ri5uZXh0KCkudmFsdWU7YS5sW0ZjXT11YihhLmcsJ3NldFRpbWVvdXQnKShlLEdjKTticmVhaztjYXNlICdjbGVhclRpbWVvdXQnOnZhciBIYz1wKGIpLm5leHQoKS52YWx1ZTt2YihhLmcsYS5sW0hjXSk7YnJlYWs7Y2FzZSAnc2V0SW50ZXJ2YWwnOnZhciBSYj1wKGIpLEljPVJiLm5leHQoKS52YWx1ZSxKYz1SYi5uZXh0KCkudmFsdWU7YS5tW0ljXT1hLnNldEludGVydmFsKGUsSmMpO2JyZWFrO2Nhc2UgJ2NsZWFySW50ZXJ2YWwnOnZhciBLYz1wKGIpLm5leHQoKS52YWx1ZTthLmNsZWFySW50ZXJ2YWwoYS5tW0tjXSk7YnJlYWs7Y2FzZSAnaW5qZWN0SmF2YVNjcmlwdFJlc291cmNlJzp2YXIgTGM9cChiKS5uZXh0KCkudmFsdWU7QWMoYSxMYyxmdW5jdGlvbihCKXtyZXR1cm4gZSghMCxCKX0sZnVuY3Rpb24oKXtyZXR1cm4gZSghMSl9KTticmVhaztjYXNlICdnZXRWZXJzaW9uJzplKCcxLjUuMS1pYWI0NTIyJyl9fWNhdGNoKEIpe2QuaChuZXcgVyhmLAonZXJyb3InLGgsJ1xuICAgICAgICAgICAgICBuYW1lOiAnK0IubmFtZSsnXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICcrQi5tZXNzYWdlKydcbiAgICAgICAgICAgICAgZmlsZW5hbWU6ICcrQi5maWxlbmFtZSsnXG4gICAgICAgICAgICAgIGxpbmVOdW1iZXI6ICcrQi5saW5lTnVtYmVyKydcbiAgICAgICAgICAgICAgY29sdW1uTnVtYmVyOiAnK0IuY29sdW1uTnVtYmVyKydcbiAgICAgICAgICAgICAgc3RhY2s6ICcrQi5zdGFjaysnXG4gICAgICAgICAgICAgIHRvU3RyaW5nKCk6ICcrQi50b1N0cmluZygpKydcbiAgICAgICAgICAnKSxjKX19fQpmdW5jdGlvbiBCYyhhKXtmb3IodmFyIGI9TmEoKS5oLGM9cChiLmtleXMoKSksZD1jLm5leHQoKTshZC5kb25lO2Q9Yy5uZXh0KCkpe2Q9ZC52YWx1ZTt2YXIgZT1iLmdldChkKTtpZihlKXtpZihlLmNvbnRlbnRXaW5kb3c9PT1hKXJldHVybiBkO3RyeXtpZihlLmNvbnRlbnRXaW5kb3cuT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGEpKXJldHVybiBkfWNhdGNoKGYpe319fX07ZnVuY3Rpb24gQ2MoYSl7dmFyIGI9e307cmV0dXJuKGIuYXBwPSdvbWlkX3YxX3ByZXNlbnRfYXBwJyxiLndlYj0nb21pZF92MV9wcmVzZW50X3dlYicsYilbYV19ZnVuY3Rpb24gRGMoYSxiKXthLmRvY3VtZW50LndyaXRlKCc8aWZyYW1lIHN0eWxlPSJkaXNwbGF5Om5vbmUiIGlkPSInKyhiKyciIG5hbWU9IicrYisnIiBzYW5kYm94PjwvaWZyYW1lPicpKX1mdW5jdGlvbiBFYyhhLGIpe3ZhciBjPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7Yy5pZD1iO2MubmFtZT1iO2Muc3R5bGUuZGlzcGxheT0nbm9uZSc7Yy5zYW5kYm94PScnO2EuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjKX0KZnVuY3Rpb24gTWMoYSxiKXt2YXIgYz1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihkKXtkLmZvckVhY2goZnVuY3Rpb24oZSl7J0JPRFknPT09ZS5hZGRlZE5vZGVzWzBdLm5vZGVOYW1lJiYoZT1DYyhiKSxFYyhhLCdvbWlkX3YxX3ByZXNlbnQnKSxFYyhhLGUpLGMuZGlzY29ubmVjdCgpKX0pfSk7Yy5vYnNlcnZlKGEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHtjaGlsZExpc3Q6ITB9KX07dmFyIHZjPW5ldyB0YixrYz1uZXcgZnVuY3Rpb24oKXt0aGlzLmk9dmM7dGhpcy5oPW5ldyBNYXA7dGhpcy5nPSRiKHRoaXMpfSxyYz1uZXcgamM7bmV3IHVjO0oub21pZEJyaWRnZT1uZXcgWjtuZXcgcWM7KGZ1bmN0aW9uKGEsYil7YS5mcmFtZXMmJmEuZG9jdW1lbnQmJiFbJ29taWRfdjFfcHJlc2VudCcsJ29taWRfdjFfcHJlc2VudF93ZWInLCdvbWlkX3YxX3ByZXNlbnRfYXBwJ10uc29tZShmdW5jdGlvbihjKXtyZXR1cm4hIWEuZnJhbWVzW2NdfSkmJihudWxsPT1hLmRvY3VtZW50LmJvZHkmJidNdXRhdGlvbk9ic2VydmVyJ2luIGE/TWMoYSxiKTooYj1DYyhiKSxhLmRvY3VtZW50LmJvZHk/KEVjKGEsJ29taWRfdjFfcHJlc2VudCcpLEVjKGEsYikpOihEYyhhLCdvbWlkX3YxX3ByZXNlbnQnKSxEYyhhLGIpKSkpfSkoSiwnYXBwJyk7Cn0pLmNhbGwodGhpcywgdGhpcyk7"

    .line 173
    .line 174
    invoke-static {v5, v7}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    .line 175
    .line 176
    .line 177
    move-result-object v5

    .line 178
    new-instance v6, Ljava/lang/String;

    .line 179
    .line 180
    invoke-direct {v6, v5}, Ljava/lang/String;-><init>([B)V

    .line 181
    .line 182
    .line 183
    invoke-static {p0, v4, v6, v4, v3}, Landroidx/camera/camera2/internal/J1;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    .line 184
    .line 185
    .line 186
    move-result-object v5

    .line 187
    const-string v6, "dmFyIGVsZW1lbnRUb1NjYWxlRm91bmQ9ITEsZWxlbWVudFRvU2NhbGU9bnVsbDtjb25zdCBjcmVhdGl2ZVJlc2l6ZT1mdW5jdGlvbihlLHQsbCl7bGV0IG49bCxpPXQsbz1lO24ub2Zmc2V0SGVpZ2h0PjEmJm4ub2Zmc2V0V2lkdGg+MSYmKGk9bi5vZmZzZXRIZWlnaHQsbz1uLm9mZnNldFdpZHRoKTtsZXQgZj1vLGE9aTtpZihpPHR8fG88ZSl7bGV0IGM9MTtpZihlL3Q+by9pPyhmPW8qKGM9dC9pKSxhPXQpOihjPWUvbyxmPWUsYT1pKmMpLGY8ZSYmKG4uc3R5bGUubWFyZ2luTGVmdD0oZS1mKS8yKyJweCIpLGE8dCl7bGV0IGQ9KHQtaSkvMisicHgiO24uc3R5bGUudHJhbnNmb3JtKz0idHJhbnNsYXRlKDBweCwiK2QrIikifW4uc3R5bGUudHJhbnNmb3JtKz0ic2NhbGUoIitjKyIsIitjKyIpIn19LGZpbmRFbGVtZW50QnlTaXplPWZ1bmN0aW9uKGUsdCxsKXtpZihlLm9mZnNldEhlaWdodD09PWwmJmUub2Zmc2V0V2lkdGg9PT10JiYoZWxlbWVudFRvU2NhbGU9ZSxlbGVtZW50VG9TY2FsZUZvdW5kPSEwKSwwIT09ZS5jaGlsZHJlbi5sZW5ndGgpZm9yKHZhciBuPTA7bjxlLmNoaWxkcmVuLmxlbmd0aCYmIWVsZW1lbnRUb1NjYWxlRm91bmQ7bisrKWZpbmRFbGVtZW50QnlTaXplKGUuY2hpbGRyZW5bbl0sdCxsKX0sdXBkYXRlQ3JlYXRpdmVTaXplPWZ1bmN0aW9uKGUsdCl7ZWxlbWVudFRvU2NhbGU9bnVsbCxlbGVtZW50VG9TY2FsZUZvdW5kPSExO2ZpbmRFbGVtZW50QnlTaXplKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoeWJpZC1hZCIpLDMyMCw0ODApLGVsZW1lbnRUb1NjYWxlRm91bmQmJm51bGwhPWVsZW1lbnRUb1NjYWxlJiZjcmVhdGl2ZVJlc2l6ZShlLHQsZWxlbWVudFRvU2NhbGUpfTs="

    .line 188
    .line 189
    invoke-static {v6, v7}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    .line 190
    .line 191
    .line 192
    move-result-object v6

    .line 193
    new-instance v8, Ljava/lang/String;

    .line 194
    .line 195
    invoke-direct {v8, v6}, Ljava/lang/String;-><init>([B)V

    .line 196
    .line 197
    .line 198
    invoke-static {p0, v4, v8, v4, v3}, Landroidx/camera/camera2/internal/J1;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    .line 199
    .line 200
    .line 201
    move-result-object p0

    .line 202
    const-string v3, "<head[^>]*>"

    .line 203
    .line 204
    invoke-static {v3, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    .line 205
    .line 206
    .line 207
    move-result-object v2

    .line 208
    invoke-virtual {v2, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    .line 209
    .line 210
    .line 211
    move-result-object v2

    .line 212
    invoke-virtual {v2, v7}, Ljava/util/regex/Matcher;->find(I)Z

    .line 213
    .line 214
    .line 215
    move-result v3

    .line 216
    if-eqz v3, :cond_4

    .line 217
    .line 218
    const-string v3, "body { margin:0; padding:0;}"

    .line 219
    .line 220
    const-string v6, "*:not(input) { -webkit-touch-callout:none; -webkit-user-select:none; -webkit-text-size-adjust:none; }"

    .line 221
    .line 222
    const-string v7, "<style>"

    .line 223
    .line 224
    invoke-static {v7, v4, v3, v4, v6}, LM1/baz;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 225
    .line 226
    .line 227
    move-result-object v3

    .line 228
    const-string v6, "</style>"

    .line 229
    .line 230
    invoke-static {v4, v6, v3}, LIo/i;->b(Ljava/lang/String;Ljava/lang/String;Ljava/lang/StringBuilder;)Ljava/lang/String;

    .line 231
    .line 232
    .line 233
    move-result-object v3

    .line 234
    invoke-virtual {v2}, Ljava/util/regex/Matcher;->end()I

    .line 235
    .line 236
    .line 237
    move-result v2

    .line 238
    const-string v6, "<meta name=\'viewport\' content=\'width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\' />"

    .line 239
    .line 240
    invoke-static {v4, v6, v4, v3, v4}, Lp3/N;->a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 241
    .line 242
    .line 243
    move-result-object v3

    .line 244
    invoke-static {v3, v1, v4, v5, v4}, Landroidx/room/m0;->a(Ljava/lang/StringBuilder;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V

    .line 245
    .line 246
    .line 247
    invoke-virtual {v3, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 248
    .line 249
    .line 250
    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    .line 251
    .line 252
    .line 253
    move-result-object p0

    .line 254
    invoke-virtual {v0, v2, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 255
    .line 256
    .line 257
    :cond_4
    invoke-virtual {v0}, Ljava/lang/StringBuffer;->toString()Ljava/lang/String;

    .line 258
    .line 259
    .line 260
    move-result-object p0

    .line 261
    return-object p0
    .line 262
    .line 263
    .line 264
    .line 265
    .line 266
    .line 267
    .line 268
    .line 269
    .line 270
    .line 271
    .line 272
    .line 273
    .line 274
    .line 275
    .line 276
    .line 277
    .line 278
    .line 279
    .line 280
    .line 281
    .line 282
    .line 283
    .line 284
    .line 285
    .line 286
    .line 287
    .line 288
    .line 289
    .line 290
    .line 291
    .line 292
    .line 293
    .line 294
    .line 295
    .line 296
    .line 297
    .line 298
    .line 299
    .line 300
    .line 301
    .line 302
    .line 303
    .line 304
    .line 305
    .line 306
    .line 307
    .line 308
    .line 309
    .line 310
    .line 311
    .line 312
    .line 313
    .line 314
    .line 315
    .line 316
    .line 317
    .line 318
    .line 319
    .line 320
    .line 321
    .line 322
    .line 323
    .line 324
    .line 325
    .line 326
    .line 327
    .line 328
    .line 329
    .line 330
    .line 331
    .line 332
    .line 333
    .line 334
    .line 335
    .line 336
    .line 337
    .line 338
    .line 339
    .line 340
    .line 341
    .line 342
    .line 343
    .line 344
    .line 345
    .line 346
    .line 347
    .line 348
    .line 349
    .line 350
    .line 351
    .line 352
    .line 353
    .line 354
    .line 355
    .line 356
    .line 357
    .line 358
    .line 359
    .line 360
    .line 361
    .line 362
    .line 363
    .line 364
    .line 365
    .line 366
    .line 367
    .line 368
    .line 369
    .line 370
    .line 371
    .line 372
    .line 373
    .line 374
    .line 375
    .line 376
    .line 377
    .line 378
    .line 379
    .line 380
    .line 381
    .line 382
    .line 383
    .line 384
    .line 385
    .line 386
    .line 387
    .line 388
    .line 389
    .line 390
    .line 391
    .line 392
    .line 393
    .line 394
    .line 395
    .line 396
    .line 397
    .line 398
    .line 399
    .line 400
    .line 401
    .line 402
    .line 403
    .line 404
    .line 405
    .line 406
    .line 407
    .line 408
    .line 409
    .line 410
    .line 411
    .line 412
    .line 413
    .line 414
    .line 415
    .line 416
    .line 417
    .line 418
    .line 419
    .line 420
    .line 421
    .line 422
    .line 423
    .line 424
    .line 425
    .line 426
    .line 427
    .line 428
    .line 429
    .line 430
    .line 431
    .line 432
    .line 433
    .line 434
    .line 435
    .line 436
    .line 437
    .line 438
    .line 439
    .line 440
    .line 441
    .line 442
    .line 443
    .line 444
    .line 445
    .line 446
    .line 447
    .line 448
    .line 449
    .line 450
    .line 451
    .line 452
    .line 453
    .line 454
    .line 455
    .line 456
    .line 457
    .line 458
    .line 459
    .line 460
    .line 461
    .line 462
    .line 463
    .line 464
    .line 465
    .line 466
    .line 467
    .line 468
    .line 469
    .line 470
    .line 471
    .line 472
    .line 473
    .line 474
    .line 475
    .line 476
    .line 477
    .line 478
    .line 479
    .line 480
    .line 481
    .line 482
    .line 483
    .line 484
    .line 485
    .line 486
    .line 487
    .line 488
    .line 489
    .line 490
    .line 491
    .line 492
    .line 493
    .line 494
    .line 495
    .line 496
    .line 497
    .line 498
    .line 499
    .line 500
    .line 501
    .line 502
    .line 503
    .line 504
    .line 505
    .line 506
    .line 507
    .line 508
    .line 509
    .line 510
    .line 511
    .line 512
    .line 513
    .line 514
    .line 515
    .line 516
    .line 517
    .line 518
    .line 519
    .line 520
    .line 521
    .line 522
    .line 523
    .line 524
    .line 525
    .line 526
    .line 527
    .line 528
    .line 529
    .line 530
    .line 531
    .line 532
    .line 533
    .line 534
    .line 535
    .line 536
    .line 537
    .line 538
    .line 539
    .line 540
    .line 541
    .line 542
    .line 543
    .line 544
    .line 545
    .line 546
    .line 547
    .line 548
    .line 549
    .line 550
    .line 551
    .line 552
    .line 553
    .line 554
    .line 555
    .line 556
    .line 557
    .line 558
    .line 559
    .line 560
    .line 561
    .line 562
    .line 563
    .line 564
    .line 565
    .line 566
    .line 567
    .line 568
    .line 569
    .line 570
    .line 571
    .line 572
    .line 573
    .line 574
    .line 575
    .line 576
    .line 577
    .line 578
    .line 579
    .line 580
    .line 581
    .line 582
    .line 583
    .line 584
    .line 585
    .line 586
    .line 587
    .line 588
    .line 589
    .line 590
    .line 591
    .line 592
    .line 593
    .line 594
    .line 595
    .line 596
    .line 597
    .line 598
    .line 599
    .line 600
    .line 601
    .line 602
    .line 603
    .line 604
    .line 605
    .line 606
    .line 607
    .line 608
    .line 609
    .line 610
    .line 611
    .line 612
    .line 613
    .line 614
    .line 615
    .line 616
    .line 617
    .line 618
    .line 619
    .line 620
    .line 621
    .line 622
    .line 623
    .line 624
    .line 625
    .line 626
    .line 627
    .line 628
    .line 629
    .line 630
    .line 631
    .line 632
    .line 633
    .line 634
    .line 635
    .line 636
    .line 637
    .line 638
    .line 639
    .line 640
    .line 641
    .line 642
    .line 643
    .line 644
    .line 645
    .line 646
    .line 647
    .line 648
    .line 649
    .line 650
    .line 651
    .line 652
    .line 653
    .line 654
    .line 655
    .line 656
    .line 657
    .line 658
    .line 659
    .line 660
    .line 661
    .line 662
    .line 663
    .line 664
    .line 665
    .line 666
    .line 667
    .line 668
    .line 669
    .line 670
    .line 671
    .line 672
    .line 673
    .line 674
    .line 675
.end method

.method private static removeAllScripts(Ljava/lang/String;)Ljava/lang/String;
    .locals 2

    .line 1
    const-string v0, ""

    .line 2
    .line 3
    if-eqz p0, :cond_1

    .line 4
    .line 5
    invoke-virtual {p0}, Ljava/lang/String;->isEmpty()Z

    .line 6
    .line 7
    .line 8
    move-result v1

    .line 9
    if-eqz v1, :cond_0

    .line 10
    .line 11
    goto :goto_0

    .line 12
    :cond_0
    const-string v1, "<script[\\s\\S]*?>[\\s\\S]*?<\\/script>"

    .line 13
    .line 14
    invoke-virtual {p0, v1, v0}, Ljava/lang/String;->replaceAll(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    .line 15
    .line 16
    .line 17
    move-result-object p0

    .line 18
    return-object p0

    .line 19
    :cond_1
    :goto_0
    return-object v0
    .line 20
    .line 21
    .line 22
    .line 23
    .line 24
    .line 25
    .line 26
    .line 27
    .line 28
    .line 29
    .line 30
    .line 31
    .line 32
    .line 33
    .line 34
    .line 35
    .line 36
    .line 37
.end method
